INFO:     Will watch for changes in these directories: ['D:\\c32poker']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [3504] using StatReload
INFO:     Started server process [22580]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Initializing RoomManager
Creating Room: id=d9ea5a9e-9a11-4a6c-9129-8eb7c246b208, name=asq
Room created successfully: id=d9ea5a9e-9a11-4a6c-9129-8eb7c246b208
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=d27a0a90-fd1a-44fb-88bb-64fb63738000, name=去
Room created successfully: id=d27a0a90-fd1a-44fb-88bb-64fb63738000
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=fd4aa916-a03c-4695-8464-f51e07bb5e69, name=aqa
Room created successfully: id=fd4aa916-a03c-4695-8464-f51e07bb5e69
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=864a9aa4-623a-412f-9af2-5988a722f10f, name=sda
Room created successfully: id=864a9aa4-623a-412f-9af2-5988a722f10f
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=81b31d1c-41cb-4381-bd45-78cb356006aa, name=sa1
Room created successfully: id=81b31d1c-41cb-4381-bd45-78cb356006aa
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=699dd4e3-cc43-4de5-8a97-6dcb71018cc3, name=gfdd
Room created successfully: id=699dd4e3-cc43-4de5-8a97-6dcb71018cc3
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=aede2b3a-9f98-4d3c-9a99-11c7b5e48931, name=sfdsda
Room created successfully: id=aede2b3a-9f98-4d3c-9a99-11c7b5e48931
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=f5fa56a2-3e76-465d-8a28-c679382012ec, name=vcdf
Room created successfully: id=f5fa56a2-3e76-465d-8a28-c679382012ec
Creating Room: id=4cabc3d9-ea71-4bc0-b367-59c80e4d0189, name=fddf
Room created successfully: id=4cabc3d9-ea71-4bc0-b367-59c80e4d0189
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=a95e066f-d003-4b66-9483-dfef371f2d90, name=sdad
Room created successfully: id=a95e066f-d003-4b66-9483-dfef371f2d90
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=cc611b79-f675-4a13-9242-f867e9a4f638, name=fddf
Room created successfully: id=cc611b79-f675-4a13-9242-f867e9a4f638
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=488c6c3f-e139-46ab-83a3-a145a0b8aff8, name=bvcd
Room created successfully: id=488c6c3f-e139-46ab-83a3-a145a0b8aff8
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=dd580d8e-6fc1-4a7c-8191-d0cb792f5be2, name=dvc
Room created successfully: id=dd580d8e-6fc1-4a7c-8191-d0cb792f5be2
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=ca816073-e792-4b61-b27f-3ee86bd6d0e2, name=sdaasd
Room created successfully: id=ca816073-e792-4b61-b27f-3ee86bd6d0e2
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=19d725da-198a-42a7-ac7a-ea7975dacfd7, name=trr
Room created successfully: id=19d725da-198a-42a7-ac7a-ea7975dacfd7
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 15
Room manager cleanup thread started
Main room_manager instance id: 2253793954176
Initial rooms: {'d9ea5a9e-9a11-4a6c-9129-8eb7c246b208': <src.models.room.Room object at 0x0000020CC096BE90>, 'd27a0a90-fd1a-44fb-88bb-64fb63738000': <src.models.room.Room object at 0x0000020CC0998260>, 'fd4aa916-a03c-4695-8464-f51e07bb5e69': <src.models.room.Room object at 0x0000020CC09988F0>, '864a9aa4-623a-412f-9af2-5988a722f10f': <src.models.room.Room object at 0x0000020CC0998FE0>, '81b31d1c-41cb-4381-bd45-78cb356006aa': <src.models.room.Room object at 0x0000020CC0999610>, '699dd4e3-cc43-4de5-8a97-6dcb71018cc3': <src.models.room.Room object at 0x0000020CC0999D00>, 'aede2b3a-9f98-4d3c-9a99-11c7b5e48931': <src.models.room.Room object at 0x0000020CC099A390>, 'f5fa56a2-3e76-465d-8a28-c679382012ec': <src.models.room.Room object at 0x0000020CC099AA20>, '4cabc3d9-ea71-4bc0-b367-59c80e4d0189': <src.models.room.Room object at 0x0000020CC099AAB0>, 'a95e066f-d003-4b66-9483-dfef371f2d90': <src.models.room.Room object at 0x0000020CC099AC60>, 'cc611b79-f675-4a13-9242-f867e9a4f638': <src.models.room.Room object at 0x0000020CC099AE10>, '488c6c3f-e139-46ab-83a3-a145a0b8aff8': <src.models.room.Room object at 0x0000020CC099AFC0>, 'dd580d8e-6fc1-4a7c-8191-d0cb792f5be2': <src.models.room.Room object at 0x0000020CC099B170>, 'ca816073-e792-4b61-b27f-3ee86bd6d0e2': <src.models.room.Room object at 0x0000020CC099B320>, '19d725da-198a-42a7-ac7a-ea7975dacfd7': <src.models.room.Room object at 0x0000020CC099B4D0>}
Application starting...
Rooms at startup: {'d9ea5a9e-9a11-4a6c-9129-8eb7c246b208': <src.models.room.Room object at 0x0000020CC096BE90>, 'd27a0a90-fd1a-44fb-88bb-64fb63738000': <src.models.room.Room object at 0x0000020CC0998260>, 'fd4aa916-a03c-4695-8464-f51e07bb5e69': <src.models.room.Room object at 0x0000020CC09988F0>, '864a9aa4-623a-412f-9af2-5988a722f10f': <src.models.room.Room object at 0x0000020CC0998FE0>, '81b31d1c-41cb-4381-bd45-78cb356006aa': <src.models.room.Room object at 0x0000020CC0999610>, '699dd4e3-cc43-4de5-8a97-6dcb71018cc3': <src.models.room.Room object at 0x0000020CC0999D00>, 'aede2b3a-9f98-4d3c-9a99-11c7b5e48931': <src.models.room.Room object at 0x0000020CC099A390>, 'f5fa56a2-3e76-465d-8a28-c679382012ec': <src.models.room.Room object at 0x0000020CC099AA20>, '4cabc3d9-ea71-4bc0-b367-59c80e4d0189': <src.models.room.Room object at 0x0000020CC099AAB0>, 'a95e066f-d003-4b66-9483-dfef371f2d90': <src.models.room.Room object at 0x0000020CC099AC60>, 'cc611b79-f675-4a13-9242-f867e9a4f638': <src.models.room.Room object at 0x0000020CC099AE10>, '488c6c3f-e139-46ab-83a3-a145a0b8aff8': <src.models.room.Room object at 0x0000020CC099AFC0>, 'dd580d8e-6fc1-4a7c-8191-d0cb792f5be2': <src.models.room.Room object at 0x0000020CC099B170>, 'ca816073-e792-4b61-b27f-3ee86bd6d0e2': <src.models.room.Room object at 0x0000020CC099B320>, '19d725da-198a-42a7-ac7a-ea7975dacfd7': <src.models.room.Room object at 0x0000020CC099B4D0>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-29 18:04:02.906615
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
Room state saved successfully. Rooms: 15
INFO:     127.0.0.1:51783 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51783 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51783 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51783 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51795 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51795 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51795 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51795 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51786 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='sd' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=sd, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2253793954176
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=21f2b73e-ebe0-40a2-94d8-72888bf5200b, name=sd
Room created successfully: id=21f2b73e-ebe0-40a2-94d8-72888bf5200b
已创建房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b，房主: hq，当前房间总数: 16
Room state saved successfully. Rooms: 16
房间创建成功, 房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
创建房间成功: {'id': '21f2b73e-ebe0-40a2-94d8-72888bf5200b', 'name': 'sd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:51787 - "POST /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51787 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='hq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
尝试将用户 hq 添加到房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 21f2b73e-ebe0-40a2-94d8-72888bf5200b with no seat assigned
成功: 用户 hq 已加入房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:51786 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='hq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51786 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='hq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51786 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTMyMn0.ZguL7vTuNYiEgt_SFczZwqUIDtxDdtP5p2x0NtBhulI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: N6LXCKYbPV0s2Y9jIT2VNQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51825) - "WebSocket /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTMyMn0.ZguL7vTuNYiEgt_SFczZwqUIDtxDdtP5p2x0NtBhulI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WfxP9m4ym51a4EUS+AJOSmX68tU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:08:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...ame":"hq","chips":0}]}}' [254 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921332.5005367}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTMyMn0.ZguL7vTuNYiEgt_SFczZwqUIDtxDdtP5p2x0NtBhulI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: g1JAecv61wcWZcCuGn7YQw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51828) - "WebSocket /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTMyMn0.ZguL7vTuNYiEgt_SFczZwqUIDtxDdtP5p2x0NtBhulI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: /LCg3rLKaO3Yv8/Qv4+6faVz4tQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:08:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...ame":"hq","chips":0}]}}' [254 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921332.5512927}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...f5200b","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745921332.8507566}}' [476 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745921333.677698}}' [506 bytes]
Client hq connected
Added hq to room 21f2b73e-ebe0-40a2-94d8-72888bf5200b
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
======= room_update 房间状态变化 =======
房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
操作类型: sit_down
操作玩家: hq
操作结果: {'success': True, 'message': '入座成功'}
玩家列表: ['hq']
玩家位置详情: [('hq', 1)]
最大玩家数: 8
游戏阶段: waiting
============================
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
======= room_update 房间状态变化 =======
房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
操作类型: buy_in
操作玩家: hq
操作结果: {'success': True, 'message': '买入成功，总筹码: 111.0'}
玩家列表: ['hq']
玩家位置详情: [('hq', 1)]
最大玩家数: 8
游戏阶段: waiting
============================
INFO:     127.0.0.1:51800 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51800 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51800 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='qq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
尝试将用户 qq 添加到房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 21f2b73e-ebe0-40a2-94d8-72888bf5200b with no seat assigned
成功: 用户 qq 已加入房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:51803 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='qq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51803 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='21f2b73e-ebe0-40a2-94d8-72888bf5200b' username='qq'
成功找到房间: 21f2b73e-ebe0-40a2-94d8-72888bf5200b, 名称: sd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51803 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTMyM30.UBVj7Ry1pRtQ4lX5q0FavCiLoiqbAJhUQ1ohxDpLYdU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: eiXa2p+sHPVdxamvVDXbhA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51846) - "WebSocket /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTMyM30.UBVj7Ry1pRtQ4lX5q0FavCiLoiqbAJhUQ1ohxDpLYdU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Kjl+LJ8V7sAXKcyfSJv848ZTYik=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:08:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...ame":"qq","chips":0}]}}' [295 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745921337.978945}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745921337.978945}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTMyM30.UBVj7Ry1pRtQ4lX5q0FavCiLoiqbAJhUQ1ohxDpLYdU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: q8Qjwwcm61BSMbBsnBc9XQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51848) - "WebSocket /ws/game/21f2b73e-ebe0-40a2-94d8-72888bf5200b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTMyM30.UBVj7Ry1pRtQ4lX5q0FavCiLoiqbAJhUQ1ohxDpLYdU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KdzzcpcWr71iZN3qhWpMVhrad8I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:08:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...ame":"qq","chips":0}]}}' [295 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745921338.002077}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745921338.002077}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...f5200b","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745921338.425334}}' [516 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745921338.425334}}' [516 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745921339.3860297}}' [548 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745921339.3860297}}' [548 bytes]
Traceback (most recent call last):
  File "D:\c32poker\src\managers\room_manager.py", line 179, in save_state
    os.rename(STATE_FILE, backup_file)
PermissionError: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'rooms_state.pickle' -> 'rooms_state.pickle.bak'
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...0a2-94d8-72888bf5200b"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745921348.324266}}' [1449 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745921348.324266}}' [1449 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...update for this room"}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...update for this room"}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"d","display":"7d"}]}}' [1385 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"c","display":"2c"}]}}' [1385 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 6d 27 d5 [binary, 4 bytes]
DEBUG:    < PONG 5a 6d 27 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 f8 33 b8 [binary, 4 bytes]
DEBUG:    < PONG b4 f8 33 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...-29T19:09:08.324266"}}}' [1483 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...-29T19:09:08.324266"}}}' [1483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"c","display":"8c"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"c","display":"2c"}]}}' [1433 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 31 1c f9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 48 6d 41 [binary, 4 bytes]
DEBUG:    < PONG 16 31 1c f9 [binary, 4 bytes]
DEBUG:    < PONG c7 48 6d 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921362.5660374}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921368.0489936}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 6e ec 37 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 ae 53 98 [binary, 4 bytes]
DEBUG:    < PONG e8 ae 53 98 [binary, 4 bytes]
DEBUG:    < PONG 6b 6e ec 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 d7 11 8b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 e8 f9 72 [binary, 4 bytes]
DEBUG:    < PONG 90 d7 11 8b [binary, 4 bytes]
DEBUG:    < PONG 06 e8 f9 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...ayer changed: 1 -> 7"}}' [1356 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...ayer changed: 1 -> 7"}}' [1356 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"h","display":"6h"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"21f2b73...:"h","display":"2h"}]}}' [1368 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a d8 60 40 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 5a d3 6b [binary, 4 bytes]
DEBUG:    < PONG 3a d8 60 40 [binary, 4 bytes]
DEBUG:    < PONG 9a 5a d3 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921392.5645533}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'd(?q' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 43 99 7b [binary, 4 bytes]
DEBUG:    < PONG 'd(?q' [text, 4 bytes]
DEBUG:    < PONG ed 43 99 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921398.0490608}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x05\ubff7' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'i!h\x07' [text, 4 bytes]
DEBUG:    < PONG '\x05\ubff7' [text, 4 bytes]
DEBUG:    < PONG 'i!h\x07' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 ff c5 34 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc e9 94 e4 [binary, 4 bytes]
DEBUG:    < PONG 13 ff c5 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG cc e9 94 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921422.5620072}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921428.8313706}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '3\u06a0&' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 9e 61 6d [binary, 4 bytes]
DEBUG:    < PONG '3\u06a0&' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 05 9e 61 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 f5 a8 18 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 f4 67 cb [binary, 4 bytes]
DEBUG:    < PONG 81 f5 a8 18 [binary, 4 bytes]
DEBUG:    < PONG 81 f4 67 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 ca 60 e7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 70 9b 9b [binary, 4 bytes]
DEBUG:    < PONG 22 ca 60 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 0c 70 9b 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921452.5617871}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b fb c0 d3 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 59 fb 61 [binary, 4 bytes]
DEBUG:    < PONG 7b fb c0 d3 [binary, 4 bytes]
DEBUG:    < PONG 27 59 fb 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921458.829738}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 70 bd 50 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 33 77 b0 [binary, 4 bytes]
DEBUG:    < PONG 53 70 bd 50 [binary, 4 bytes]
DEBUG:    < PONG bf 33 77 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12a5\x16' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb d8 be 90 [binary, 4 bytes]
DEBUG:    < PONG '\x12a5\x16' [text, 4 bytes]
DEBUG:    < PONG bb d8 be 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921482.561659}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 25 d6 3e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a f7 99 bd [binary, 4 bytes]
DEBUG:    < PONG 93 25 d6 3e [binary, 4 bytes]
DEBUG:    < PONG 5a f7 99 bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e e2 74 b6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 09 3c 64 [binary, 4 bytes]
DEBUG:    < PONG 0e e2 74 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG b3 09 3c 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'n b\x19' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ',Z!n' [text, 4 bytes]
DEBUG:    < PONG 'n b\x19' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ',Z!n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921512.568765}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 eb d5 67 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d 7e 28 d7 [binary, 4 bytes]
DEBUG:    < PONG 33 eb d5 67 [binary, 4 bytes]
DEBUG:    < PONG 4d 7e 28 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 5f 69 94 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 16 3b 3c [binary, 4 bytes]
DEBUG:    < PONG 09 5f 69 94 [binary, 4 bytes]
DEBUG:    < PONG 80 16 3b 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 f2 83 80 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 d0 d5 17 [binary, 4 bytes]
DEBUG:    < PONG f8 f2 83 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 92 d0 d5 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921542.554177}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921545.8318825}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 b6 ea 11 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 ac 1e e0 [binary, 4 bytes]
DEBUG:    < PONG 18 b6 ea 11 [binary, 4 bytes]
DEBUG:    < PONG 81 ac 1e e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 e4 77 54 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 83 28 ea [binary, 4 bytes]
DEBUG:    < PONG d4 e4 77 54 [binary, 4 bytes]
DEBUG:    < PONG 28 83 28 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 60 ec 38 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 dc dc 5c [binary, 4 bytes]
DEBUG:    < PONG 5a 60 ec 38 [binary, 4 bytes]
DEBUG:    < PONG 22 dc dc 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921572.5634432}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 a2 9b ec [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 a9 f9 1b [binary, 4 bytes]
DEBUG:    < PONG 38 a2 9b ec [binary, 4 bytes]
DEBUG:    < PONG 95 a9 f9 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 fe d1 2f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 b2 b7 28 [binary, 4 bytes]
DEBUG:    < PONG a6 fe d1 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 89 b2 b7 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 ec c7 0c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 e5 b6 0c [binary, 4 bytes]
DEBUG:    < PONG 40 e5 b6 0c [binary, 4 bytes]
DEBUG:    < PONG f2 ec c7 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921602.5649633}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921605.8372896}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 1f 62 c8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 7c 18 a7 [binary, 4 bytes]
DEBUG:    < PONG b7 1f 62 c8 [binary, 4 bytes]
DEBUG:    < PONG cd 7c 18 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 6e ca d5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 8d cd ea [binary, 4 bytes]
DEBUG:    < PONG 23 6e ca d5 [binary, 4 bytes]
DEBUG:    < PONG 6a 8d cd ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d 37 f9 4c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 5c 0c e6 [binary, 4 bytes]
DEBUG:    < PONG 2d 37 f9 4c [binary, 4 bytes]
DEBUG:    < PONG a9 5c 0c e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921632.559802}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 83 57 62 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f b5 29 3c [binary, 4 bytes]
DEBUG:    < PONG 0f b5 29 3c [binary, 4 bytes]
DEBUG:    < PONG b9 83 57 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a 77 8e cf [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 51 b8 ca [binary, 4 bytes]
DEBUG:    < PONG 0a 77 8e cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG fb 51 b8 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc ec f6 b6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 3b b6 b5 [binary, 4 bytes]
DEBUG:    < PONG d1 3b b6 b5 [binary, 4 bytes]
DEBUG:    < PONG bc ec f6 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921662.555942}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921665.832426}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d fb cd 10 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 70 f9 bc [binary, 4 bytes]
DEBUG:    < PONG 8d fb cd 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ab 70 f9 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 24 5d 9e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 49 84 21 [binary, 4 bytes]
DEBUG:    < PONG 8f 49 84 21 [binary, 4 bytes]
DEBUG:    < PONG 02 24 5d 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c a9 a1 4e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 13 99 9e [binary, 4 bytes]
DEBUG:    < PONG 1c a9 a1 4e [binary, 4 bytes]
DEBUG:    < PONG 59 13 99 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921692.5534422}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745921692.6534643}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745921692.6634717}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
Client qq connected
Added qq to room 21f2b73e-ebe0-40a2-94d8-72888bf5200b
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
======= room_update 房间状态变化 =======
房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
操作类型: sit_down
操作玩家: qq
操作结果: {'success': True, 'message': '入座成功'}
玩家列表: ['hq', 'qq']
玩家位置详情: [('hq', 1), ('qq', 7)]
最大玩家数: 8
游戏阶段: waiting
============================
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
======= room_update 房间状态变化 =======
房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
操作类型: buy_in
操作玩家: qq
操作结果: {'success': True, 'message': '买入成功，总筹码: 333.0'}
玩家列表: ['hq', 'qq']
玩家位置详情: [('hq', 1), ('qq', 7)]
最大玩家数: 8
游戏阶段: waiting
============================
Checking for expired rooms...
Room d9ea5a9e-9a11-4a6c-9129-8eb7c246b208 has expired after 885.0 minutes of inactivity
Room d9ea5a9e-9a11-4a6c-9129-8eb7c246b208 has been idle for 885.0 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room d27a0a90-fd1a-44fb-88bb-64fb63738000 has expired after 174.4 minutes of inactivity
Room d27a0a90-fd1a-44fb-88bb-64fb63738000 has been idle for 174.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room fd4aa916-a03c-4695-8464-f51e07bb5e69 has expired after 166.4 minutes of inactivity
Room fd4aa916-a03c-4695-8464-f51e07bb5e69 has been idle for 166.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 864a9aa4-623a-412f-9af2-5988a722f10f has expired after 160.4 minutes of inactivity
Room 864a9aa4-623a-412f-9af2-5988a722f10f has been idle for 160.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 81b31d1c-41cb-4381-bd45-78cb356006aa has expired after 158.3 minutes of inactivity
Room 81b31d1c-41cb-4381-bd45-78cb356006aa has been idle for 158.3 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 699dd4e3-cc43-4de5-8a97-6dcb71018cc3 has expired after 156.3 minutes of inactivity
Room 699dd4e3-cc43-4de5-8a97-6dcb71018cc3 has been idle for 156.3 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room aede2b3a-9f98-4d3c-9a99-11c7b5e48931 has expired after 154.3 minutes of inactivity
Room aede2b3a-9f98-4d3c-9a99-11c7b5e48931 has been idle for 154.3 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room f5fa56a2-3e76-465d-8a28-c679382012ec has expired after 120.8 minutes of inactivity
Room f5fa56a2-3e76-465d-8a28-c679382012ec has been idle for 120.8 minutes and will be removed
Room 4cabc3d9-ea71-4bc0-b367-59c80e4d0189 has expired after 120.7 minutes of inactivity
Room 4cabc3d9-ea71-4bc0-b367-59c80e4d0189 has been idle for 120.7 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room a95e066f-d003-4b66-9483-dfef371f2d90 has expired after 110.8 minutes of inactivity
Room a95e066f-d003-4b66-9483-dfef371f2d90 has been idle for 110.8 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room cc611b79-f675-4a13-9242-f867e9a4f638 has expired after 99.4 minutes of inactivity
Room cc611b79-f675-4a13-9242-f867e9a4f638 has been idle for 99.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 488c6c3f-e139-46ab-83a3-a145a0b8aff8 has expired after 81.2 minutes of inactivity
Room 488c6c3f-e139-46ab-83a3-a145a0b8aff8 has been idle for 81.2 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room dd580d8e-6fc1-4a7c-8191-d0cb792f5be2 has expired after 65.4 minutes of inactivity
Room dd580d8e-6fc1-4a7c-8191-d0cb792f5be2 has been idle for 65.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room ca816073-e792-4b61-b27f-3ee86bd6d0e2 has expired after 53.1 minutes of inactivity
Room ca816073-e792-4b61-b27f-3ee86bd6d0e2 has been idle for 53.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: d9ea5a9e-9a11-4a6c-9129-8eb7c246b208
已删除房间 d9ea5a9e-9a11-4a6c-9129-8eb7c246b208，当前房间总数: 15
Room state saved successfully. Rooms: 15
Removing expired room: d27a0a90-fd1a-44fb-88bb-64fb63738000
已删除房间 d27a0a90-fd1a-44fb-88bb-64fb63738000，当前房间总数: 14
Room state saved successfully. Rooms: 14
Removing expired room: fd4aa916-a03c-4695-8464-f51e07bb5e69
已删除房间 fd4aa916-a03c-4695-8464-f51e07bb5e69，当前房间总数: 13
Room state saved successfully. Rooms: 13
Removing expired room: 864a9aa4-623a-412f-9af2-5988a722f10f
已删除房间 864a9aa4-623a-412f-9af2-5988a722f10f，当前房间总数: 12
Room state saved successfully. Rooms: 12
Removing expired room: 81b31d1c-41cb-4381-bd45-78cb356006aa
已删除房间 81b31d1c-41cb-4381-bd45-78cb356006aa，当前房间总数: 11
Room state saved successfully. Rooms: 11
Removing expired room: 699dd4e3-cc43-4de5-8a97-6dcb71018cc3
已删除房间 699dd4e3-cc43-4de5-8a97-6dcb71018cc3，当前房间总数: 10
Error saving room state: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'rooms_state.pickle' -> 'rooms_state.pickle.bak'
Room state saved successfully. Rooms: 10
Removing expired room: aede2b3a-9f98-4d3c-9a99-11c7b5e48931
已删除房间 aede2b3a-9f98-4d3c-9a99-11c7b5e48931，当前房间总数: 9
Room state saved successfully. Rooms: 9
Removing expired room: f5fa56a2-3e76-465d-8a28-c679382012ec
已删除房间 f5fa56a2-3e76-465d-8a28-c679382012ec，当前房间总数: 8
Room state saved successfully. Rooms: 8
Removing expired room: 4cabc3d9-ea71-4bc0-b367-59c80e4d0189
已删除房间 4cabc3d9-ea71-4bc0-b367-59c80e4d0189，当前房间总数: 7
Room state saved successfully. Rooms: 7
Removing expired room: a95e066f-d003-4b66-9483-dfef371f2d90
已删除房间 a95e066f-d003-4b66-9483-dfef371f2d90，当前房间总数: 6
Room state saved successfully. Rooms: 6
Removing expired room: cc611b79-f675-4a13-9242-f867e9a4f638
已删除房间 cc611b79-f675-4a13-9242-f867e9a4f638，当前房间总数: 5
Room state saved successfully. Rooms: 5
Removing expired room: 488c6c3f-e139-46ab-83a3-a145a0b8aff8
已删除房间 488c6c3f-e139-46ab-83a3-a145a0b8aff8，当前房间总数: 4
Room state saved successfully. Rooms: 4
Removing expired room: dd580d8e-6fc1-4a7c-8191-d0cb792f5be2
已删除房间 dd580d8e-6fc1-4a7c-8191-d0cb792f5be2，当前房间总数: 3
Room state saved successfully. Rooms: 3
Removing expired room: ca816073-e792-4b61-b27f-3ee86bd6d0e2
已删除房间 ca816073-e792-4b61-b27f-3ee86bd6d0e2，当前房间总数: 2
Room state saved successfully. Rooms: 2
Removed 14 expired rooms. Remaining rooms: 2
Room state saved successfully. Rooms: 2
Starting game in room 21f2b73e-ebe0-40a2-94d8-72888bf5200b
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 8c, Ks, 7d
Dealt cards to player position 7: 4h, 2c, 4d

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745921348.324266
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-29 19:09:08.324266
======= room_update 房间状态变化 =======
房间ID: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
操作类型: start_game
操作玩家: hq
操作结果: {'success': True, 'message': '游戏开始'}
玩家列表: []
玩家位置详情: []
最大玩家数: 8
游戏阶段: playing
============================
[BROADCAST] Room 21f2b73e-ebe0-40a2-94d8-72888bf5200b: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '7', 'suit': 'd', 'display': '7d'}
Room state saved successfully. Rooms: 2
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 6h, 10c, Jh
Dealt cards to player position 7: 3c, 6c, 2h

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[BROADCAST] Room 21f2b73e-ebe0-40a2-94d8-72888bf5200b: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 2
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
Room 19d725da-198a-42a7-ac7a-ea7975dacfd7 will expire in 2.3 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Notified 1 rooms about upcoming expiration. Remaining rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 21f2b73e-ebe0-40a2-94d8-72888bf5200b
WebSocket disconnected for client: hq
INFO:     127.0.0.1:52590 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:52590 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921693.7261944}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 21f2b73e-ebe0-40a2-94d8-72888bf5200b
WebSocket disconnected for client: qq
INFO:     127.0.0.1:52611 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:52611 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:52594 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52594 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:52611 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:52611 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 2

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='asd1' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=asd1, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2253793954176
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=84d9c706-e6c7-4105-9b67-ad5f05fd8e18, name=asd1
Room created successfully: id=84d9c706-e6c7-4105-9b67-ad5f05fd8e18
已创建房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18，房主: hq，当前房间总数: 3
Room state saved successfully. Rooms: 3
房间创建成功, 房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
创建房间成功: {'id': '84d9c706-e6c7-4105-9b67-ad5f05fd8e18', 'name': 'asd1', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:52594 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='hq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
尝试将用户 hq 添加到房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18 with no seat assigned
成功: 用户 hq 已加入房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:52594 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='hq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52594 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='hq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52594 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 1cbhReBTqZWDtumuW6ZicQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52638) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7cX/Arhexaun+vqbH8uXHGLr4ms=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:15:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4165 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921703.7945762}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KQc8MBAjRgkKU5DK0lln2A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52640) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: RlaQVU6h4oOMFW9L+MIEFgi/0dQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:15:03 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921703.8356519}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...fd8e18","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745921704.663443}}' [477 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745921705.6261458}}' [509 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
======= room_update 房间状态变化 =======
房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
操作类型: sit_down
操作玩家: hq
操作结果: {'success': True, 'message': '入座成功'}
玩家列表: ['hq']
玩家位置详情: [('hq', 1)]
最大玩家数: 8
游戏阶段: waiting
============================
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
======= room_update 房间状态变化 =======
房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
操作类型: buy_in
操作玩家: hq
操作结果: {'success': True, 'message': '买入成功，总筹码: 111.0'}
玩家列表: ['hq']
玩家位置详情: [('hq', 1)]
最大玩家数: 8
游戏阶段: waiting
============================
INFO:     127.0.0.1:52614 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='qq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
尝试将用户 qq 添加到房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18 with no seat assigned
成功: 用户 qq 已加入房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:52614 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='qq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52614 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='84d9c706-e6c7-4105-9b67-ad5f05fd8e18' username='qq'
成功找到房间: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18, 名称: asd1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52614 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: q3ZdUTVLNjux09dR/qxxAA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52655) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: M1dcVsCmgYZN1cifgyd2+L3Qnag=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:15:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4163 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921708.9446216}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921708.9446216}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 2xhMTOdqz5StIouHscb5fg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52657) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: wl+MggX0vJ4H6okZJlTYdkOYlMM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:15:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921708.9878037}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745921708.9878037}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...fd8e18","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745921709.3057876}}' [519 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745921709.3057876}}' [519 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745921710.262216}}' [549 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745921710.262216}}' [549 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 fa cb 29 [binary, 4 bytes]
DEBUG:    < PONG 13 fa cb 29 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 78 e8 32 [binary, 4 bytes]
DEBUG:    < PONG d2 78 e8 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 13 d0 59 [binary, 4 bytes]
DEBUG:    < PONG f0 13 d0 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c b0 8d 59 [binary, 4 bytes]
DEBUG:    < PONG 0c b0 8d 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...105-9b67-ad5f05fd8e18"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745921732.4057064}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745921732.4057064}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...update for this room"}}' [1372 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...update for this room"}}' [1372 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"c","display":"6c"}]}}' [1389 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"h","display":"5h"}]}}' [1387 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921733.839042}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921739.1002169}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 8a 06 05 [binary, 4 bytes]
DEBUG:    < PONG 68 8a 06 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 e8 70 89 [binary, 4 bytes]
DEBUG:    < PONG 21 e8 70 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...-29T19:15:32.405706"}}}' [1486 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...-29T19:15:32.405706"}}}' [1486 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"c","display":"6c"}]}}' [1438 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"c","display":"Ac"}]}}' [1397 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 fa b7 e5 [binary, 4 bytes]
DEBUG:    < PONG 89 fa b7 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df c1 2c ec [binary, 4 bytes]
DEBUG:    < PONG df c1 2c ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 63 7c c0 [binary, 4 bytes]
DEBUG:    < PONG 8d 63 7c c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921763.8375256}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 24 5a 52 [binary, 4 bytes]
DEBUG:    < PONG df 24 5a 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...ayer changed: 7 -> 1"}}' [1360 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"game_state":{"ro...ayer changed: 7 -> 1"}}' [1360 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"h","display":"6h"}]}}' [1374 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"d","display":"2d"}]}}' [1374 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 18 39 1a [binary, 4 bytes]
DEBUG:    < PONG f8 18 39 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 e0 5c 6b [binary, 4 bytes]
DEBUG:    < PONG e5 e0 5c 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921769.0144303}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 53 80 89 [binary, 4 bytes]
DEBUG:    < PONG 50 53 80 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d fd 25 f8 [binary, 4 bytes]
DEBUG:    < PONG 7d fd 25 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '3Uzk' [text, 4 bytes]
DEBUG:    < PONG '3Uzk' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 58 aa 27 [binary, 4 bytes]
DEBUG:    < PONG ec 58 aa 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921793.8476386}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921799.0073898}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 0f d7 4f [binary, 4 bytes]
DEBUG:    < PONG a9 0f d7 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 2e e2 0c [binary, 4 bytes]
DEBUG:    < PONG 2c 2e e2 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 6f 49 90 [binary, 4 bytes]
DEBUG:    < PONG 46 6f 49 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 04 2a 18 [binary, 4 bytes]
DEBUG:    < PONG db 04 2a 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 b1 76 8d [binary, 4 bytes]
DEBUG:    < PONG 56 b1 76 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921823.8466895}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce c9 fe b2 [binary, 4 bytes]
DEBUG:    < PONG ce c9 fe b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 ad 35 48 [binary, 4 bytes]
DEBUG:    < PONG 60 ad 35 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u04dbK_' [text, 4 bytes]
DEBUG:    < PONG '\u04dbK_' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921829.8316665}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 24 34 9c [binary, 4 bytes]
DEBUG:    < PONG ac 24 34 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 54 8c 53 [binary, 4 bytes]
DEBUG:    < PONG c7 54 8c 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 e5 7e 55 [binary, 4 bytes]
DEBUG:    < PONG 30 e5 7e 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 8b dc 7c [binary, 4 bytes]
DEBUG:    < PONG 14 8b dc 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921853.8418357}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921859.8320868}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 b5 07 64 [binary, 4 bytes]
DEBUG:    < PONG 63 b5 07 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 33 ac e1 [binary, 4 bytes]
DEBUG:    < PONG 18 33 ac e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 a1 cb 38 [binary, 4 bytes]
DEBUG:    < PONG 36 a1 cb 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 a9 64 e0 [binary, 4 bytes]
DEBUG:    < PONG c5 a9 64 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 24 d2 fc [binary, 4 bytes]
DEBUG:    < PONG 6e 24 d2 fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921883.8464305}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x10v\u017f' [text, 4 bytes]
DEBUG:    < PONG '\x10v\u017f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 5c f5 5a [binary, 4 bytes]
DEBUG:    < PONG 80 5c f5 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 78 a5 b1 [binary, 4 bytes]
DEBUG:    < PONG 28 78 a5 b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 3a 78 fe [binary, 4 bytes]
DEBUG:    < PONG bd 3a 78 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 ad 67 9a [binary, 4 bytes]
DEBUG:    < PONG 48 ad 67 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921905.8313787}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 99 4c e3 [binary, 4 bytes]
DEBUG:    < PONG fb 99 4c e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c b5 f6 6f [binary, 4 bytes]
DEBUG:    < PONG 7c b5 f6 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921913.846883}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce f9 ab bc [binary, 4 bytes]
DEBUG:    < PONG ce f9 ab bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 ab 7a 56 [binary, 4 bytes]
DEBUG:    < PONG 10 ab 7a 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 1b f7 f0 [binary, 4 bytes]
DEBUG:    < PONG 06 1b f7 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1e^\x01a' [text, 4 bytes]
DEBUG:    < PONG '\x1e^\x01a' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 ae e2 41 [binary, 4 bytes]
DEBUG:    < PONG e2 ae e2 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921943.8458195}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 4d 7c 46 [binary, 4 bytes]
DEBUG:    < PONG 88 4d 7c 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 56 e4 48 [binary, 4 bytes]
DEBUG:    < PONG 21 56 e4 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 69 36 0a [binary, 4 bytes]
DEBUG:    < PONG a8 69 36 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a f6 56 89 [binary, 4 bytes]
DEBUG:    < PONG 5a f6 56 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 68 72 84 [binary, 4 bytes]
DEBUG:    < PONG cb 68 72 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921965.829451}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 3e 3d ef [binary, 4 bytes]
DEBUG:    < PONG 2f 3e 3d ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 33 f4 36 [binary, 4 bytes]
DEBUG:    < PONG f3 33 f4 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745921973.83927}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 de fb ce [binary, 4 bytes]
DEBUG:    < PONG 46 de fb ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 18 a8 fc [binary, 4 bytes]
DEBUG:    < PONG 23 18 a8 fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 aa 4e 39 [binary, 4 bytes]
DEBUG:    < PONG 80 aa 4e 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 47 9c 62 [binary, 4 bytes]
DEBUG:    < PONG 70 47 9c 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 1d b1 56 [binary, 4 bytes]
DEBUG:    < PONG a1 1d b1 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922003.847592}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 1e 4f d7 [binary, 4 bytes]
DEBUG:    < PONG 25 1e 4f d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 d6 81 47 [binary, 4 bytes]
DEBUG:    < PONG f6 d6 81 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 ba 3b 95 [binary, 4 bytes]
DEBUG:    < PONG e7 ba 3b 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec d8 25 cd [binary, 4 bytes]
DEBUG:    < PONG ec d8 25 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 24 e0 38 [binary, 4 bytes]
DEBUG:    < PONG 47 24 e0 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922025.832005}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d aa 5e 17 [binary, 4 bytes]
DEBUG:    < PONG 3d aa 5e 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 ee ac e2 [binary, 4 bytes]
DEBUG:    < PONG 48 ee ac e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922033.84143}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 15 64 97 [binary, 4 bytes]
DEBUG:    < PONG b3 15 64 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'a\u05c3F' [text, 4 bytes]
DEBUG:    < PONG 'a\u05c3F' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 9c 25 34 [binary, 4 bytes]
DEBUG:    < PONG fb 9c 25 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a fd 29 6b [binary, 4 bytes]
DEBUG:    < PONG 4a fd 29 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 56 e7 e6 [binary, 4 bytes]
DEBUG:    < PONG 02 56 e7 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922063.8451173}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f f5 8a dd [binary, 4 bytes]
DEBUG:    < PONG 5f f5 8a dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x11`\x11\x06' [text, 4 bytes]
DEBUG:    < PONG '\x11`\x11\x06' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'j!5\x1f' [text, 4 bytes]
DEBUG:    < PONG 'j!5\x1f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 f9 84 90 [binary, 4 bytes]
DEBUG:    < PONG 30 f9 84 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 05 d2 cd [binary, 4 bytes]
DEBUG:    < PONG 43 05 d2 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922085.8299778}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f fa eb 25 [binary, 4 bytes]
DEBUG:    < PONG 4f fa eb 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 c1 46 88 [binary, 4 bytes]
DEBUG:    < PONG 24 c1 46 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922093.8465989}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 1c b7 c2 [binary, 4 bytes]
DEBUG:    < PONG 41 1c b7 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 3d ca fd [binary, 4 bytes]
DEBUG:    < PONG 48 3d ca fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 2e d3 a4 [binary, 4 bytes]
DEBUG:    < PONG bb 2e d3 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 a7 7c 21 [binary, 4 bytes]
DEBUG:    < PONG 05 a7 7c 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 a1 68 db [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 57 a1 68 db [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922123.8454583}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 64 3a 7c [binary, 4 bytes]
DEBUG:    < PONG dc 64 3a 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 bd eb 1b [binary, 4 bytes]
DEBUG:    < PONG 33 bd eb 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 78 0f 01 [binary, 4 bytes]
DEBUG:    < PONG 9c 78 0f 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x17\x7fR-' [text, 4 bytes]
DEBUG:    < PONG '\x17\x7fR-' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a f1 dc 3e [binary, 4 bytes]
DEBUG:    < PONG 2a f1 dc 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922145.8298733}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 7e 1b de [binary, 4 bytes]
DEBUG:    < PONG 8b 7e 1b de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0bCO<' [text, 4 bytes]
DEBUG:    < PONG '\x0bCO<' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922153.847235}' [45 bytes]
WARNING:  StatReload detected changes in 'src\main.py'. Reloading...
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Gi\u0778' [text, 4 bytes]
DEBUG:    < PONG 'Gi\u0778' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'mkR:' [text, 4 bytes]
DEBUG:    < PONG 'mkR:' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 a3 74 15 [binary, 4 bytes]
DEBUG:    < PONG e9 a3 74 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 45 64 56 [binary, 4 bytes]
DEBUG:    < PONG b3 45 64 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     Shutting down
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 73 32 33 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922183.8430715}' [46 bytes]
DEBUG:    < PONG c7 73 32 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 73 13 a9 [binary, 4 bytes]
DEBUG:    < PONG f0 73 13 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb c7 52 9f [binary, 4 bytes]
DEBUG:    < PONG fb c7 52 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 f9 86 1b [binary, 4 bytes]
DEBUG:    < PONG 33 f9 86 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 33 d9 a7 [binary, 4 bytes]
DEBUG:    < PONG af 33 d9 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 ab 3d c8 [binary, 4 bytes]
DEBUG:    < PONG 52 ab 3d c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922205.8298733}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 9a f3 ee [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 82 46 c1 [binary, 4 bytes]
DEBUG:    < PONG 4a 9a f3 ee [binary, 4 bytes]
DEBUG:    < PONG 24 82 46 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922213.8468366}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 b6 bc 24 [binary, 4 bytes]
DEBUG:    < PONG 80 b6 bc 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 2c d7 44 [binary, 4 bytes]
DEBUG:    < PONG 9d 2c d7 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 d2 4d 8e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 8e 8a 32 [binary, 4 bytes]
DEBUG:    < PONG d4 d2 4d 8e [binary, 4 bytes]
DEBUG:    < PONG 59 8e 8a 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922243.847232}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 45 4e e7 [binary, 4 bytes]
DEBUG:    < PONG 41 45 4e e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd d6 ed 92 [binary, 4 bytes]
DEBUG:    < PONG bd d6 ed 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 a3 55 40 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c db bb e9 [binary, 4 bytes]
DEBUG:    < PONG 33 a3 55 40 [binary, 4 bytes]
DEBUG:    < PONG 1c db bb e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 85 a8 8a [binary, 4 bytes]
DEBUG:    < PONG 3c 85 a8 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f ea 5e af [binary, 4 bytes]
DEBUG:    < PONG 6f ea 5e af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922265.8288627}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 cf 85 84 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e 4d 75 ff [binary, 4 bytes]
DEBUG:    < PONG b3 cf 85 84 [binary, 4 bytes]
DEBUG:    < PONG 8e 4d 75 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922273.8463736}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 71 34 6b [binary, 4 bytes]
DEBUG:    < PONG b7 71 34 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'S77*' [text, 4 bytes]
DEBUG:    < PONG 'S77*' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 a9 2d 93 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 02 2f 5d [binary, 4 bytes]
DEBUG:    < PONG c2 a9 2d 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG a8 02 2f 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922303.8470783}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5c bf cf 20 [binary, 4 bytes]
DEBUG:    < PONG 5c bf cf 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ' \u01f9\x12' [text, 4 bytes]
DEBUG:    < PONG ' \u01f9\x12' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 df 13 70 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 45 b6 01 [binary, 4 bytes]
DEBUG:    < PONG 84 df 13 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 4e 45 b6 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 81 91 7b [binary, 4 bytes]
DEBUG:    < PONG 61 81 91 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f 4a a7 f4 [binary, 4 bytes]
DEBUG:    < PONG 4f 4a a7 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922325.835188}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 f2 6d 0d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 05 cf 35 [binary, 4 bytes]
DEBUG:    < PONG 41 f2 6d 0d [binary, 4 bytes]
DEBUG:    < PONG 90 05 cf 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922333.8463933}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 85 41 66 [binary, 4 bytes]
DEBUG:    < PONG 55 85 41 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'TZ\x0c;' [text, 4 bytes]
DEBUG:    < PONG 'TZ\x0c;' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 2d 54 a0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 3b b0 a9 [binary, 4 bytes]
DEBUG:    < PONG 91 2d 54 a0 [binary, 4 bytes]
DEBUG:    < PONG 3e 3b b0 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922363.8469543}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f a6 de 68 [binary, 4 bytes]
DEBUG:    < PONG 6f a6 de 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 4f e7 f5 [binary, 4 bytes]
DEBUG:    < PONG 64 4f e7 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 10 54 98 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 a8 87 a0 [binary, 4 bytes]
DEBUG:    < PONG e4 10 54 98 [binary, 4 bytes]
DEBUG:    < PONG 73 a8 87 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 4a c7 94 [binary, 4 bytes]
DEBUG:    < PONG c9 4a c7 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 d6 53 a5 [binary, 4 bytes]
DEBUG:    < PONG 25 d6 53 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922385.830532}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 ce 17 7e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'X`vt' [text, 4 bytes]
DEBUG:    < PONG a2 ce 17 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 'X`vt' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922393.8474836}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\t\x137O' [text, 4 bytes]
DEBUG:    < PONG '\t\x137O' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 46 43 d3 [binary, 4 bytes]
DEBUG:    < PONG cb 46 43 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 14 75 9f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 c8 65 ae [binary, 4 bytes]
DEBUG:    < PONG 07 c8 65 ae [binary, 4 bytes]
DEBUG:    < PONG e8 14 75 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922423.8389006}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b a5 cd 65 [binary, 4 bytes]
DEBUG:    < PONG 9b a5 cd 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'sPw\x05' [text, 4 bytes]
DEBUG:    < PONG 'sPw\x05' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 0f 2a bc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 5d 35 e4 [binary, 4 bytes]
DEBUG:    < PONG f9 0f 2a bc [binary, 4 bytes]
DEBUG:    < PONG 7b 5d 35 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 78 0e bf [binary, 4 bytes]
DEBUG:    < PONG 50 78 0e bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 84 ee ef [binary, 4 bytes]
DEBUG:    < PONG e2 84 ee ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922445.8315187}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 12 43 44 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 81 80 24 [binary, 4 bytes]
DEBUG:    < PONG c0 12 43 44 [binary, 4 bytes]
DEBUG:    < PONG bc 81 80 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922453.84319}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 3f 90 3c [binary, 4 bytes]
DEBUG:    < PONG ff 3f 90 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 96 cc b3 [binary, 4 bytes]
DEBUG:    < PONG a4 96 cc b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 c7 de aa [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 ef 07 52 [binary, 4 bytes]
DEBUG:    < PONG c6 ef 07 52 [binary, 4 bytes]
DEBUG:    < PONG 56 c7 de aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922483.8402636}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 81 ce 2d [binary, 4 bytes]
DEBUG:    < PONG 86 81 ce 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 1c 38 d0 [binary, 4 bytes]
DEBUG:    < PONG a7 1c 38 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 ff 99 14 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 6d 3e e3 [binary, 4 bytes]
DEBUG:    < PONG c2 ff 99 14 [binary, 4 bytes]
DEBUG:    < PONG 33 6d 3e e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 18 ba c5 [binary, 4 bytes]
DEBUG:    < PONG 9b 18 ba c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 48 58 00 [binary, 4 bytes]
DEBUG:    < PONG 82 48 58 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922505.831006}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 21 12 ce [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 d1 58 5b [binary, 4 bytes]
DEBUG:    < PONG f7 21 12 ce [binary, 4 bytes]
DEBUG:    < PONG 14 d1 58 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922513.848229}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12SK7' [text, 4 bytes]
DEBUG:    < PONG '\x12SK7' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 a3 62 11 [binary, 4 bytes]
DEBUG:    < PONG 83 a3 62 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ǘ%U' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 72 e8 7c [binary, 4 bytes]
DEBUG:    < PONG 'ǘ%U' [text, 4 bytes]
DEBUG:    < PONG a4 72 e8 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922543.8474963}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 8d 2b 8b [binary, 4 bytes]
DEBUG:    < PONG d3 8d 2b 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 b7 fa 1c [binary, 4 bytes]
DEBUG:    < PONG f1 b7 fa 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ']</n' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 91 04 65 [binary, 4 bytes]
DEBUG:    < PONG ']</n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ea 91 04 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f ae 3c e5 [binary, 4 bytes]
DEBUG:    < PONG 5f ae 3c e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d df 1c 4f [binary, 4 bytes]
DEBUG:    < PONG 5d df 1c 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922565.8290932}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 e4 69 b5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 a2 32 d5 [binary, 4 bytes]
DEBUG:    < PONG 63 e4 69 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG d0 a2 32 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922573.8402462}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'mRt5' [text, 4 bytes]
DEBUG:    < PONG 'mRt5' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 49 31 fa [binary, 4 bytes]
DEBUG:    < PONG 14 49 31 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 79 1b c2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee ba 70 6f [binary, 4 bytes]
DEBUG:    < PONG 9a 79 1b c2 [binary, 4 bytes]
DEBUG:    < PONG ee ba 70 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922603.8421464}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'xY<R' [text, 4 bytes]
DEBUG:    < PONG 'xY<R' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 a5 46 d1 [binary, 4 bytes]
DEBUG:    < PONG 02 a5 46 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 6e d6 0e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 48 3f a6 [binary, 4 bytes]
DEBUG:    < PONG f5 6e d6 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG e4 48 3f a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\\\x03~b' [text, 4 bytes]
DEBUG:    < PONG '\\\x03~b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 2c 80 5b [binary, 4 bytes]
DEBUG:    < PONG 6a 2c 80 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922625.8382635}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 d7 dd a8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 6d 86 97 [binary, 4 bytes]
DEBUG:    < PONG f1 d7 dd a8 [binary, 4 bytes]
DEBUG:    < PONG 96 6d 86 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922633.8408756}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 78 0a bb [binary, 4 bytes]
DEBUG:    < PONG e3 78 0a bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 d4 bb 80 [binary, 4 bytes]
DEBUG:    < PONG c5 d4 bb 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 8b 7e 07 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1e>+\x0f' [text, 4 bytes]
DEBUG:    < PONG b0 8b 7e 07 [binary, 4 bytes]
DEBUG:    < PONG '\x1e>+\x0f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922663.847306}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f 4d 88 ef [binary, 4 bytes]
DEBUG:    < PONG 0f 4d 88 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 c9 0a 14 [binary, 4 bytes]
DEBUG:    < PONG d1 c9 0a 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 e6 27 2f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 06 a1 f3 [binary, 4 bytes]
DEBUG:    < PONG 24 e6 27 2f [binary, 4 bytes]
DEBUG:    < PONG c4 06 a1 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 9b 64 21 [binary, 4 bytes]
DEBUG:    < PONG 72 9b 64 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 0c ad 73 [binary, 4 bytes]
DEBUG:    < PONG da 0c ad 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922685.840946}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 4d 72 b7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd fd ef b6 [binary, 4 bytes]
DEBUG:    < PONG 35 4d 72 b7 [binary, 4 bytes]
DEBUG:    < PONG bd fd ef b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922693.8470643}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 7c 04 6d [binary, 4 bytes]
DEBUG:    < PONG a4 7c 04 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f db ed 60 [binary, 4 bytes]
DEBUG:    < PONG 8f db ed 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 65 df 4b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 48 a3 05 [binary, 4 bytes]
DEBUG:    < PONG 3a 65 df 4b [binary, 4 bytes]
DEBUG:    < PONG 14 48 a3 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922723.841614}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ' q.n' [text, 4 bytes]
DEBUG:    < PONG ' q.n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd bb 16 fd [binary, 4 bytes]
DEBUG:    < PONG dd bb 16 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 a5 be b3 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 57 c5 fe [binary, 4 bytes]
DEBUG:    < PONG 83 a5 be b3 [binary, 4 bytes]
DEBUG:    < PONG d8 57 c5 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 69 0d 2a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e 21 41 0a [binary, 4 bytes]
DEBUG:    < PONG b9 69 0d 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 8e 21 41 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922745.8349862}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 11 48 a2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 35 1f 9c [binary, 4 bytes]
DEBUG:    < PONG c3 11 48 a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 54 35 1f 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922753.8388598}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 ea 23 16 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 22 93 bb [binary, 4 bytes]
DEBUG:    < PONG f5 22 93 bb [binary, 4 bytes]
DEBUG:    < PONG 04 ea 23 16 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 32 16 ff [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a 07 e8 5b [binary, 4 bytes]
DEBUG:    < PONG 2a 32 16 ff [binary, 4 bytes]
DEBUG:    < PONG 0a 07 e8 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922783.847435}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 01 f6 0f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 b5 2a 59 [binary, 4 bytes]
DEBUG:    < PONG e7 01 f6 0f [binary, 4 bytes]
DEBUG:    < PONG 67 b5 2a 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 37 35 d4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 ad 80 e8 [binary, 4 bytes]
DEBUG:    < PONG f5 37 35 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f7 ad 80 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 0b 35 63 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 8c ce 9b [binary, 4 bytes]
DEBUG:    < PONG f7 0b 35 63 [binary, 4 bytes]
DEBUG:    < PONG 82 8c ce 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922805.836159}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f 2c 7d 91 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 65 c1 20 [binary, 4 bytes]
DEBUG:    < PONG 4f 2c 7d 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 9a 65 c1 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922813.843794}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922819.8396237}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 0b 3a 10 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 76 8f 69 [binary, 4 bytes]
DEBUG:    < PONG fa 0b 3a 10 [binary, 4 bytes]
DEBUG:    < PONG 8a 76 8f 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 36 c3 5f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 42 70 e4 [binary, 4 bytes]
DEBUG:    < PONG 3e 36 c3 5f [binary, 4 bytes]
DEBUG:    < PONG 19 42 70 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922843.841934}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 66 59 42 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 66 95 a4 [binary, 4 bytes]
DEBUG:    < PONG fa 66 59 42 [binary, 4 bytes]
DEBUG:    < PONG 24 66 95 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 c6 fb a5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1c\x02и' [text, 4 bytes]
DEBUG:    < PONG b4 c6 fb a5 [binary, 4 bytes]
DEBUG:    < PONG '\x1c\x02и' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922849.8303633}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc dc c0 f2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 a0 3f ca [binary, 4 bytes]
DEBUG:    < PONG fc dc c0 f2 [binary, 4 bytes]
DEBUG:    < PONG 33 a0 3f ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 e5 26 46 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 4f 39 c0 [binary, 4 bytes]
DEBUG:    < PONG 71 e5 26 46 [binary, 4 bytes]
DEBUG:    < PONG dd 4f 39 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922873.8432755}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 c5 66 7a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 84 ba 10 [binary, 4 bytes]
DEBUG:    < PONG f6 c5 66 7a [binary, 4 bytes]
DEBUG:    < PONG 38 84 ba 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 7f 4e 03 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 69 74 5b [binary, 4 bytes]
DEBUG:    < PONG b5 7f 4e 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG dd 69 74 5b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922903.8435853}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 65 27 da [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 fb a3 94 [binary, 4 bytes]
DEBUG:    < PONG 3d 65 27 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 94 fb a3 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 cb 2b cd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 00 d4 13 [binary, 4 bytes]
DEBUG:    < PONG 83 cb 2b cd [binary, 4 bytes]
DEBUG:    < PONG 03 00 d4 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 16 5c 61 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 7c ce 1d [binary, 4 bytes]
DEBUG:    < PONG ed 16 5c 61 [binary, 4 bytes]
DEBUG:    < PONG 91 7c ce 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922925.8339863}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 dd 3d 0d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 cd 95 93 [binary, 4 bytes]
DEBUG:    < PONG 25 dd 3d 0d [binary, 4 bytes]
DEBUG:    < PONG 03 cd 95 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922933.8387663}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 b5 ba 7d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 1e e3 4d [binary, 4 bytes]
DEBUG:    < PONG c2 b5 ba 7d [binary, 4 bytes]
DEBUG:    < PONG dd 1e e3 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 2f 07 cc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 25 b4 1a [binary, 4 bytes]
DEBUG:    < PONG dc 2f 07 cc [binary, 4 bytes]
DEBUG:    < PONG 22 25 b4 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922963.8415694}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c e6 3c ce [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 72 cd 0b [binary, 4 bytes]
DEBUG:    < PONG 0c e6 3c ce [binary, 4 bytes]
DEBUG:    < PONG 6b 72 cd 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a c2 98 dc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 5a da 25 [binary, 4 bytes]
DEBUG:    < PONG 7a c2 98 dc [binary, 4 bytes]
DEBUG:    < PONG 2e 5a da 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 12 c6 ac [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 5d ba 14 [binary, 4 bytes]
DEBUG:    < PONG 9a 12 c6 ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 78 5d ba 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922985.8307378}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 8d 1b 50 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 10 87 0a [binary, 4 bytes]
DEBUG:    < PONG af 8d 1b 50 [binary, 4 bytes]
DEBUG:    < PONG 59 10 87 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745922994.8267524}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 8b fa e3 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 80 6d 9f [binary, 4 bytes]
DEBUG:    < PONG d5 8b fa e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 35 80 6d 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 4d ca 78 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 33 c4 7c [binary, 4 bytes]
DEBUG:    < PONG a3 4d ca 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f6 33 c4 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 28 e5 93 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 c3 b6 66 [binary, 4 bytes]
DEBUG:    < PONG 30 28 e5 93 [binary, 4 bytes]
DEBUG:    < PONG b5 c3 b6 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923024.8264692}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'F\x05j\r' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '<I\x15!' [text, 4 bytes]
DEBUG:    < PONG 'F\x05j\r' [text, 4 bytes]
DEBUG:    < PONG '<I\x15!' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 64 45 f7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e f7 50 6a [binary, 4 bytes]
DEBUG:    < PONG 8d 64 45 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 0e f7 50 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923045.8362823}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 81 29 2d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 68 c1 2f [binary, 4 bytes]
DEBUG:    < PONG 83 81 29 2d [binary, 4 bytes]
DEBUG:    < PONG f5 68 c1 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '6\ua281' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 09 4d 4e [binary, 4 bytes]
DEBUG:    < PONG '6\ua281' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ff 09 4d 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 91 e6 69 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 77 42 b7 [binary, 4 bytes]
DEBUG:    < PONG 7f 77 42 b7 [binary, 4 bytes]
DEBUG:    < PONG 10 91 e6 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 72 f7 87 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 3c ad 88 [binary, 4 bytes]
DEBUG:    < PONG 1a 72 f7 87 [binary, 4 bytes]
DEBUG:    < PONG d4 3c ad 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 d0 83 e5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 55 7f 9d [binary, 4 bytes]
DEBUG:    < PONG c8 d0 83 e5 [binary, 4 bytes]
DEBUG:    < PONG da 55 7f 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 0a e1 d2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a a4 88 04 [binary, 4 bytes]
DEBUG:    < PONG 20 0a e1 d2 [binary, 4 bytes]
DEBUG:    < PONG 5a a4 88 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923105.8281214}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923105.8364599}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 6e 3d 80 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 4b b2 f7 [binary, 4 bytes]
DEBUG:    < PONG 41 6e 3d 80 [binary, 4 bytes]
DEBUG:    < PONG e5 4b b2 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0fiEw' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 0d a9 88 [binary, 4 bytes]
DEBUG:    < PONG '\x0fiEw' [text, 4 bytes]
DEBUG:    < PONG 8b 0d a9 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 3c 38 eb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 3e 63 52 [binary, 4 bytes]
DEBUG:    < PONG 5b 3c 38 eb [binary, 4 bytes]
DEBUG:    < PONG c2 3e 63 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 6d 6e bd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d f8 eb 20 [binary, 4 bytes]
DEBUG:    < PONG c1 6d 6e bd [binary, 4 bytes]
DEBUG:    < PONG 8d f8 eb 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 17 b8 27 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 79 af 59 [binary, 4 bytes]
DEBUG:    < PONG e9 17 b8 27 [binary, 4 bytes]
DEBUG:    < PONG 59 79 af 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 73 18 86 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 50 b8 91 [binary, 4 bytes]
DEBUG:    < PONG 1f 73 18 86 [binary, 4 bytes]
DEBUG:    < PONG ee 50 b8 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923165.832705}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923165.8431914}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 80 0d 38 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 6d 54 ab [binary, 4 bytes]
DEBUG:    < PONG fb 80 0d 38 [binary, 4 bytes]
DEBUG:    < PONG 1d 6d 54 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 f6 b3 15 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 d3 d4 3d [binary, 4 bytes]
DEBUG:    < PONG 60 f6 b3 15 [binary, 4 bytes]
DEBUG:    < PONG c6 d3 d4 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 b9 e4 3d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 49 65 94 [binary, 4 bytes]
DEBUG:    < PONG 66 b9 e4 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f9 49 65 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'v,5e' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 91 73 57 [binary, 4 bytes]
DEBUG:    < PONG 'v,5e' [text, 4 bytes]
DEBUG:    < PONG a2 91 73 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 85 35 ff [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 e4 56 86 [binary, 4 bytes]
DEBUG:    < PONG 59 85 35 ff [binary, 4 bytes]
DEBUG:    < PONG 51 e4 56 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 81 ec e4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 91 b4 9e [binary, 4 bytes]
DEBUG:    < PONG 1e 81 ec e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 60 91 b4 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923225.828714}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923225.828714}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 14 b2 d4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 4e a1 10 [binary, 4 bytes]
DEBUG:    < PONG bf 14 b2 d4 [binary, 4 bytes]
DEBUG:    < PONG 55 4e a1 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 50 dd a0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 7f 32 cd [binary, 4 bytes]
DEBUG:    < PONG a3 50 dd a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 48 7f 32 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 a9 b3 15 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 b6 9c e7 [binary, 4 bytes]
DEBUG:    < PONG 83 a9 b3 15 [binary, 4 bytes]
DEBUG:    < PONG 14 b6 9c e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '-1Mb' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 ca 87 b6 [binary, 4 bytes]
DEBUG:    < PONG '-1Mb' [text, 4 bytes]
DEBUG:    < PONG e8 ca 87 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 0d d6 ae [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 28 e5 d5 [binary, 4 bytes]
DEBUG:    < PONG d2 0d d6 ae [binary, 4 bytes]
DEBUG:    < PONG 05 28 e5 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923279.8217044}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a db e2 1f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca d6 99 ab [binary, 4 bytes]
DEBUG:    < PONG 1a db e2 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ca d6 99 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923285.8353791}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 e5 b6 fb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c 06 a5 19 [binary, 4 bytes]
DEBUG:    < PONG e1 e5 b6 fb [binary, 4 bytes]
DEBUG:    < PONG 4c 06 a5 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923293.8472366}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 e9 3f a5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 ff f0 e2 [binary, 4 bytes]
DEBUG:    < PONG 44 e9 3f a5 [binary, 4 bytes]
DEBUG:    < PONG d3 ff f0 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 9c 4b 11 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 24 43 ab [binary, 4 bytes]
DEBUG:    < PONG 91 9c 4b 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 31 24 43 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923323.8459423}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 61 8d 76 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '!60\x1c' [text, 4 bytes]
DEBUG:    < PONG 22 61 8d 76 [binary, 4 bytes]
DEBUG:    < PONG '!60\x1c' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 52 7a 00 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 f3 52 0d [binary, 4 bytes]
DEBUG:    < PONG dc 52 7a 00 [binary, 4 bytes]
DEBUG:    < PONG 21 f3 52 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745923336.380264}}' [86 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 9f c4 cd [binary, 4 bytes]
DEBUG:    < PONG 50 9f c4 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 6d f6 0e [binary, 4 bytes]
DEBUG:    < PONG 70 6d f6 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 fa 07 e0 [binary, 4 bytes]
DEBUG:    < PONG 30 fa 07 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 d0 24 24 [binary, 4 bytes]
DEBUG:    < PONG 80 d0 24 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a f1 d0 1b [binary, 4 bytes]
DEBUG:    < PONG 0a f1 d0 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 c3 1f 03 [binary, 4 bytes]
DEBUG:    < PONG 00 c3 1f 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 57 23 97 [binary, 4 bytes]
DEBUG:    < PONG 20 57 23 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'vs\u0618' [text, 4 bytes]
DEBUG:    < PONG 'vs\u0618' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 f3 30 fa [binary, 4 bytes]
DEBUG:    < PONG 87 f3 30 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 99 7c f6 [binary, 4 bytes]
DEBUG:    < PONG 56 99 7c f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea e5 7e f8 [binary, 4 bytes]
DEBUG:    < PONG ea e5 7e f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 e7 23 c8 [binary, 4 bytes]
DEBUG:    < PONG 63 e7 23 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 d2 5c 46 [binary, 4 bytes]
DEBUG:    < PONG 85 d2 5c 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 1f 58 9f [binary, 4 bytes]
DEBUG:    < PONG 0e 1f 58 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 a1 1f 46 [binary, 4 bytes]
DEBUG:    < PONG 07 a1 1f 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 29 7e be [binary, 4 bytes]
DEBUG:    < PONG e9 29 7e be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 50 99 20 [binary, 4 bytes]
DEBUG:    < PONG 4e 50 99 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 55 11 d5 [binary, 4 bytes]
DEBUG:    < PONG c6 55 11 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 de f8 d8 [binary, 4 bytes]
DEBUG:    < PONG 44 de f8 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 58 6b e0 [binary, 4 bytes]
DEBUG:    < PONG 7b 58 6b e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 0f 1b 4d [binary, 4 bytes]
DEBUG:    < PONG d3 0f 1b 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 3a 25 a5 [binary, 4 bytes]
DEBUG:    < PONG a6 3a 25 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 0e d1 45 [binary, 4 bytes]
DEBUG:    < PONG a6 0e d1 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 6d e8 31 [binary, 4 bytes]
DEBUG:    < PONG d8 6d e8 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 0e d5 ee [binary, 4 bytes]
DEBUG:    < PONG 7e 0e d5 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 90 45 ae [binary, 4 bytes]
DEBUG:    < PONG 38 90 45 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db c8 59 e8 [binary, 4 bytes]
DEBUG:    < PONG db c8 59 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 12 24 11 [binary, 4 bytes]
DEBUG:    < PONG bb 12 24 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22580]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
======= room_update 房间状态变化 =======
房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
操作类型: sit_down
操作玩家: qq
操作结果: {'success': True, 'message': '入座成功'}
玩家列表: ['hq', 'qq']
玩家位置详情: [('hq', 1), ('qq', 7)]
最大玩家数: 8
游戏阶段: waiting
============================
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
======= room_update 房间状态变化 =======
房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
操作类型: buy_in
操作玩家: qq
操作结果: {'success': True, 'message': '买入成功，总筹码: 333.0'}
玩家列表: ['hq', 'qq']
玩家位置详情: [('hq', 1), ('qq', 7)]
最大玩家数: 8
游戏阶段: waiting
============================
Starting game in room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 10d, Ad, 6c
Dealt cards to player position 7: 5h, Ac, Ah

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745921732.4057064
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 19:15:32.405706
======= room_update 房间状态变化 =======
房间ID: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
操作类型: start_game
操作玩家: hq
操作结果: {'success': True, 'message': '游戏开始'}
玩家列表: []
玩家位置详情: []
最大玩家数: 8
游戏阶段: playing
============================
Room state saved successfully. Rooms: 3
[BROADCAST] Room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18: Sending update. Reason: First update for this room
玩家 qq 弃掉了第 2 张牌: {'rank': '5', 'suit': 'h', 'display': '5h'}
处理玩家 7 动作: fold, 金额: 0
玩家 qq 选择弃牌
Final pot after adding player bets: 1.5
Player hq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
Room state saved successfully. Rooms: 3
移动庄家按钮: 1 -> 0 (位置 1)
Dealing cards to players
Dealt cards to player position 1: 10s, 6h, 9s
Dealt cards to player position 7: 10h, 2d, Jh

=== POSTING BLINDS ===
Before blinds: hq has 111.5 chips
Before blinds: qq has 332.5 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 111.0
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 331.5

=== CHIPS AFTER BLINDS ===
hq has 111.0 chips, bet: 0.5, position: BUTTON
qq has 331.5 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
回合成功开始。当前玩家: hq
[BROADCAST] Room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18: Sending update. Reason: Current player changed: 7 -> 1
Room state saved successfully. Rooms: 3
处理玩家 1 动作: discard, 金额: 2
玩家 hq 必须先弃掉一张牌
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Checking for expired rooms...
Room 19d725da-198a-42a7-ac7a-ea7975dacfd7 has expired after 32.7 minutes of inactivity
Room 19d725da-198a-42a7-ac7a-ea7975dacfd7 has been idle for 32.7 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: 19d725da-198a-42a7-ac7a-ea7975dacfd7
已删除房间 19d725da-198a-42a7-ac7a-ea7975dacfd7，当前房间总数: 2
Room state saved successfully. Rooms: 2
Removed 1 expired rooms. Remaining rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: qq
Application stopping...
Rooms at shutdown: {'21f2b73e-ebe0-40a2-94d8-72888bf5200b': <src.models.room.Room object at 0x0000020CC09E7080>, '84d9c706-e6c7-4105-9b67-ad5f05fd8e18': <src.models.room.Room object at 0x0000020CC0998830>}
INFO:     Started server process [21376]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
Initializing RoomManager
Creating Room: id=21f2b73e-ebe0-40a2-94d8-72888bf5200b, name=sd
Room created successfully: id=21f2b73e-ebe0-40a2-94d8-72888bf5200b
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=84d9c706-e6c7-4105-9b67-ad5f05fd8e18, name=asd1
Room created successfully: id=84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 2
Room manager cleanup thread started
Main room_manager instance id: 1747144818912
Initial rooms: {'21f2b73e-ebe0-40a2-94d8-72888bf5200b': <src.models.room.Room object at 0x00000196CA2EEA50>, '84d9c706-e6c7-4105-9b67-ad5f05fd8e18': <src.models.room.Room object at 0x00000196CA2EEF60>}
Application starting...
Rooms at startup: {'21f2b73e-ebe0-40a2-94d8-72888bf5200b': <src.models.room.Room object at 0x00000196CA2EEA50>, '84d9c706-e6c7-4105-9b67-ad5f05fd8e18': <src.models.room.Room object at 0x00000196CA2EEF60>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-29 18:47:05.468159
INFO:     127.0.0.1:56013 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:54359 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:56012 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: EZxFtQjjnc1R2um8LCxxYA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:56208 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: COip5KSxWKvKG1QnGpTgkQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: RP9V2rxO2psQTMOuP0O5+w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:55789 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:55793 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: qb2YajxDy9e+h7dwXrcaPQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:54351 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:55870 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:55868 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:56206 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:56111 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:56115 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 56242) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI" [accepted]
INFO:     ('127.0.0.1', 55809) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4" [accepted]
INFO:     ('127.0.0.1', 55801) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MTY5OX0.OEEXYDlcjfayiW2_XxfSOrMhvnYS5Rxc9k7tAbTP6sI" [accepted]
INFO:     ('127.0.0.1', 56250) - "WebSocket /ws/game/84d9c706-e6c7-4105-9b67-ad5f05fd8e18?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MTcwMH0.2Lrp6fkOZgBGylstFxLy7bco45xI8BTqheCJbW1xI_4" [accepted]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
Client hq connected
Added hq to room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Client qq connected
Added qq to room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Client hq connected
Client qq connected
Error sending message to hq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Error broadcasting to room member qq: no close frame received or sent
Error sending message to qq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
Error sending message to hq: no close frame received or sent
WebSocket disconnected for client: hq
Error sending message to qq: no close frame received or sent
WebSocket disconnected for client: qq
INFO:     127.0.0.1:56013 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:56012 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:56013 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:56012 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:56012 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56111 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56111 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:56111 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:56362 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56362 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56362 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:56362 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:56382 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fdfd' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fdfd, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1747144818912
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=d117a0a5-9e66-49cb-b39e-cd173729ab17, name=fdfd
Room created successfully: id=d117a0a5-9e66-49cb-b39e-cd173729ab17
已创建房间 d117a0a5-9e66-49cb-b39e-cd173729ab17，房主: hq，当前房间总数: 3
Room state saved successfully. Rooms: 3
房间创建成功, 房间ID: d117a0a5-9e66-49cb-b39e-cd173729ab17
创建房间成功: {'id': 'd117a0a5-9e66-49cb-b39e-cd173729ab17', 'name': 'fdfd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:56382 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='hq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
尝试将用户 hq 添加到房间 d117a0a5-9e66-49cb-b39e-cd173729ab17
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room d117a0a5-9e66-49cb-b39e-cd173729ab17 with no seat assigned
成功: 用户 hq 已加入房间 d117a0a5-9e66-49cb-b39e-cd173729ab17
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:56382 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='hq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:56382 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='hq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:56382 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: zdfxCD5zo2J9yd4VPWeQTw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56399) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: XT4/EIJNilcI53p2UJG0NjPTwQE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:47:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923637.7963457}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: gQGt6LHTpufl0gmDs6+ZNA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56401) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sRVd1i6qTBLt21+ah+1FfalTH5I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:47:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923637.8317616}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...29ab17","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745923638.8011446}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745923639.6842835}}' [509 bytes]
Client hq reconnected
Sent pending message to hq: game_state
Sent pending message to hq: game_state
Added hq to room d117a0a5-9e66-49cb-b39e-cd173729ab17
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:56369 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:56369 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='qq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
尝试将用户 qq 添加到房间 d117a0a5-9e66-49cb-b39e-cd173729ab17
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room d117a0a5-9e66-49cb-b39e-cd173729ab17 with no seat assigned
成功: 用户 qq 已加入房间 d117a0a5-9e66-49cb-b39e-cd173729ab17
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:56369 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='qq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:56369 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='qq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:56369 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: iT9PgxyKYpZv5X0mL4B3Sg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56420) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YZ3IEfP/ctr6TAxwe2uuYGLny7U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:47:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"84d9c70...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923644.1156619}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923644.1156619}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: xfbnzCCfKIm1r+bLI8fqtA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56422) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QjE0IHjKn2He8S01ajnxf8w+OfU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:47:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923644.1699274}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923644.1699274}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...29ab17","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745923644.6986618}}' [519 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745923644.6986618}}' [519 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745923647.191434}}' [549 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745923647.191434}}' [549 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...9cb-b39e-cd173729ab17"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745923650.2949405}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745923650.2949405}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...:"h","display":"3h"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...:"h","display":"7h"}]}}' [1387 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '0-5\x0e' [text, 4 bytes]
DEBUG:    < PONG '0-5\x0e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 3c ea e8 [binary, 4 bytes]
DEBUG:    < PONG d3 3c ea e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x15P[(' [text, 4 bytes]
DEBUG:    < PONG '\x15P[(' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 ba 29 66 [binary, 4 bytes]
DEBUG:    < PONG 75 ba 29 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923667.8465354}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923674.8295662}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 68 e0 82 [binary, 4 bytes]
DEBUG:    < PONG f3 68 e0 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d dd 2f 79 [binary, 4 bytes]
DEBUG:    < PONG 7d dd 2f 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf b3 d5 e7 [binary, 4 bytes]
DEBUG:    < PONG cf b3 d5 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 90 a9 df [binary, 4 bytes]
DEBUG:    < PONG 62 90 a9 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 05 84 4a [binary, 4 bytes]
DEBUG:    < PONG a2 05 84 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df c6 1d 2c [binary, 4 bytes]
DEBUG:    < PONG df c6 1d 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923697.845279}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 0d 8f c9 [binary, 4 bytes]
DEBUG:    < PONG 71 0d 8f c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 c7 a8 04 [binary, 4 bytes]
DEBUG:    < PONG c0 c7 a8 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923704.8328557}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x7f #\x04' [text, 4 bytes]
DEBUG:    < PONG '\x7f #\x04' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 11 ed ba [binary, 4 bytes]
DEBUG:    < PONG 65 11 ed ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 ce 2e 87 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\rg+b' [text, 4 bytes]
DEBUG:    < PONG 46 ce 2e 87 [binary, 4 bytes]
DEBUG:    < PONG '\rg+b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923727.846538}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923734.8387468}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 58 b1 be [binary, 4 bytes]
DEBUG:    < PONG ec 58 b1 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 14 db 31 [binary, 4 bytes]
DEBUG:    < PONG 5e 14 db 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745923739.6034744}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent pending message to qq: game_state
Sent pending message to qq: game_state
Added qq to room d117a0a5-9e66-49cb-b39e-cd173729ab17
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Action=buy_in, Player=qq, Result=True
Starting game in room d117a0a5-9e66-49cb-b39e-cd173729ab17
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Qc, Qh, 3h
Dealt cards to player position 7: 8d, 7h, 9d

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745923650.2949405
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 19:47:30.294940
[BROADCAST][room_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Starting game with 0 players.
[BROADCAST][game_update] Room d117a0a5-9e66-49cb-b39e-cd173729ab17: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 3
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room d117a0a5-9e66-49cb-b39e-cd173729ab17

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='hq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:56557 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: NRIHnw4OKp3UIbxYbE0FWA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56562) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4MzYyOX0.A50srQEYcxWn951c9FXLAlT4HIkWDz6gkVmVYm1hP2s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6Sq8j8Vu4RxaaUuoi58TYqy9iRw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:48:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4305 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...:"h","display":"3h"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923740.2475443}}' [84 bytes]
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room d117a0a5-9e66-49cb-b39e-cd173729ab17
Client hq reconnected
Sent reconnect state to hq
Added hq to room d117a0a5-9e66-49cb-b39e-cd173729ab17

===== 加入房间请求开始 =====
请求数据: room_id='d117a0a5-9e66-49cb-b39e-cd173729ab17' username='qq'
成功找到房间: d117a0a5-9e66-49cb-b39e-cd173729ab17, 名称: fdfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:56563 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: KeP3G8vBmCDwuFgTMUCaZA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56566) - "WebSocket /ws/game/d117a0a5-9e66-49cb-b39e-cd173729ab17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4MzYzMX0.uIsxv3vWLuTGTLAHkqgFJA0X6s55aAKn_2DZR98Gwps" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vAUmOshjJ5socTw4WZNfE20YTYo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:48:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4305 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"d117a0a...:"h","display":"7h"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923740.5851219}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745923740.5851219}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab d4 db cc [binary, 4 bytes]
DEBUG:    < PONG ab d4 db cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '"P\x16C' [text, 4 bytes]
DEBUG:    < PONG '"P\x16C' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 44 48 9e [binary, 4 bytes]
DEBUG:    < PONG 65 44 48 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 8d fe ac [binary, 4 bytes]
DEBUG:    < PONG 28 8d fe ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745923764.0943902}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745923764.0959399}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 b6 2e 6f [binary, 4 bytes]
DEBUG:    < PONG a6 b6 2e 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
Client qq reconnected
Sent reconnect state to qq
Added qq to room d117a0a5-9e66-49cb-b39e-cd173729ab17
Room state saved successfully. Rooms: 3
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room d117a0a5-9e66-49cb-b39e-cd173729ab17
WebSocket disconnected for client: hq
INFO:     127.0.0.1:56560 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room d117a0a5-9e66-49cb-b39e-cd173729ab17
WebSocket disconnected for client: qq
INFO:     127.0.0.1:56565 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:56560 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56560 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='2121' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=2121, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1747144818912
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, name=2121
Room created successfully: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
已创建房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0，房主: hq，当前房间总数: 4
Room state saved successfully. Rooms: 4
房间创建成功, 房间ID: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
创建房间成功: {'id': '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0', 'name': '2121', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:56560 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='hq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
尝试将用户 hq 添加到房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0 with no seat assigned
成功: 用户 hq 已加入房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:56560 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='hq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:56560 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='hq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:56560 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: mlEcWqtUdo+6+41dojNiXQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56652) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: b5ms4ltNtvRV5FdPXMRXXzfM230=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:49:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4288 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745923771.211584}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: A1sGPhZuNDUfOnmUc9G2pg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56654) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: X5T+fw/MSa9T2c6cE9grLbtfQmU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:49:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745923771.252242}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...a6c0a0","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745923772.1985333}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745923773.0508473}}' [509 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:56661 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:56661 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 4
INFO:     127.0.0.1:56661 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='qq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
尝试将用户 qq 添加到房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0 with no seat assigned
成功: 用户 qq 已加入房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:56661 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='qq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:56661 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0' username='qq'
成功找到房间: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, 名称: 2121
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:56661 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 2ZzKEhDFOx5mfAo4P73T/Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56682) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7nIgVF839yzmyZ8NcXBO5WlLYeE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:49:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4288 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745923777.678011}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745923777.678011}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: effBggtnPaAj/9pycyOhDw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 56684) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TALT0OEj0tWpXzk5UUpJqC4lHhE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 10:49:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745923777.71094}}' [82 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745923777.71094}}' [82 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...a6c0a0","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745923778.099832}}' [518 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745923778.099832}}' [518 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745923778.8625922}}' [550 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745923778.8625922}}' [550 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 f9 04 3d [binary, 4 bytes]
DEBUG:    < PONG 78 f9 04 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 60 b5 10 [binary, 4 bytes]
DEBUG:    < PONG 7c 60 b5 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 f4 15 b0 [binary, 4 bytes]
DEBUG:    < PONG d5 f4 15 b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 51 04 86 [binary, 4 bytes]
DEBUG:    < PONG f7 51 04 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923801.2718277}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923807.8295517}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 3a 03 4f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 b0 ac eb [binary, 4 bytes]
DEBUG:    < PONG ce 3a 03 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG a1 b0 ac eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 97 29 df [binary, 4 bytes]
DEBUG:    < PONG 1f 97 29 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 fc 7a 14 [binary, 4 bytes]
DEBUG:    < PONG 17 fc 7a 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a 2c b1 0e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 3a cb 7d [binary, 4 bytes]
DEBUG:    < PONG 1a 2c b1 0e [binary, 4 bytes]
DEBUG:    < PONG 90 3a cb 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923831.2576268}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 38 bf 98 [binary, 4 bytes]
DEBUG:    < PONG 29 38 bf 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 55 34 9a [binary, 4 bytes]
DEBUG:    < PONG 91 55 34 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923837.8307216}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2b bb 3d de [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 57 3d d0 [binary, 4 bytes]
DEBUG:    < PONG 2b bb 3d de [binary, 4 bytes]
DEBUG:    < PONG cc 57 3d d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be cd fe d4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 36 e1 4d [binary, 4 bytes]
DEBUG:    < PONG be cd fe d4 [binary, 4 bytes]
DEBUG:    < PONG e8 36 e1 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923861.261018}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923867.8310406}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 97 a7 c6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 8d 87 64 [binary, 4 bytes]
DEBUG:    < PONG 65 97 a7 c6 [binary, 4 bytes]
DEBUG:    < PONG 26 8d 87 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 60 06 a6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 f2 54 38 [binary, 4 bytes]
DEBUG:    < PONG 5d 60 06 a6 [binary, 4 bytes]
DEBUG:    < PONG 60 f2 54 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...048-8c7c-0bdf1ca6c0a0"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745923880.4684963}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745923880.4684963}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"d","display":"3d"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"s","display":"2s"}]}}' [1387 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 48 fe 9f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 89 73 81 [binary, 4 bytes]
DEBUG:    < PONG 30 48 fe 9f [binary, 4 bytes]
DEBUG:    < PONG 73 89 73 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923891.262929}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 b4 df e6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 f2 c0 ed [binary, 4 bytes]
DEBUG:    < PONG 83 b4 df e6 [binary, 4 bytes]
DEBUG:    < PONG 32 f2 c0 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923897.7314477}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 28 13 3d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 de 79 e3 [binary, 4 bytes]
DEBUG:    < PONG 8d 28 13 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG c3 de 79 e3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 e9 bd 01 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 6e bc 9d [binary, 4 bytes]
DEBUG:    < PONG 88 e9 bd 01 [binary, 4 bytes]
DEBUG:    < PONG 00 6e bc 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923921.2598617}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923927.841926}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 e2 f8 49 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 96 a5 38 [binary, 4 bytes]
DEBUG:    < PONG 95 e2 f8 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 92 96 a5 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 3c a2 39 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 1f 3c e9 [binary, 4 bytes]
DEBUG:    < PONG f5 3c a2 39 [binary, 4 bytes]
DEBUG:    < PONG ba 1f 3c e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 29 32 76 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 0b 5e cc [binary, 4 bytes]
DEBUG:    < PONG 8c 29 32 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ff 0b 5e cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923951.263142}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 e2 20 fc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 83 f4 9f [binary, 4 bytes]
DEBUG:    < PONG 25 e2 20 fc [binary, 4 bytes]
DEBUG:    < PONG d6 83 f4 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923967.71739}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING db f1 1d e8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 0b 78 d5 [binary, 4 bytes]
DEBUG:    < PONG db f1 1d e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 36 0b 78 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e f8 a7 77 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe b2 28 ee [binary, 4 bytes]
DEBUG:    < PONG 4e f8 a7 77 [binary, 4 bytes]
DEBUG:    < PONG fe b2 28 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923981.2601867}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745923987.829741}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 a1 31 bb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 3a 28 97 [binary, 4 bytes]
DEBUG:    < PONG 42 a1 31 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 13 3a 28 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa ba 0a ef [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'z\t\x04F' [text, 4 bytes]
DEBUG:    < PONG aa ba 0a ef [binary, 4 bytes]
DEBUG:    < PONG 'z\t\x04F' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 f9 8d 87 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 96 f9 76 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924011.2608542}' [46 bytes]
DEBUG:    < PONG d6 f9 8d 87 [binary, 4 bytes]
DEBUG:    < PONG e0 96 f9 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 75 39 9a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf da 6a 8a [binary, 4 bytes]
DEBUG:    < PONG 8f 75 39 9a [binary, 4 bytes]
DEBUG:    < PONG bf da 6a 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924017.8285084}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 87 70 fe [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 67 08 e6 [binary, 4 bytes]
DEBUG:    < PONG 73 87 70 fe [binary, 4 bytes]
DEBUG:    < PONG 7b 67 08 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
WARNING:  StatReload detected changes in 'src\main.py'. Reloading...
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 2e 72 63 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 02 c1 4a [binary, 4 bytes]
DEBUG:    < PONG eb 2e 72 63 [binary, 4 bytes]
DEBUG:    < PONG a2 02 c1 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924041.2613235}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 f0 e0 37 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a c4 23 c4 [binary, 4 bytes]
DEBUG:    < PONG e8 f0 e0 37 [binary, 4 bytes]
DEBUG:    < PONG 9a c4 23 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '!\x0f;}' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 38 35 b5 [binary, 4 bytes]
DEBUG:    < PONG '!\x0f;}' [text, 4 bytes]
DEBUG:    < PONG a8 38 35 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924065.829275}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924071.2621837}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 64 ff e1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 91 e7 b4 [binary, 4 bytes]
DEBUG:    < PONG 6c 64 ff e1 [binary, 4 bytes]
DEBUG:    < PONG 8c 91 e7 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 ca 3e b2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 2f 56 e6 [binary, 4 bytes]
DEBUG:    < PONG ef 2f 56 e6 [binary, 4 bytes]
DEBUG:    < PONG b0 ca 3e b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1561 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1561 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"s","display":"8s"}]}}' [1380 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"s","display":"2s"}]}}' [1419 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 70 e2 44 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 20 4f f2 [binary, 4 bytes]
DEBUG:    < PONG d4 70 e2 44 [binary, 4 bytes]
DEBUG:    < PONG 1d 20 4f f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924091.4306931}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 2b ce af [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 39 79 b6 [binary, 4 bytes]
DEBUG:    < PONG 95 2b ce af [binary, 4 bytes]
DEBUG:    < PONG 91 39 79 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924101.2628248}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924107.7350898}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 9b 4c f5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 f8 1a c4 [binary, 4 bytes]
DEBUG:    < PONG 63 9b 4c f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG a8 f8 1a c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 9a b5 12 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 3a 24 d6 [binary, 4 bytes]
DEBUG:    < PONG 48 9a b5 12 [binary, 4 bytes]
DEBUG:    < PONG e6 3a 24 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
INFO:     Shutting down
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924131.2627244}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f df 15 a8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 30 37 8b [binary, 4 bytes]
DEBUG:    < PONG 1f df 15 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 57 30 37 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 05 b0 3b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 85 72 55 [binary, 4 bytes]
DEBUG:    < PONG 9e 05 b0 3b [binary, 4 bytes]
DEBUG:    < PONG 5e 85 72 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924137.8285449}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 be 5b 53 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 1f d3 e1 [binary, 4 bytes]
DEBUG:    < PONG e9 be 5b 53 [binary, 4 bytes]
DEBUG:    < PONG 17 1f d3 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 20 85 ed [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 62 f0 3f [binary, 4 bytes]
DEBUG:    < PONG dc 20 85 ed [binary, 4 bytes]
DEBUG:    < PONG 14 62 f0 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924161.2630491}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924167.8293314}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 17 77 14 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 79 b3 12 [binary, 4 bytes]
DEBUG:    < PONG ec 79 b3 12 [binary, 4 bytes]
DEBUG:    < PONG 93 17 77 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 27 71 2c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 64 11 10 [binary, 4 bytes]
DEBUG:    < PONG 92 27 71 2c [binary, 4 bytes]
DEBUG:    < PONG f7 64 11 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924191.259309}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 5c 09 bc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 a1 a5 8e [binary, 4 bytes]
DEBUG:    < PONG 24 5c 09 bc [binary, 4 bytes]
DEBUG:    < PONG 84 a1 a5 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 d2 01 04 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 68 ff d2 [binary, 4 bytes]
DEBUG:    < PONG 82 d2 01 04 [binary, 4 bytes]
DEBUG:    < PONG 60 68 ff d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924197.8268006}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 73 48 ae [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 4b 26 82 [binary, 4 bytes]
DEBUG:    < PONG d6 73 48 ae [binary, 4 bytes]
DEBUG:    < PONG e5 4b 26 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 83 31 bc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a 14 a9 a3 [binary, 4 bytes]
DEBUG:    < PONG 1e 83 31 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 0a 14 a9 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924221.2621891}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c c3 b9 c9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 a2 a4 f0 [binary, 4 bytes]
DEBUG:    < PONG 8c c3 b9 c9 [binary, 4 bytes]
DEBUG:    < PONG e4 a2 a4 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae ff 89 52 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 19 b6 38 [binary, 4 bytes]
DEBUG:    < PONG ae ff 89 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG c7 19 b6 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924245.8350854}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924251.2594407}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 14 c0 bb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 d9 7b 3b [binary, 4 bytes]
DEBUG:    < PONG 38 14 c0 bb [binary, 4 bytes]
DEBUG:    < PONG 15 d9 7b 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 8e a9 e6 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 e9 6a 11 [binary, 4 bytes]
DEBUG:    < PONG d6 e9 6a 11 [binary, 4 bytes]
DEBUG:    < PONG 72 8e a9 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e de d1 bf [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 97 38 c0 [binary, 4 bytes]
DEBUG:    < PONG 6e de d1 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f6 97 38 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924277.6696057}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a e6 00 f0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 fb 7a 69 [binary, 4 bytes]
DEBUG:    < PONG 3a e6 00 f0 [binary, 4 bytes]
DEBUG:    < PONG d8 fb 7a 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924281.2634761}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924287.8342912}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac e6 b3 e4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 1e 76 8e [binary, 4 bytes]
DEBUG:    < PONG ac e6 b3 e4 [binary, 4 bytes]
DEBUG:    < PONG 8a 1e 76 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 75 c6 e7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 ee 1f fc [binary, 4 bytes]
DEBUG:    < PONG 00 75 c6 e7 [binary, 4 bytes]
DEBUG:    < PONG c8 ee 1f fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924311.2618687}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 88 d3 54 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f dd ba cf [binary, 4 bytes]
DEBUG:    < PONG 44 88 d3 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 6f dd ba cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df d6 42 9b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING "DF'[" [text, 4 bytes]
DEBUG:    < PONG "DF'[" [text, 4 bytes]
DEBUG:    < PONG df d6 42 9b [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924317.8301108}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 51 28 b7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 74 b9 bc [binary, 4 bytes]
DEBUG:    < PONG 5d 51 28 b7 [binary, 4 bytes]
DEBUG:    < PONG 64 74 b9 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 e9 7d 9e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 1b a0 db [binary, 4 bytes]
DEBUG:    < PONG a2 e9 7d 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 41 1b a0 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924341.2636297}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924347.8286104}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 a6 92 f5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 47 80 55 [binary, 4 bytes]
DEBUG:    < PONG 03 a6 92 f5 [binary, 4 bytes]
DEBUG:    < PONG e8 47 80 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 db 3a c5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 0f 8a 98 [binary, 4 bytes]
DEBUG:    < PONG 85 db 3a c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 7c 0f 8a 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924371.2604878}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 24 a9 a7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d 5b d0 7c [binary, 4 bytes]
DEBUG:    < PONG 44 24 a9 a7 [binary, 4 bytes]
DEBUG:    < PONG 2d 5b d0 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 85 f9 f7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c f4 0e b3 [binary, 4 bytes]
DEBUG:    < PONG ff 85 f9 f7 [binary, 4 bytes]
DEBUG:    < PONG 9c f4 0e b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a d5 0a 20 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 59 bd 31 [binary, 4 bytes]
DEBUG:    < PONG 2a d5 0a 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG af 59 bd 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 c3 bf de [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 9b d3 6b [binary, 4 bytes]
DEBUG:    < PONG 33 c3 bf de [binary, 4 bytes]
DEBUG:    < PONG cc 9b d3 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924401.2627027}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 10 06 17 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 cf 99 f1 [binary, 4 bytes]
DEBUG:    < PONG e5 10 06 17 [binary, 4 bytes]
DEBUG:    < PONG b0 cf 99 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 35 bd e1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 e9 ad 2b [binary, 4 bytes]
DEBUG:    < PONG 2a 35 bd e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG a4 e9 ad 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924425.8356824}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745924431.260222}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 8f 60 3b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d d8 53 05 [binary, 4 bytes]
DEBUG:    < PONG 6a 8f 60 3b [binary, 4 bytes]
DEBUG:    < PONG 3d d8 53 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745924437.2083497}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '_@\x1e\x11' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    x half-closing TCP connection
DEBUG:    < PONG '_@\x1e\x11' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\r豇' [text, 4 bytes]
DEBUG:    < PONG '\r豇' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 19 45 b5 [binary, 4 bytes]
DEBUG:    < PONG a2 19 45 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 b3 79 f6 [binary, 4 bytes]
DEBUG:    < PONG d0 b3 79 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca db cf d0 [binary, 4 bytes]
DEBUG:    < PONG ca db cf d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 72 e7 c3 [binary, 4 bytes]
DEBUG:    < PONG 6f 72 e7 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '>3I\r' [text, 4 bytes]
DEBUG:    < PONG '>3I\r' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 55 53 da [binary, 4 bytes]
DEBUG:    < PONG be 55 53 da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8\x1e\x14f' [text, 4 bytes]
DEBUG:    < PONG '8\x1e\x14f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 49 8e a5 [binary, 4 bytes]
DEBUG:    < PONG 57 49 8e a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be d0 45 d8 [binary, 4 bytes]
DEBUG:    < PONG be d0 45 d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e 0e 87 91 [binary, 4 bytes]
DEBUG:    < PONG 1e 0e 87 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 1e 42 f0 [binary, 4 bytes]
DEBUG:    < PONG 39 1e 42 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 68 41 29 [binary, 4 bytes]
DEBUG:    < PONG 9b 68 41 29 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '6\r\u0508' [text, 4 bytes]
DEBUG:    < PONG '6\r\u0508' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 e3 78 81 [binary, 4 bytes]
DEBUG:    < PONG 13 e3 78 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b e5 c0 f9 [binary, 4 bytes]
DEBUG:    < PONG 1b e5 c0 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x06\x1e\x1fU' [text, 4 bytes]
DEBUG:    < PONG '\x06\x1e\x1fU' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 f7 e9 0a [binary, 4 bytes]
DEBUG:    < PONG 21 f7 e9 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '~\x0fmq' [text, 4 bytes]
DEBUG:    < PONG '~\x0fmq' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 55 55 36 [binary, 4 bytes]
DEBUG:    < PONG c1 55 55 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 72 5f 90 [binary, 4 bytes]
DEBUG:    < PONG 0b 72 5f 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'k\u0514-' [text, 4 bytes]
DEBUG:    < PONG 'k\u0514-' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 9c 8b 2c [binary, 4 bytes]
DEBUG:    < PONG dc 9c 8b 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 37 09 95 [binary, 4 bytes]
DEBUG:    < PONG aa 37 09 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 33 8e 46 [binary, 4 bytes]
DEBUG:    < PONG 30 33 8e 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 79 be 53 [binary, 4 bytes]
DEBUG:    < PONG fa 79 be 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 1a d3 ce [binary, 4 bytes]
DEBUG:    < PONG a9 1a d3 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d f4 72 85 [binary, 4 bytes]
DEBUG:    < PONG 2d f4 72 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 72 96 f7 [binary, 4 bytes]
DEBUG:    < PONG 64 72 96 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Q\x128C' [text, 4 bytes]
DEBUG:    < PONG 'Q\x128C' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8N\x01%' [text, 4 bytes]
DEBUG:    < PONG '8N\x01%' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 fe a4 8e [binary, 4 bytes]
DEBUG:    < PONG a1 fe a4 8e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 af f4 1a [binary, 4 bytes]
DEBUG:    < PONG 69 af f4 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 5c a7 a6 [binary, 4 bytes]
DEBUG:    < PONG e2 5c a7 a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 24 37 11 [binary, 4 bytes]
DEBUG:    < PONG f8 24 37 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca aa 95 5d [binary, 4 bytes]
DEBUG:    < PONG ca aa 95 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 d9 3d 21 [binary, 4 bytes]
DEBUG:    < PONG 37 d9 3d 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 86 c1 74 [binary, 4 bytes]
DEBUG:    < PONG 1d 86 c1 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 ff b5 6c [binary, 4 bytes]
DEBUG:    < PONG b4 ff b5 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 49 23 22 [binary, 4 bytes]
DEBUG:    < PONG b3 49 23 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 3a 2c 72 [binary, 4 bytes]
DEBUG:    < PONG a6 3a 2c 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x17|\x1a_' [text, 4 bytes]
DEBUG:    < PONG '\x17|\x1a_' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b c1 ae 01 [binary, 4 bytes]
DEBUG:    < PONG 8b c1 ae 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 de 6b 64 [binary, 4 bytes]
DEBUG:    < PONG 15 de 6b 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 c2 dc 78 [binary, 4 bytes]
DEBUG:    < PONG 84 c2 dc 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 cb 89 1b [binary, 4 bytes]
DEBUG:    < PONG d0 cb 89 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 0c 7c b6 [binary, 4 bytes]
DEBUG:    < PONG 53 0c 7c b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 b7 21 fd [binary, 4 bytes]
DEBUG:    < PONG 19 b7 21 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u04deQ\x7f' [text, 4 bytes]
DEBUG:    < PONG '\u04deQ\x7f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b b9 bd eb [binary, 4 bytes]
DEBUG:    < PONG 3b b9 bd eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 1b a5 ae [binary, 4 bytes]
DEBUG:    < PONG b2 1b a5 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 b5 37 88 [binary, 4 bytes]
DEBUG:    < PONG d4 b5 37 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 e1 23 7f [binary, 4 bytes]
DEBUG:    < PONG e2 e1 23 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a c5 7f d8 [binary, 4 bytes]
DEBUG:    < PONG 9a c5 7f d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 2c 7e 93 [binary, 4 bytes]
DEBUG:    < PONG ef 2c 7e 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 83 14 ac [binary, 4 bytes]
DEBUG:    < PONG d5 83 14 ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 50 51 a3 [binary, 4 bytes]
DEBUG:    < PONG de 50 51 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 b9 7a d0 [binary, 4 bytes]
DEBUG:    < PONG 91 b9 7a d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 66 c5 f5 [binary, 4 bytes]
DEBUG:    < PONG f7 66 c5 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 79 af 8c [binary, 4 bytes]
DEBUG:    < PONG 64 79 af 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [21376]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Action=buy_in, Player=qq, Result=True
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Starting game in room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Js, 8s, 3d
Dealt cards to player position 7: Kh, 6c, 2s

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745923880.4684963
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-29 19:51:20.468496
[BROADCAST][room_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Starting game with 0 players.
[BROADCAST][game_update] Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 4
处理玩家 1 动作: discard, 金额: 0
玩家 hq 必须先弃掉一张牌
Checking for expired rooms...
Room 21f2b73e-ebe0-40a2-94d8-72888bf5200b has expired after 43.1 minutes of inactivity
Room 21f2b73e-ebe0-40a2-94d8-72888bf5200b has been idle for 43.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18 has expired after 36.9 minutes of inactivity
Room 84d9c706-e6c7-4105-9b67-ad5f05fd8e18 has been idle for 36.9 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: 21f2b73e-ebe0-40a2-94d8-72888bf5200b
已删除房间 21f2b73e-ebe0-40a2-94d8-72888bf5200b，当前房间总数: 3
Room state saved successfully. Rooms: 3
Removing expired room: 84d9c706-e6c7-4105-9b67-ad5f05fd8e18
已删除房间 84d9c706-e6c7-4105-9b67-ad5f05fd8e18，当前房间总数: 2
Room state saved successfully. Rooms: 2
Removed 2 expired rooms. Remaining rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
玩家 hq 弃掉了第 2 张牌: {'rank': '3', 'suit': 'd', 'display': '3d'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0', 'name': '2121', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3390.607871, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'd', 'display': '3d'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'd', 'display': '3d'}, 'hand': [{'rank': 'J', 'suit': 's', 'display': 'Js'}, {'rank': '8', 'suit': 's', 'display': '8s'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 0, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T19:51:20.468496'}
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: qq
WebSocket disconnected for client: hq
Application stopping...
Rooms at shutdown: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x00000196CA3A50D0>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x00000196CA3B15B0>}
INFO:     Started server process [24328]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
Initializing RoomManager
Creating Room: id=d117a0a5-9e66-49cb-b39e-cd173729ab17, name=fdfd
Room created successfully: id=d117a0a5-9e66-49cb-b39e-cd173729ab17
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, name=2121
Room created successfully: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 2
Room manager cleanup thread started
Main room_manager instance id: 2994007064800
Initial rooms: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x000002B918F6FD70>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x000002B918F98290>}
Application starting...
Rooms at startup: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x000002B918F6FD70>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x000002B918F98290>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-29 19:10:46.187238
INFO:     127.0.0.1:57720 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:57725 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: Cz73MqKC2d0PAUu2/X4OiA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 83qQTGnYPOzkURKdkr5jBA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: N+lDibRWnE1Ix/TK0dIM0g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:57991 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58199 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: gbPxIk6sMMjvU0SymbzBIQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:58314 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58382 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58330 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:57992 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KWBa+iJlP4u5iRortxAxSg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:58388 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: n+DqD1boOU9m5JzoROsX5A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:58178 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 58223) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk" [accepted]
INFO:     ('127.0.0.1', 57729) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk" [accepted]
INFO:     ('127.0.0.1', 58641) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA" [accepted]
INFO:     ('127.0.0.1', 57733) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA" [accepted]
INFO:     ('127.0.0.1', 58634) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4Mzc2OH0.OiLz41R-tfveFo3YwDE64GRua-y-jKzFD-PKMHHQlDk" [accepted]
INFO:     ('127.0.0.1', 58233) - "WebSocket /ws/game/034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4Mzc3NX0.q-l5M6XODymSnVlEkl7gxMjmqNEb7ViS-EPRQ_XkTrA" [accepted]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
Client hq connected
Added hq to room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Client hq connected
Client qq connected
Added qq to room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Client qq connected
Client hq connected
Client qq connected
Error sending message to hq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Error broadcasting to room member qq: no close frame received or sent
Error sending message to hq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: hq
Error broadcasting to room member qq: no close frame received or sent
Error sending message to qq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Error sending message to hq: no close frame received or sent
WebSocket disconnected for client: hq
Error sending message to qq: no close frame received or sent
WebSocket disconnected for client: qq
Error sending message to qq: no close frame received or sent
WebSocket disconnected for client: qq
INFO:     127.0.0.1:57991 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:58199 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:57720 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:57725 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:57720 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:57725 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:57720 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:57725 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:58311 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='sdds' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=sdds, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2994007064800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=eea24e04-b16e-4424-ae4b-f911040622ef, name=sdds
Room created successfully: id=eea24e04-b16e-4424-ae4b-f911040622ef
已创建房间 eea24e04-b16e-4424-ae4b-f911040622ef，房主: hq，当前房间总数: 3
Room state saved successfully. Rooms: 3
房间创建成功, 房间ID: eea24e04-b16e-4424-ae4b-f911040622ef
创建房间成功: {'id': 'eea24e04-b16e-4424-ae4b-f911040622ef', 'name': 'sdds', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:57720 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='hq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
尝试将用户 hq 添加到房间 eea24e04-b16e-4424-ae4b-f911040622ef
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room eea24e04-b16e-4424-ae4b-f911040622ef with no seat assigned
成功: 用户 hq 已加入房间 eea24e04-b16e-4424-ae4b-f911040622ef
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:57720 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='hq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:57720 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='hq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:57720 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTA0N30.e6PQ_Jjfrebq-saX5ozkCYTNFCLlbBtj7QeM78JUtjA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: x3wqzscX3OUC6EVmfou7iQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58818) - "WebSocket /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTA0N30.e6PQ_Jjfrebq-saX5ozkCYTNFCLlbBtj7QeM78JUtjA" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: eKSVtEGhLSOV2w7e1DiVuXPjOkI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:10:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925051.9309924}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTA0N30.e6PQ_Jjfrebq-saX5ozkCYTNFCLlbBtj7QeM78JUtjA HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 6nlNnc8pq5px6GQF2Bhtpw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58820) - "WebSocket /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTA0N30.e6PQ_Jjfrebq-saX5ozkCYTNFCLlbBtj7QeM78JUtjA" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: +c0gmiH8+JkepntnAgLgmRFvGw4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:10:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925051.9647563}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...0622ef","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925052.7599607}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925053.5707812}}' [509 bytes]
Client hq reconnected
Sent pending message to hq: game_state
Sent pending message to hq: game_state
Sent pending message to hq: game_state
Added hq to room eea24e04-b16e-4424-ae4b-f911040622ef
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room eea24e04-b16e-4424-ae4b-f911040622ef: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room eea24e04-b16e-4424-ae4b-f911040622ef: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:58826 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='qq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
尝试将用户 qq 添加到房间 eea24e04-b16e-4424-ae4b-f911040622ef
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room eea24e04-b16e-4424-ae4b-f911040622ef with no seat assigned
成功: 用户 qq 已加入房间 eea24e04-b16e-4424-ae4b-f911040622ef
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:58826 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='qq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:58826 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='eea24e04-b16e-4424-ae4b-f911040622ef' username='qq'
成功找到房间: eea24e04-b16e-4424-ae4b-f911040622ef, 名称: sdds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:58826 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTA0OH0.E1QRHj1Qlgi175vbNSLZKUmKpSTckZjHBwn0j7d84YU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: wrA3eEqWIR+llUbgbgNWwA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58843) - "WebSocket /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTA0OH0.E1QRHj1Qlgi175vbNSLZKUmKpSTckZjHBwn0j7d84YU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7Lv6bZ9WNuJTKVHcTNnY2pE0zOw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:10:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"034139f...:"qq","chips":333.0}]}}' [298 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925058.1624048}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925058.1624048}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTA0OH0.E1QRHj1Qlgi175vbNSLZKUmKpSTckZjHBwn0j7d84YU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 4z/2UGXmVq7CacatH0xJfA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 58845) - "WebSocket /ws/game/eea24e04-b16e-4424-ae4b-f911040622ef?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTA0OH0.E1QRHj1Qlgi175vbNSLZKUmKpSTckZjHBwn0j7d84YU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8nI5gf6nG7l2J3gn56ETu4JUa+M=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:10:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925058.204305}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925058.204305}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...0622ef","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925062.5060465}}' [519 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925062.5060465}}' [519 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925063.5000734}}' [550 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925063.5000734}}' [550 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 24 86 35 [binary, 4 bytes]
DEBUG:    < PONG 29 24 86 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 87 d0 a0 [binary, 4 bytes]
DEBUG:    < PONG 7f 87 d0 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 57 3c f5 [binary, 4 bytes]
DEBUG:    < PONG 97 57 3c f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*z(=' [text, 4 bytes]
DEBUG:    < PONG '*z(=' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925081.9867911}' [46 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...424-ae4b-f911040622ef"}' [93 bytes]
Traceback (most recent call last):
  File "D:\c32poker\src\main.py", line 524, in game_websocket_endpoint
    player_count = len([p for p in updated_state.game.get('players', []) if p.get('is_active', False)])
                                   ^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'game'
DEBUG:    > TEXT '{"type":"error","data":{"message":"Error proces...p":1745925084.5707474}}' [136 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...:"s","display":"5s"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"eea24e0...:"c","display":"5c"}]}}' [1389 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925088.2297716}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1bTZ\x14' [text, 4 bytes]
DEBUG:    < PONG '\x1bTZ\x14' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 82 3f ae [binary, 4 bytes]
DEBUG:    < PONG ef 82 3f ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 c4 d6 74 [binary, 4 bytes]
DEBUG:    < PONG c0 c4 d6 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 55 73 58 [binary, 4 bytes]
DEBUG:    < PONG ab 55 73 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 88 bc 28 [binary, 4 bytes]
DEBUG:    < PONG 36 88 bc 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 76 fe 46 [binary, 4 bytes]
DEBUG:    < PONG 11 76 fe 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925111.9787292}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 71 cc 58 [binary, 4 bytes]
DEBUG:    < PONG 00 71 cc 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 11 b1 82 [binary, 4 bytes]
DEBUG:    < PONG 60 11 b1 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925118.2286386}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 34 a1 c4 [binary, 4 bytes]
DEBUG:    < PONG a8 34 a1 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 be e1 60 [binary, 4 bytes]
DEBUG:    < PONG 51 be e1 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 37 d4 c0 [binary, 4 bytes]
DEBUG:    < PONG 41 37 d4 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 ad d1 14 [binary, 4 bytes]
DEBUG:    < PONG 03 ad d1 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
WARNING:  StatReload detected changes in 'src\main.py'. Reloading...
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925141.9796402}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925148.8319046}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 45 63 42 [binary, 4 bytes]
DEBUG:    < PONG db 45 63 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 42 b2 23 [binary, 4 bytes]
DEBUG:    < PONG d7 42 b2 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f 6b a5 0c [binary, 4 bytes]
DEBUG:    < PONG 4f 6b a5 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 84 a3 87 [binary, 4 bytes]
DEBUG:    < PONG cc 84 a3 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b 7a f8 2a [binary, 4 bytes]
DEBUG:    < PONG 4b 7a f8 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 1d ae f6 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 56 1d ae f6 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925171.9777102}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 95 d6 0e [binary, 4 bytes]
DEBUG:    < PONG b7 95 d6 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 64 fd 88 [binary, 4 bytes]
DEBUG:    < PONG 56 64 fd 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925178.8323088}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925179.3824866}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925179.3824866}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
Client qq reconnected
Sent pending message to qq: game_state
Sent pending message to qq: game_state
Sent pending message to qq: game_state
Added qq to room eea24e04-b16e-4424-ae4b-f911040622ef
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room eea24e04-b16e-4424-ae4b-f911040622ef: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room eea24e04-b16e-4424-ae4b-f911040622ef: Action=buy_in, Player=qq, Result=True
Room state saved successfully. Rooms: 3
Starting game in room eea24e04-b16e-4424-ae4b-f911040622ef
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Qd, 5s, Jd
Dealt cards to player position 7: 5c, 10c, 6d

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745925084.5697207
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-29 20:11:24.569720
Error processing room action: 'dict' object has no attribute 'game'
[DEBUG] Room eea24e04-b16e-4424-ae4b-f911040622ef: Change reason: First update for this room
[BROADCAST][game_update] Room eea24e04-b16e-4424-ae4b-f911040622ef: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 3
处理玩家 1 动作: discard, 金额: 2
玩家 hq 必须先弃掉一张牌
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room eea24e04-b16e-4424-ae4b-f911040622ef
WebSocket disconnected for client: hq
INFO:     127.0.0.1:59067 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room eea24e04-b16e-4424-ae4b-f911040622ef
WebSocket disconnected for client: qq
INFO:     127.0.0.1:59088 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:59070 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59070 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59070 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59091 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59091 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fsddfsfd' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fsddfsfd, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2994007064800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=089042bf-d9e5-4866-b7a4-385ab0d40aa5, name=fsddfsfd
Room created successfully: id=089042bf-d9e5-4866-b7a4-385ab0d40aa5
已创建房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5，房主: hq，当前房间总数: 4
Room state saved successfully. Rooms: 4
房间创建成功, 房间ID: 089042bf-d9e5-4866-b7a4-385ab0d40aa5
创建房间成功: {'id': '089042bf-d9e5-4866-b7a4-385ab0d40aa5', 'name': 'fsddfsfd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:59070 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='hq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
尝试将用户 hq 添加到房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 089042bf-d9e5-4866-b7a4-385ab0d40aa5 with no seat assigned
成功: 用户 hq 已加入房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59070 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='hq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59070 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='hq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59070 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 5QC8Rhw4J5PWYxUiysbnKw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59120) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Y9BL4lJdpYSsDyDaToF57qfcWwU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:13:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [3402 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...ame":"hq","chips":0}]}}' [260 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925191.5912287}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: xFzsA1zO/8naKTskiL19HQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59122) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: zf9bcdYEmrYSve1p4u3Hcr2GLdI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:13:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...ame":"hq","chips":0}]}}' [260 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925191.6212945}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...d40aa5","seat_index":0}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925192.5849612}}' [482 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":0}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925193.3812466}}' [513 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Client hq connected
处理入座请求: 玩家=hq, 座位=0
玩家 hq 已入座在座位 0，同时设置position=0
[BROADCAST][room_update] Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=0
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 0，position=0
[BROADCAST][room_update] Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:59130 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 4

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='qq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
尝试将用户 qq 添加到房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 089042bf-d9e5-4866-b7a4-385ab0d40aa5 with no seat assigned
成功: 用户 qq 已加入房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59130 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='qq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59130 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='qq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59130 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: jytPQjUUOZTAA214DN6d8w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59144) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2KQJHM+IZL2k0p0vDX7i4ymBMog=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:13:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [3404 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...ame":"qq","chips":0}]}}' [301 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745925196.94406}}' [82 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745925196.94406}}' [82 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: dBTR+XMPDy+e7ZAJ1bM+SQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59146) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: vyC40uhYfgjoUjvGZ+Me+34zRho=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:13:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...ame":"qq","chips":0}]}}' [301 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925196.994821}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925196.994821}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...d40aa5","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925197.7966478}}' [523 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925197.7966478}}' [523 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925198.6905012}}' [554 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925198.6905012}}' [554 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...866-b7a4-385ab0d40aa5"}' [93 bytes]
Traceback (most recent call last):
  File "D:\c32poker\src\main.py", line 524, in game_websocket_endpoint
    # Send a room update notification with detailed information
                                       ^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'game'
DEBUG:    > TEXT '{"type":"error","data":{"message":"Error proces...p":1745925201.3534417}}' [136 bytes]
INFO:     Shutting down
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1480 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1480 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"s","display":"2s"}]}}' [1391 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"c","display":"7c"}]}}' [1391 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '#\x18e;' [text, 4 bytes]
DEBUG:    < PONG '#\x18e;' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 92 95 96 [binary, 4 bytes]
DEBUG:    < PONG 58 92 95 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 91 08 b3 [binary, 4 bytes]
DEBUG:    < PONG 5b 91 08 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a a5 40 9d [binary, 4 bytes]
DEBUG:    < PONG 0a a5 40 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925221.6293833}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925226.9994783}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 38 da 5a [binary, 4 bytes]
DEBUG:    < PONG c6 38 da 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 5c 0a d2 [binary, 4 bytes]
DEBUG:    < PONG 21 5c 0a d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 ad 60 1a [binary, 4 bytes]
DEBUG:    < PONG 80 ad 60 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e ea 9a c7 [binary, 4 bytes]
DEBUG:    < PONG 4e ea 9a c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 0e 34 59 [binary, 4 bytes]
DEBUG:    < PONG d8 0e 34 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925251.625041}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 40 68 de [binary, 4 bytes]
DEBUG:    < PONG 6b 40 68 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 6c c5 1c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b 20 13 f6 [binary, 4 bytes]
DEBUG:    < PONG c7 6c c5 1c [binary, 4 bytes]
DEBUG:    < PONG 8b 20 13 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925257.8302226}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 61 44 ca [binary, 4 bytes]
DEBUG:    < PONG 67 61 44 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 9a 25 8c [binary, 4 bytes]
DEBUG:    < PONG eb 9a 25 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 25 22 a1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 95 bb 81 [binary, 4 bytes]
DEBUG:    < PONG bf 25 22 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG dd 95 bb 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925281.6295924}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925287.8325248}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 12 e4 ff [binary, 4 bytes]
DEBUG:    < PONG 62 12 e4 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba c9 da c0 [binary, 4 bytes]
DEBUG:    < PONG ba c9 da c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 8d 70 86 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c f1 7e 7c [binary, 4 bytes]
DEBUG:    < PONG 6b 8d 70 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 4c f1 7e 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 51 af 49 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925311.6247604}' [46 bytes]
DEBUG:    < PONG 70 51 af 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 57 91 3e [binary, 4 bytes]
DEBUG:    < PONG 97 57 91 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae af 7a c1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 8e 16 ae [binary, 4 bytes]
DEBUG:    < PONG ae af 7a c1 [binary, 4 bytes]
DEBUG:    < PONG 3a 8e 16 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925317.832456}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 7f 67 ec [binary, 4 bytes]
DEBUG:    < PONG d8 7f 67 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 f0 21 34 [binary, 4 bytes]
DEBUG:    < PONG f2 f0 21 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING "0y'\x02" [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 12 f5 d0 [binary, 4 bytes]
DEBUG:    < PONG "0y'\x02" [text, 4 bytes]
DEBUG:    < PONG 15 12 f5 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925341.6286051}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 5d b2 9f [binary, 4 bytes]
DEBUG:    < PONG 37 5d b2 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec bd 05 40 [binary, 4 bytes]
DEBUG:    < PONG ec bd 05 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 59 05 cb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 07 d6 31 [binary, 4 bytes]
DEBUG:    < PONG c3 59 05 cb [binary, 4 bytes]
DEBUG:    < PONG 16 07 d6 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925371.6289017}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 60 ed 08 [binary, 4 bytes]
DEBUG:    < PONG 4a 60 ed 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 39 d6 74 [binary, 4 bytes]
DEBUG:    < PONG 11 39 d6 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd ee 4e 61 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a d8 35 4f [binary, 4 bytes]
DEBUG:    < PONG dd ee 4e 61 [binary, 4 bytes]
DEBUG:    < PONG 8a d8 35 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925385.8319814}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 f3 52 91 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 33 52 c6 [binary, 4 bytes]
DEBUG:    < PONG 15 f3 52 91 [binary, 4 bytes]
DEBUG:    < PONG 20 33 52 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a 88 2d de [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '<+\x1a\r' [text, 4 bytes]
DEBUG:    < PONG 7a 88 2d de [binary, 4 bytes]
DEBUG:    < PONG '<+\x1a\r' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925401.6288078}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 08 b2 75 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 71 13 e3 [binary, 4 bytes]
DEBUG:    < PONG 3a 71 13 e3 [binary, 4 bytes]
DEBUG:    < PONG f3 08 b2 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 ee c2 dd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x10D:#' [text, 4 bytes]
DEBUG:    < PONG 77 ee c2 dd [binary, 4 bytes]
DEBUG:    < PONG '\x10D:#' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925424.9839478}' [46 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1570 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1570 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"s","display":"2s"}]}}' [1429 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"h","display":"Jh"}]}}' [1390 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925431.625948}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 96 68 a9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 1e 42 b4 [binary, 4 bytes]
DEBUG:    < PONG df 96 68 a9 [binary, 4 bytes]
DEBUG:    < PONG b9 1e 42 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925436.9987671}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '[\x11R\t' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 4b 46 d3 [binary, 4 bytes]
DEBUG:    < PONG '[\x11R\t' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 20 4b 46 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 df 36 c1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '`-Hv' [text, 4 bytes]
DEBUG:    < PONG 07 df 36 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG '`-Hv' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 16 62 70 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 ff 7f ae [binary, 4 bytes]
DEBUG:    < PONG e6 16 62 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG a5 ff 7f ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925461.6276085}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925467.8291786}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 11 02 b4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 88 c3 a8 [binary, 4 bytes]
DEBUG:    < PONG de 11 02 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 31 88 c3 a8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 95 64 1e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 89 fa 32 [binary, 4 bytes]
DEBUG:    < PONG b2 95 64 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f6 89 fa 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925491.6276665}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 98 df 8c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 ec f1 ba [binary, 4 bytes]
DEBUG:    < PONG 74 98 df 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f8 ec f1 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'v\x1c-r' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 25 3d ba [binary, 4 bytes]
DEBUG:    < PONG 'v\x1c-r' [text, 4 bytes]
DEBUG:    < PONG f6 25 3d ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925505.8295999}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 8f 3b 00 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af f7 fc 3d [binary, 4 bytes]
DEBUG:    < PONG 3e 8f 3b 00 [binary, 4 bytes]
DEBUG:    < PONG af f7 fc 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 2d 74 75 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 5f ef 6d [binary, 4 bytes]
DEBUG:    < PONG eb 2d 74 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 34 5f ef 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925521.6290283}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 45 14 4b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 a7 9d 3c [binary, 4 bytes]
DEBUG:    < PONG f8 45 14 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 06 a7 9d 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925536.1288314}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 b6 92 30 [binary, 4 bytes]
DEBUG:    < PONG 21 b6 92 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e e4 89 2d [binary, 4 bytes]
DEBUG:    < PONG 9e e4 89 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 06 ca a7 [binary, 4 bytes]
DEBUG:    < PONG f5 06 ca a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 63 e4 80 [binary, 4 bytes]
DEBUG:    < PONG 85 63 e4 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 15 a1 9f [binary, 4 bytes]
DEBUG:    < PONG 3e 15 a1 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 0a e2 db [binary, 4 bytes]
DEBUG:    < PONG e1 0a e2 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 a8 79 c5 [binary, 4 bytes]
DEBUG:    < PONG a9 a8 79 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 58 4e e4 [binary, 4 bytes]
DEBUG:    < PONG f3 58 4e e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f da 48 e8 [binary, 4 bytes]
DEBUG:    < PONG 9f da 48 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24328]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5: Action=buy_in, Player=qq, Result=True
Starting game in room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
检查玩家 hq: 位置=0, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 0
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 0, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 0, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 0, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 0: 2s, Jd, 5c
Dealt cards to player position 7: 7c, Jh, Ks

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 0 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 0 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 0)
设置当前玩家为: hq，索引: 0
计时器初始化: 设置时间为 1745925201.3534417
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-29 20:13:21.353441
Error processing room action: 'dict' object has no attribute 'game'
[BROADCAST][game_update] Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 4
处理玩家 0 动作: discard, 金额: 2
玩家 hq 必须先弃掉一张牌
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Checking for expired rooms...
Room d117a0a5-9e66-49cb-b39e-cd173729ab17 will expire in 1.7 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0 will expire in 3.9 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Notified 2 rooms about upcoming expiration. Remaining rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
玩家 qq 弃掉了第 2 张牌: {'rank': '7', 'suit': 'c', 'display': '7c'}
[BROADCAST][game_update]: Action=discard, Player=qq, GameState={'room_id': '089042bf-d9e5-4866-b7a4-385ab0d40aa5', 'name': 'fsddfsfd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3370.320976, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 0, 'seat': 0, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': False}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': True, 'discarded_card': {'rank': '7', 'suit': 'c', 'display': '7c'}}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 0, 'current_player_idx': 0, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 0, 'total_buy_in': 111.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'J', 'suit': 'd', 'display': 'Jd'}, {'rank': '5', 'suit': 'c', 'display': '5c'}, {'rank': '2', 'suit': 's', 'display': '2s'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [0, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 0, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:13:21.353441'}
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Application stopping...
Rooms at shutdown: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x000002B918F6FD70>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x000002B918F98290>, 'eea24e04-b16e-4424-ae4b-f911040622ef': <src.models.room.Room object at 0x000002B9190A2810>, '089042bf-d9e5-4866-b7a4-385ab0d40aa5': <src.models.room.Room object at 0x000002B9190BFB30>}
INFO:     Started server process [25852]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
Initializing RoomManager
Creating Room: id=d117a0a5-9e66-49cb-b39e-cd173729ab17, name=fdfd
Room created successfully: id=d117a0a5-9e66-49cb-b39e-cd173729ab17
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0, name=2121
Room created successfully: id=034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=eea24e04-b16e-4424-ae4b-f911040622ef, name=sdds
Room created successfully: id=eea24e04-b16e-4424-ae4b-f911040622ef
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=089042bf-d9e5-4866-b7a4-385ab0d40aa5, name=fsddfsfd
Room created successfully: id=089042bf-d9e5-4866-b7a4-385ab0d40aa5
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 4
Room manager cleanup thread started
Main room_manager instance id: 2248659158800
Initial rooms: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x0000020B8E87F500>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x0000020B8E87FA70>, 'eea24e04-b16e-4424-ae4b-f911040622ef': <src.models.room.Room object at 0x0000020B8E894050>, '089042bf-d9e5-4866-b7a4-385ab0d40aa5': <src.models.room.Room object at 0x0000020B8E894200>}
Application starting...
Rooms at startup: {'d117a0a5-9e66-49cb-b39e-cd173729ab17': <src.models.room.Room object at 0x0000020B8E87F500>, '034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0': <src.models.room.Room object at 0x0000020B8E87FA70>, 'eea24e04-b16e-4424-ae4b-f911040622ef': <src.models.room.Room object at 0x0000020B8E894050>, '089042bf-d9e5-4866-b7a4-385ab0d40aa5': <src.models.room.Room object at 0x0000020B8E894200>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-29 19:20:21.861414
INFO:     127.0.0.1:59955 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: FyK1QTJ9G7719HL4Ksi/8Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
DEBUG:    < GET /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: K9j27dI3B8KYDhINZO9pqQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='qq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59781 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:59933 - "GET /api/users/profile HTTP/1.1" 403 Forbidden

===== 加入房间请求开始 =====
请求数据: room_id='089042bf-d9e5-4866-b7a4-385ab0d40aa5' username='hq'
成功找到房间: 089042bf-d9e5-4866-b7a4-385ab0d40aa5, 名称: fsddfsfd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59776 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 59791) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTE4OX0.SE1mJrldj4jd8sYKx-y6xGyBogQUebcace3Qmc8Y030" [accepted]
INFO:     ('127.0.0.1', 59786) - "WebSocket /ws/game/089042bf-d9e5-4866-b7a4-385ab0d40aa5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTE4NX0.C4RvCFSNHVD3rINQ6vEb1e_ot9lJeyRfb1pJBneu89o" [accepted]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client qq connected
Added qq to room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Client hq connected
Added hq to room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Error sending message to hq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
Error broadcasting to room member qq: no close frame received or sent
Error sending message to qq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 089042bf-d9e5-4866-b7a4-385ab0d40aa5
INFO:     127.0.0.1:59933 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59933 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='sadsad' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=sadsad, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=0d281117-d6ad-4972-b7a3-969997976163, name=sadsad
Room created successfully: id=0d281117-d6ad-4972-b7a3-969997976163
已创建房间 0d281117-d6ad-4972-b7a3-969997976163，房主: hq，当前房间总数: 5
Room state saved successfully. Rooms: 5
房间创建成功, 房间ID: 0d281117-d6ad-4972-b7a3-969997976163
创建房间成功: {'id': '0d281117-d6ad-4972-b7a3-969997976163', 'name': 'sadsad', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:59933 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
尝试将用户 hq 添加到房间 0d281117-d6ad-4972-b7a3-969997976163
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 0d281117-d6ad-4972-b7a3-969997976163 with no seat assigned
成功: 用户 hq 已加入房间 0d281117-d6ad-4972-b7a3-969997976163
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59933 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59933 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59933 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: flb4uO8qMH2xTpwNKJ/Fag==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59975) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: wICkis3zTkvbYB3hmiqhp6/8K4E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:20:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"qq","chips":333.0}]}}' [302 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925625.5386424}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KdwkfM9Y3iRrqh2QPWXWFA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59977) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rd5iPPy3Qw2ZzgUZsUUvk4a2TI8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:20:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925625.569925}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...976163","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925626.0263357}}' [480 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745925626.819311}}' [510 bytes]
Client hq reconnected
Sent pending message to hq: game_state
Added hq to room 0d281117-d6ad-4972-b7a3-969997976163
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:59958 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59958 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59958 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='qq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
尝试将用户 qq 添加到房间 0d281117-d6ad-4972-b7a3-969997976163
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 0d281117-d6ad-4972-b7a3-969997976163 with no seat assigned
成功: 用户 qq 已加入房间 0d281117-d6ad-4972-b7a3-969997976163
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59958 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='qq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59958 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='qq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59958 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: ExfbZDrs096HZgGk78hF+A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60001) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FV7SMHaVm2ql2oYGIYjnbecdZQU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:20:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"089042b...:"qq","chips":333.0}]}}' [302 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925631.4254656}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925631.4254656}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: RC5bBRTlHeJXJRAmut0DGA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60003) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Tsp81uoMTej3mMN/4bqylQEi494=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:20:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925631.461204}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925631.461204}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...976163","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745925633.821007}}' [520 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745925633.821007}}' [520 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...unt":33,"seat_index":7}' [116 bytes]
DEBUG:    > TEXT '{"type":"error","data":{"message":"\\u4e70\\u51...p":1745925634.9551692}}' [123 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925636.5496554}}' [552 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925636.5496554}}' [552 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...972-b7a3-969997976163"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745925639.2557793}}' [1454 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745925639.2557793}}' [1454 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1478 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1478 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"h","display":"3h"}]}}' [1389 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"h","display":"2h"}]}}' [1391 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 ee 07 f0 [binary, 4 bytes]
DEBUG:    < PONG f7 ee 07 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 37 ea 44 [binary, 4 bytes]
DEBUG:    < PONG 17 37 ea 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 11 fd e7 [binary, 4 bytes]
DEBUG:    < PONG 52 11 fd e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'ЛQ$' [text, 4 bytes]
DEBUG:    < PONG 'ЛQ$' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":1}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1579 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1579 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"h","display":"3h"}]}}' [1398 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"h","display":"2h"}]}}' [1439 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925655.5783777}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925661.498201}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 6c 3c 9f [binary, 4 bytes]
DEBUG:    < PONG ac 6c 3c 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 13 d7 38 [binary, 4 bytes]
DEBUG:    < PONG 09 13 d7 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 ac c9 06 [binary, 4 bytes]
DEBUG:    < PONG 83 ac c9 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 77 d1 66 [binary, 4 bytes]
DEBUG:    < PONG fd 77 d1 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1463 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1463 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"d","display":"6d"}]}}' [1374 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"s","display":"2s"}]}}' [1372 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a e6 07 bc [binary, 4 bytes]
DEBUG:    < PONG 2a e6 07 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 3d a7 d6 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 51 3d a7 d6 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925685.5756636}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 a6 61 cc [binary, 4 bytes]
DEBUG:    < PONG e6 a6 61 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe cb a4 c8 [binary, 4 bytes]
DEBUG:    < PONG fe cb a4 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925691.4950287}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c c7 1d bf [binary, 4 bytes]
DEBUG:    < PONG 7c c7 1d bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 54 45 f4 [binary, 4 bytes]
DEBUG:    < PONG 04 54 45 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 80 4f 7b [binary, 4 bytes]
DEBUG:    < PONG a5 80 4f 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb f7 36 27 [binary, 4 bytes]
DEBUG:    < PONG eb f7 36 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925715.5771327}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925721.8391757}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 98 b9 5d [binary, 4 bytes]
DEBUG:    < PONG 60 98 b9 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 e5 13 72 [binary, 4 bytes]
DEBUG:    < PONG 08 e5 13 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bb 5a 99 87 [binary, 4 bytes]
DEBUG:    < PONG bb 5a 99 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '/' [text, 4 bytes]
DEBUG:    < PONG '/' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 cb 99 a5 [binary, 4 bytes]
DEBUG:    < PONG 03 cb 99 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 eb 3f ae [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925745.5785642}' [46 bytes]
DEBUG:    < PONG 95 eb 3f ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 57 92 53 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 e7 d8 b9 [binary, 4 bytes]
DEBUG:    < PONG 90 57 92 53 [binary, 4 bytes]
DEBUG:    < PONG 03 e7 d8 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925751.841002}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 18 7c 96 [binary, 4 bytes]
DEBUG:    < PONG 79 18 7c 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 25 3a fe [binary, 4 bytes]
DEBUG:    < PONG 8d 25 3a fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x18+*K' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 00 e9 e0 [binary, 4 bytes]
DEBUG:    < PONG '\x18+*K' [text, 4 bytes]
DEBUG:    < PONG 94 00 e9 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925775.5716538}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc e6 32 00 [binary, 4 bytes]
DEBUG:    < PONG cc e6 32 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 06 04 ee [binary, 4 bytes]
DEBUG:    < PONG 7c 06 04 ee [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d ec f8 44 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 6a ac 31 [binary, 4 bytes]
DEBUG:    < PONG 4d ec f8 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ff 6a ac 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 69 76 e1 [binary, 4 bytes]
DEBUG:    < PONG 30 69 76 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 2c 22 e5 [binary, 4 bytes]
DEBUG:    < PONG 28 2c 22 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925805.5644658}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925805.827349}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 a6 ce 43 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 00 52 f7 [binary, 4 bytes]
DEBUG:    < PONG a7 00 52 f7 [binary, 4 bytes]
DEBUG:    < PONG 56 a6 ce 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745925822.591155}}' [86 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent pending message to qq: game_state
Added qq to room 0d281117-d6ad-4972-b7a3-969997976163
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=33.0, 座位=7
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Action=buy_in, Player=qq, Result=True
Starting game in room 0d281117-d6ad-4972-b7a3-969997976163
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 5c, Jd, 3h
Dealt cards to player position 7: 6c, 10c, 2h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745925639.2557793
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-29 20:20:39.255779
[BROADCAST][room_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 1 张牌: {'rank': '5', 'suit': 'c', 'display': '5c'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '0d281117-d6ad-4972-b7a3-969997976163', 'name': 'sadsad', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3587.775327, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '5', 'suit': 'c', 'display': '5c'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '5', 'suit': 'c', 'display': '5c'}, 'hand': [{'rank': 'J', 'suit': 'd', 'display': 'Jd'}, {'rank': '3', 'suit': 'h', 'display': '3h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 17.77532696723938, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:20:39.255779'}
Room state saved successfully. Rooms: 5
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 6d, 10c, 8s
Dealt cards to player position 7: Ks, 2s, Kd

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[BROADCAST][game_update] Room 0d281117-d6ad-4972-b7a3-969997976163: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 5
处理玩家 7 动作: discard, 金额: 0
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 0d281117-d6ad-4972-b7a3-969997976163
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 0d281117-d6ad-4972-b7a3-969997976163
INFO:     127.0.0.1:60295 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60295 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: jSJJQ+Txs2FKZhRasERX9w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:60303 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 60302) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gc3CFBUUD4S9185pXzm2OHboYas=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:23:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4281 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"d","display":"6d"}]}}' [1374 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925823.244111}}' [83 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 0d281117-d6ad-4972-b7a3-969997976163

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='qq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60303 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: COiDK9a7DdJf+sW+wSvxQw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60308) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: LDZ/kAE2lgp7h9pNJj1NeOHmFRU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:23:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4279 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"s","display":"2s"}]}}' [1372 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925823.5691307}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925823.5691307}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 4d 7d f2 [binary, 4 bytes]
DEBUG:    < PONG 2e 4d 7d f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 ea eb 98 [binary, 4 bytes]
DEBUG:    < PONG d7 ea eb 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925836.4438894}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 0d281117-d6ad-4972-b7a3-969997976163
Room state saved successfully. Rooms: 5
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 0d281117-d6ad-4972-b7a3-969997976163

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60299 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='hq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60299 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KIdN5nsDCk2OT3XWqE+/DQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60347) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jclmJmEzwBWA9ogWDQReQbG+Y+g=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:23:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4281 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"d","display":"6d"}]}}' [1373 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925836.8126702}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925836.8126702}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: q6VNeYWp7aPVYJiMbZvQ/g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60351) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTYyM30.A9LEVnyjQ-0XCngjfN8c4RLHJigyS78Kzjbo2jiaYmM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8Nm4nlXLB1OdA4XnePLagb6wIAg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:23:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"d","display":"6d"}]}}' [1374 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925836.905182}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925836.905182}}' [83 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...amp":1745925836.94988}}' [85 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 0d281117-d6ad-4972-b7a3-969997976163
Client hq connected
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 0d281117-d6ad-4972-b7a3-969997976163

===== 加入房间请求开始 =====
请求数据: room_id='0d281117-d6ad-4972-b7a3-969997976163' username='qq'
成功找到房间: 0d281117-d6ad-4972-b7a3-969997976163, 名称: sadsad
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60306 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Ly2OOiD1nr1ukyH2BeT3yA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60353) - "WebSocket /ws/game/0d281117-d6ad-4972-b7a3-969997976163?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTYyOH0.6CaAHz0cOs-owMgwyyLQflPSTsahnKIebkOuxfClWPY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: nPusTZ+8jEbaqyXoOTpzHuDBs7c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:23:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4279 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0d28111...:"s","display":"2s"}]}}' [1372 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925837.374105}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925837.374105}}' [83 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925843.5967495}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925843.5988555}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925843.5988555}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 0d281117-d6ad-4972-b7a3-969997976163
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 0d281117-d6ad-4972-b7a3-969997976163
WebSocket disconnected for client: hq
WebSocket disconnected for client: hq
INFO:     127.0.0.1:60301 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:60301 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 0d281117-d6ad-4972-b7a3-969997976163
WebSocket disconnected for client: qq
INFO:     127.0.0.1:60307 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:60307 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:60301 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60301 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60301 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60301 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60301 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fdsd' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fdsd, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=98864112-d748-413a-a015-1c9483793f2e, name=fdsd
Room created successfully: id=98864112-d748-413a-a015-1c9483793f2e
已创建房间 98864112-d748-413a-a015-1c9483793f2e，房主: hq，当前房间总数: 6
Room state saved successfully. Rooms: 6
房间创建成功, 房间ID: 98864112-d748-413a-a015-1c9483793f2e
创建房间成功: {'id': '98864112-d748-413a-a015-1c9483793f2e', 'name': 'fdsd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:60399 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='hq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
尝试将用户 hq 添加到房间 98864112-d748-413a-a015-1c9483793f2e
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 98864112-d748-413a-a015-1c9483793f2e with no seat assigned
成功: 用户 hq 已加入房间 98864112-d748-413a-a015-1c9483793f2e
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60399 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='hq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60399 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='hq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60399 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: HA0gxfzyo6S1TiP5QfozTw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60412) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qW6/eyHVPldzpb7JUQJHkOQYDVc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:24:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4281 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925851.8213193}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: +uBk4bCnsJEj6/z2lUeO+g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60414) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bupFpf9GsXKHveQCSV3U8NWJ2dc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:24:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925851.8543234}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...793f2e","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925852.9782412}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925854.0171998}}' [509 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 98864112-d748-413a-a015-1c9483793f2e
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 98864112-d748-413a-a015-1c9483793f2e: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 98864112-d748-413a-a015-1c9483793f2e: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:60422 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60422 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60422 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60422 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60422 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='qq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
尝试将用户 qq 添加到房间 98864112-d748-413a-a015-1c9483793f2e
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 98864112-d748-413a-a015-1c9483793f2e with no seat assigned
成功: 用户 qq 已加入房间 98864112-d748-413a-a015-1c9483793f2e
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60422 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='qq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60422 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='qq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60422 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: leWoSgxzMlIl/ojoYQVmzA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60444) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: KecU0RbwKn6TtThq7S76i6EbDnA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:24:18 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4279 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925859.028255}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925859.028255}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: YSd9CwYWUHhIzU3J+cJA2A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60447) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fPQ9eFJTqfAYsFhh10OIZBDM0+4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:24:18 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925859.061502}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745925859.061502}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...793f2e","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925859.6226122}}' [519 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925859.6226122}}' [519 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925860.5739996}}' [550 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745925860.5739996}}' [550 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...13a-a015-1c9483793f2e"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745925862.6873224}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745925862.6873224}}' [1452 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"s","display":"3s"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"h","display":"2h"}]}}' [1387 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1581 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1581 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"c","display":"7c"}]}}' [1401 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"h","display":"2h"}]}}' [1440 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 26 60 bb [binary, 4 bytes]
DEBUG:    < PONG fb 26 60 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa ae 5b e0 [binary, 4 bytes]
DEBUG:    < PONG aa ae 5b e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '"\x0c\x1b3' [text, 4 bytes]
DEBUG:    < PONG '"\x0c\x1b3' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 93 4c 1e [binary, 4 bytes]
DEBUG:    < PONG 11 93 4c 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925881.8773427}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925889.1910431}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 4a b1 5e [binary, 4 bytes]
DEBUG:    < PONG 87 4a b1 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 34 73 c3 [binary, 4 bytes]
DEBUG:    < PONG 78 34 73 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 ba 7e f9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 e5 62 32 [binary, 4 bytes]
DEBUG:    < PONG a4 ba 7e f9 [binary, 4 bytes]
DEBUG:    < PONG 80 e5 62 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 41 1c 91 [binary, 4 bytes]
DEBUG:    < PONG 5d 41 1c 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb 45 24 1b [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG fb 45 24 1b [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925911.8661995}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 dc 52 8b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 fb 69 e7 [binary, 4 bytes]
DEBUG:    < PONG 91 fb 69 e7 [binary, 4 bytes]
DEBUG:    < PONG d2 dc 52 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925919.8303308}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 7d 95 b7 [binary, 4 bytes]
DEBUG:    < PONG 11 7d 95 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 33 75 2f [binary, 4 bytes]
DEBUG:    < PONG b7 33 75 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 87 29 fe [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 7d b0 b9 [binary, 4 bytes]
DEBUG:    < PONG d2 87 29 fe [binary, 4 bytes]
DEBUG:    < PONG da 7d b0 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925941.8633575}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925949.828419}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING df bf 9f 1c [binary, 4 bytes]
DEBUG:    < PONG df bf 9f 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '$\x18e\x14' [text, 4 bytes]
DEBUG:    < PONG '$\x18e\x14' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 76 04 7c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 f3 a2 70 [binary, 4 bytes]
DEBUG:    < PONG 86 f3 a2 70 [binary, 4 bytes]
DEBUG:    < PONG b0 76 04 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 81 44 84 [binary, 4 bytes]
DEBUG:    < PONG 2e 81 44 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 97 84 c9 [binary, 4 bytes]
DEBUG:    < PONG e1 97 84 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925971.8737583}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f a5 ca fd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 37 da 3a [binary, 4 bytes]
DEBUG:    < PONG 5f a5 ca fd [binary, 4 bytes]
DEBUG:    < PONG 14 37 da 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745925979.8291264}' [46 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745925981.902869}}' [86 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 98864112-d748-413a-a015-1c9483793f2e
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 98864112-d748-413a-a015-1c9483793f2e: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 98864112-d748-413a-a015-1c9483793f2e: Action=buy_in, Player=qq, Result=True
Room state saved successfully. Rooms: 6
Starting game in room 98864112-d748-413a-a015-1c9483793f2e
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 7c, 3s, Jh
Dealt cards to player position 7: 6s, 4h, 2h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745925862.6873224
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 20:24:22.687322
[BROADCAST][room_update] Room 98864112-d748-413a-a015-1c9483793f2e: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 98864112-d748-413a-a015-1c9483793f2e: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '3', 'suit': 's', 'display': '3s'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '98864112-d748-413a-a015-1c9483793f2e', 'name': 'fdsd', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3592.88174, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 's', 'display': '3s'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': '6', 'suit': 's', 'display': '6s'}, {'rank': '4', 'suit': 'h', 'display': '4h'}, {'rank': '2', 'suit': 'h', 'display': '2h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 22.88174033164978, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:24:22.687322'}
Room state saved successfully. Rooms: 6
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Checking for expired rooms...
Room d117a0a5-9e66-49cb-b39e-cd173729ab17 has expired after 37.9 minutes of inactivity
Room d117a0a5-9e66-49cb-b39e-cd173729ab17 has been idle for 37.9 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0 has expired after 35.7 minutes of inactivity
Room 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0 has been idle for 35.7 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: d117a0a5-9e66-49cb-b39e-cd173729ab17
已删除房间 d117a0a5-9e66-49cb-b39e-cd173729ab17，当前房间总数: 5
Room state saved successfully. Rooms: 5
Removing expired room: 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0
已删除房间 034139f7-dfaa-4048-8c7c-0bdf1ca6c0a0，当前房间总数: 4
Room state saved successfully. Rooms: 4
Removed 2 expired rooms. Remaining rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 98864112-d748-413a-a015-1c9483793f2e

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='hq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60619 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: u65VMvfDPH7ofXE/YlZkjA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60622) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTg0N30.iU-lrG3MdENNMA8B_XU02Zq38muPW9tz8AqGLyKfgwg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: qsAIXmS0TjAnGg0/46VaV4Ru79c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:21 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4424 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"c","display":"7c"}]}}' [1386 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925982.5508566}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925982.5508566}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925982.9059675}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 98864112-d748-413a-a015-1c9483793f2e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 98864112-d748-413a-a015-1c9483793f2e

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='qq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60629 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 5nBbLh8WgOCBVub9i0emEg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60632) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2+aPQeoDKaE0FTJkxQjvlapyanU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4463 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"h","display":"2h"}]}}' [1424 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925983.5493128}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925983.5493128}}' [84 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925991.4597423}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
INFO:     connection closed
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745925991.4625907}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 98864112-d748-413a-a015-1c9483793f2e
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 98864112-d748-413a-a015-1c9483793f2e
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 98864112-d748-413a-a015-1c9483793f2e

===== 加入房间请求开始 =====
请求数据: room_id='98864112-d748-413a-a015-1c9483793f2e' username='qq'
成功找到房间: 98864112-d748-413a-a015-1c9483793f2e, 名称: fdsd
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60631 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: QJbT6PKwAt0PMmm9vv/oWA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60659) - "WebSocket /ws/game/98864112-d748-413a-a015-1c9483793f2e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NTg1Nn0.qdh6nHvC3HYcdA-tCM07ra_hV9dXTL1JvQZYco3WSDk" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4biL10Ia2Xtd3SGpJP1Pi4A2ykA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4447 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9886411...:"h","display":"2h"}]}}' [1425 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925992.2464368}}' [84 bytes]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 98864112-d748-413a-a015-1c9483793f2e
INFO:     127.0.0.1:60621 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 98864112-d748-413a-a015-1c9483793f2e
WebSocket disconnected for client: qq
INFO:     127.0.0.1:60631 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:60621 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60621 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60621 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='cbvvbc' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=cbvvbc, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=352c8ffe-e3ce-4b28-aafd-c796de267aa3, name=cbvvbc
Room created successfully: id=352c8ffe-e3ce-4b28-aafd-c796de267aa3
已创建房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3，房主: hq，当前房间总数: 5
Room state saved successfully. Rooms: 5
房间创建成功, 房间ID: 352c8ffe-e3ce-4b28-aafd-c796de267aa3
创建房间成功: {'id': '352c8ffe-e3ce-4b28-aafd-c796de267aa3', 'name': 'cbvvbc', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:60621 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='hq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
尝试将用户 hq 添加到房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 352c8ffe-e3ce-4b28-aafd-c796de267aa3 with no seat assigned
成功: 用户 hq 已加入房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60621 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='hq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60621 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='hq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60621 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: nJI6WSj0derEvjsY7j5wIw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60702) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Er4xRNpxh1qKk5svqSyme31FpSA=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4409 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925998.9792647}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: iWZHgEdMP1FfKAPn8QOLhA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60705) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: T2aMstf0wnip6KRC4XkhOX5hHp8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:38 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745925999.0113373}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...267aa3","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745925999.5416772}}' [480 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926000.3444064}}' [511 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:60710 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60710 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60710 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='qq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
尝试将用户 qq 添加到房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 352c8ffe-e3ce-4b28-aafd-c796de267aa3 with no seat assigned
成功: 用户 qq 已加入房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60710 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='qq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60710 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='qq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60710 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: nwWtF0AsNsW3JFI94K1VSA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60731) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: yx7Fo0Pxv4tjELLSvNhRNWRAcGk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4448 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926004.612469}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926004.612469}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: QwyDVfVRTYv0GYtVw4f01Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60733) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fALkHyXh/CznVRb6QRxgN6rCtYw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:26:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926004.6531255}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926004.6531255}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...267aa3","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926005.068071}}' [520 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926005.068071}}' [520 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745926005.967454}}' [551 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745926005.967454}}' [551 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...b28-aafd-c796de267aa3"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745926008.133561}}' [1453 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745926008.133561}}' [1453 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"h","display":"Jh"}]}}' [1389 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"h","display":"3h"}]}}' [1389 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 29 de d7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 46 1b 24 [binary, 4 bytes]
DEBUG:    < PONG 83 29 de d7 [binary, 4 bytes]
DEBUG:    < PONG 82 46 1b 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1585 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1585 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"d","display":"Kd"}]}}' [1404 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"h","display":"3h"}]}}' [1443 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 ee 7d 2a [binary, 4 bytes]
DEBUG:    < PONG f6 ee 7d 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 81 b4 6f [binary, 4 bytes]
DEBUG:    < PONG 54 81 b4 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926029.0162222}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926034.6772194}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc fe 7e 7c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 de 8a 00 [binary, 4 bytes]
DEBUG:    < PONG bc fe 7e 7c [binary, 4 bytes]
DEBUG:    < PONG a9 de 8a 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 7a 66 d5 [binary, 4 bytes]
DEBUG:    < PONG 15 7a 66 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 1d 66 df [binary, 4 bytes]
DEBUG:    < PONG d8 1d 66 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af bd 86 eb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 f0 15 2d [binary, 4 bytes]
DEBUG:    < PONG af bd 86 eb [binary, 4 bytes]
DEBUG:    < PONG 19 f0 15 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926059.0221145}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 9b 71 5c [binary, 4 bytes]
DEBUG:    < PONG b0 9b 71 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 f0 e5 d5 [binary, 4 bytes]
DEBUG:    < PONG a7 f0 e5 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926064.8313315}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 8b a6 13 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING be b3 ae 41 [binary, 4 bytes]
DEBUG:    < PONG 52 8b a6 13 [binary, 4 bytes]
DEBUG:    < PONG be b3 ae 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 33 eb 47 [binary, 4 bytes]
DEBUG:    < PONG 68 33 eb 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 b5 0b 99 [binary, 4 bytes]
DEBUG:    < PONG c7 b5 0b 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926089.0173547}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926094.8400927}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 1d 4e c8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 a0 cb a6 [binary, 4 bytes]
DEBUG:    < PONG 6f 1d 4e c8 [binary, 4 bytes]
DEBUG:    < PONG 31 a0 cb a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f cb 7d b1 [binary, 4 bytes]
DEBUG:    < PONG 8f cb 7d b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 ef 4b 69 [binary, 4 bytes]
DEBUG:    < PONG b9 ef 4b 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926112.6784716}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Action=buy_in, Player=qq, Result=True
Starting game in room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Kd, Kc, Jh
Dealt cards to player position 7: Qc, 7h, 3h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745926008.133561
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 20:26:48.133560
[BROADCAST][room_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 5
玩家 hq 弃掉了第 2 张牌: {'rank': 'J', 'suit': 'h', 'display': 'Jh'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '352c8ffe-e3ce-4b28-aafd-c796de267aa3', 'name': 'cbvvbc', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3588.497354, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': 'J', 'suit': 'h', 'display': 'Jh'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'Q', 'suit': 'c', 'display': 'Qc'}, {'rank': '7', 'suit': 'h', 'display': '7h'}, {'rank': '3', 'suit': 'h', 'display': '3h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 18.49735426902771, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:26:48.133560'}
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 352c8ffe-e3ce-4b28-aafd-c796de267aa3

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='hq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60881 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='352c8ffe-e3ce-4b28-aafd-c796de267aa3' username='qq'
成功找到房间: 352c8ffe-e3ce-4b28-aafd-c796de267aa3, 名称: cbvvbc
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60884 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: sgeaWONHkK8EEwkt55NkTg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60887) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NTk5NX0.9XdXDEOBLGYyr3haKxLKTYG7-rCwlKjcNsXPAHBwApY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: PHUMXDMcYr6xfVz5y4i3GvJce8A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:28:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4432 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"d","display":"Kd"}]}}' [1388 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926113.3240974}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: XOD1uiQ6OgCNqsgawYrEtA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60889) - "WebSocket /ws/game/352c8ffe-e3ce-4b28-aafd-c796de267aa3?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjAwMX0.iC7BxLF5asrsHVuzAvAC4ixAFEIeQ8e8DMqHmJMUrQY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Y5TeKFLWleGheYb5m7Q0pRgWk/U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:28:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4471 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"352c8ff...:"h","display":"3h"}]}}' [1427 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926113.5667865}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926113.5667865}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 38 a2 d0 [binary, 4 bytes]
DEBUG:    < PONG b0 38 a2 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 4c f7 4f [binary, 4 bytes]
DEBUG:    < PONG ca 4c f7 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926130.6308107}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926130.6308107}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
Client qq reconnected
Sent reconnect state to qq
Added qq to room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
WebSocket disconnected for client: hq
INFO:     127.0.0.1:60886 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Room state saved successfully. Rooms: 5
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 352c8ffe-e3ce-4b28-aafd-c796de267aa3
WebSocket disconnected for client: qq
INFO:     127.0.0.1:60888 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:60886 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60886 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='jgrt' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=jgrt, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=b8e2f51f-a82b-42e1-815a-a56466f715c5, name=jgrt
Room created successfully: id=b8e2f51f-a82b-42e1-815a-a56466f715c5
已创建房间 b8e2f51f-a82b-42e1-815a-a56466f715c5，房主: hq，当前房间总数: 6
Room state saved successfully. Rooms: 6
房间创建成功, 房间ID: b8e2f51f-a82b-42e1-815a-a56466f715c5
创建房间成功: {'id': 'b8e2f51f-a82b-42e1-815a-a56466f715c5', 'name': 'jgrt', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:60886 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='hq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
尝试将用户 hq 添加到房间 b8e2f51f-a82b-42e1-815a-a56466f715c5
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room b8e2f51f-a82b-42e1-815a-a56466f715c5 with no seat assigned
成功: 用户 hq 已加入房间 b8e2f51f-a82b-42e1-815a-a56466f715c5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60886 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='hq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60886 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='hq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60886 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjEzNH0.wlg5B6S1mXfnbLPdCkz-wqs-VMBaMTC2lxwgCIh-tBs HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: sW4LaFwdsfQ+Y4xp1jNVjQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60986) - "WebSocket /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjEzNH0.wlg5B6S1mXfnbLPdCkz-wqs-VMBaMTC2lxwgCIh-tBs" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gzjcj/7bKxlw3pirotQFTt/r/rI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:28:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4416 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926136.6337454}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjEzNH0.wlg5B6S1mXfnbLPdCkz-wqs-VMBaMTC2lxwgCIh-tBs HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: bmaGYo+V3xMEXrxvCh2ljA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60990) - "WebSocket /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjEzNH0.wlg5B6S1mXfnbLPdCkz-wqs-VMBaMTC2lxwgCIh-tBs" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: I1ifDYPoUb5c8TnMrdsxvPXRGDI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:28:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926136.664853}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...f715c5","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745926137.1576834}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926138.0124571}}' [509 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room b8e2f51f-a82b-42e1-815a-a56466f715c5
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:60999 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60999 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60999 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='qq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
尝试将用户 qq 添加到房间 b8e2f51f-a82b-42e1-815a-a56466f715c5
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room b8e2f51f-a82b-42e1-815a-a56466f715c5 with no seat assigned
成功: 用户 qq 已加入房间 b8e2f51f-a82b-42e1-815a-a56466f715c5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60999 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='qq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60999 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b8e2f51f-a82b-42e1-815a-a56466f715c5' username='qq'
成功找到房间: b8e2f51f-a82b-42e1-815a-a56466f715c5, 名称: jgrt
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60999 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjEzOX0.Lbpwo63FSs4FvhZuUXY32I7hWEonRCvLyO55U3JADCs HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: z4KR4MHxR7b8UMgCgAtskA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61025) - "WebSocket /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjEzOX0.Lbpwo63FSs4FvhZuUXY32I7hWEonRCvLyO55U3JADCs" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: +IsJPvvXalsAZr4/6AoLLw5Mlmk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:29:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4455 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926141.9624407}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926141.9624407}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjEzOX0.Lbpwo63FSs4FvhZuUXY32I7hWEonRCvLyO55U3JADCs HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: lTqwOKUyPx+r+w+xHqFvyw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61027) - "WebSocket /ws/game/b8e2f51f-a82b-42e1-815a-a56466f715c5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjEzOX0.Lbpwo63FSs4FvhZuUXY32I7hWEonRCvLyO55U3JADCs" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 73AfZzxzXWkJphhEeab7kfScSZQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:29:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926142.003462}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926142.003462}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...f715c5","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926142.349661}}' [518 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926142.349661}}' [518 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926143.2500324}}' [550 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926143.2500324}}' [550 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...2e1-815a-a56466f715c5"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745926144.6346686}}' [1471 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745926144.6346686}}' [1471 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...:"d","display":"4d"}]}}' [1386 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...:"h","display":"3h"}]}}' [1386 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":0}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1583 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1583 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...:"d","display":"4d"}]}}' [1402 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b8e2f51...:"h","display":"3h"}]}}' [1441 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d ce 95 ba [binary, 4 bytes]
DEBUG:    < PONG 3d ce 95 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 80 62 a9 [binary, 4 bytes]
DEBUG:    < PONG 69 80 62 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 dc f6 fe [binary, 4 bytes]
DEBUG:    < PONG b8 dc f6 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f f6 0f 45 [binary, 4 bytes]
DEBUG:    < PONG 2f f6 0f 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926166.6949842}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926172.106158}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 82 81 a5 [binary, 4 bytes]
DEBUG:    < PONG 7e 82 81 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 6f c8 7f [binary, 4 bytes]
DEBUG:    < PONG 37 6f c8 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 35 e5 ba [binary, 4 bytes]
DEBUG:    < PONG d7 35 e5 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'O\x0f\r(' [text, 4 bytes]
DEBUG:    < PONG 'O\x0f\r(' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926193.7386322}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926193.7386322}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room b8e2f51f-a82b-42e1-815a-a56466f715c5
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Action=buy_in, Player=qq, Result=True
Starting game in room b8e2f51f-a82b-42e1-815a-a56466f715c5
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Ks, 6d, 4d
Dealt cards to player position 7: 5h, 3h, 9s

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745926144.6336217
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 20:29:04.634133
[BROADCAST][room_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room b8e2f51f-a82b-42e1-815a-a56466f715c5: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 0 张牌: {'rank': 'K', 'suit': 's', 'display': 'Ks'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': 'b8e2f51f-a82b-42e1-815a-a56466f715c5', 'name': 'jgrt', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3592.978231, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': 'K', 'suit': 's', 'display': 'Ks'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': '9', 'suit': 's', 'display': '9s'}, {'rank': '5', 'suit': 'h', 'display': '5h'}, {'rank': '3', 'suit': 'h', 'display': '3h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 22.97771954536438, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:29:04.634133'}
Room state saved successfully. Rooms: 6
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 6
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room b8e2f51f-a82b-42e1-815a-a56466f715c5
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room b8e2f51f-a82b-42e1-815a-a56466f715c5
WebSocket disconnected for client: qq
INFO:     127.0.0.1:61006 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:61180 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:61187 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61187 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:61245 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61245 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fdsdfs' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fdsdfs, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=dd51df4b-7baf-4c13-8446-855d03ab1f0f, name=fdsdfs
Room created successfully: id=dd51df4b-7baf-4c13-8446-855d03ab1f0f
已创建房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f，房主: hq，当前房间总数: 7
Room state saved successfully. Rooms: 7
房间创建成功, 房间ID: dd51df4b-7baf-4c13-8446-855d03ab1f0f
创建房间成功: {'id': 'dd51df4b-7baf-4c13-8446-855d03ab1f0f', 'name': 'fdsdfs', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:61187 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='hq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
尝试将用户 hq 添加到房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room dd51df4b-7baf-4c13-8446-855d03ab1f0f with no seat assigned
成功: 用户 hq 已加入房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:61187 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='hq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61187 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='hq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61187 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: QMmZJv5LVWNo1G9mXCjRAg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61264) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: jBMxOLELJmzNsFssVh86bAXGDwU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:30:14 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4446 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926214.7272308}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: kjCalt3l5qdFcJWMKTQV7Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61266) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rMWLHJGjnVwXc91SmPhhYty5fo8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:30:14 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926214.7891285}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...ab1f0f","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926215.299922}}' [479 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926216.2769485}}' [511 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:61248 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:61248 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='qq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
尝试将用户 qq 添加到房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room dd51df4b-7baf-4c13-8446-855d03ab1f0f with no seat assigned
成功: 用户 qq 已加入房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:61248 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='qq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61248 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='qq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61248 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: bZ4DDljJQxbq8JFn4Ps1fg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61296) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lkDJVQuUL670SSad3zQNnwOnVmw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:30:20 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4485 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926220.8524046}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926220.8524046}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: MwKjQXAaDVMjrX8tKRA8yA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61298) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ibnEqoIKRLbzusS704f7PGwv/0I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:30:20 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926220.8951936}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926220.8951936}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...ab1f0f","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745926221.6166544}}' [521 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745926221.6166544}}' [521 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926222.6132066}}' [552 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926222.6132066}}' [552 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...c13-8446-855d03ab1f0f"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745926224.600265}}' [1455 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...mp":1745926224.600265}}' [1455 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1480 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1480 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"c","display":"2c"}]}}' [1391 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"h","display":"6h"}]}}' [1393 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1588 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1588 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"d","display":"7d"}]}}' [1407 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"h","display":"6h"}]}}' [1448 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 4b 39 b2 [binary, 4 bytes]
DEBUG:    < PONG 66 4b 39 b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 a1 1d 2a [binary, 4 bytes]
DEBUG:    < PONG 27 a1 1d 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 6a 67 fa [binary, 4 bytes]
DEBUG:    < PONG 7b 6a 67 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 77 c0 69 [binary, 4 bytes]
DEBUG:    < PONG ed 77 c0 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926244.7954276}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926250.9166873}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 15 13 20 [binary, 4 bytes]
DEBUG:    < PONG ee 15 13 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 1f fc 1d [binary, 4 bytes]
DEBUG:    < PONG c9 1f fc 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 07 f4 cb [binary, 4 bytes]
DEBUG:    < PONG 52 07 f4 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 ba 48 23 [binary, 4 bytes]
DEBUG:    < PONG 53 ba 48 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926263.6506643}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Action=sit_down, Player=qq, Result=True
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 7
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Action=buy_in, Player=qq, Result=True
Starting game in room dd51df4b-7baf-4c13-8446-855d03ab1f0f
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 2c, 9d, 7d
Dealt cards to player position 7: 6h, Kh, 10c

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745926224.600265
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 20:30:24.600264
[BROADCAST][room_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room dd51df4b-7baf-4c13-8446-855d03ab1f0f: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '2', 'suit': 'c', 'display': '2c'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': 'dd51df4b-7baf-4c13-8446-855d03ab1f0f', 'name': 'fdsdfs', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3591.867738, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '2', 'suit': 'c', 'display': '2c'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'K', 'suit': 'h', 'display': 'Kh'}, {'rank': '10', 'suit': 'c', 'display': '10c'}, {'rank': '6', 'suit': 'h', 'display': '6h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 21.867738723754883, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:30:24.600264'}
Room state saved successfully. Rooms: 7
处理玩家 7 动作: discard, 金额: 0
玩家 qq 必须先弃掉一张牌
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='hq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61405 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='qq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61408 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: JJ5Y9JECtsMTFbZbePOsIg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61411) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 31eW0XcvusIq/c8LlOeKDmozeao=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:31:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4440 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"d","display":"7d"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926264.3097787}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: m3vZn07dcIPpoyd4ynRIfA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61413) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZH4/0rIzG51KBMkJJ3s/2ZOwC1E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:31:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4481 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"h","display":"6h"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926264.400534}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926264.400534}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 20 fb bd [binary, 4 bytes]
DEBUG:    < PONG 6c 20 fb bd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 52 ec 16 [binary, 4 bytes]
DEBUG:    < PONG ed 52 ec 16 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 6f 1d 70 [binary, 4 bytes]
DEBUG:    < PONG dd 6f 1d 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 c7 a5 f0 [binary, 4 bytes]
DEBUG:    < PONG 82 c7 a5 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926294.3283625}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '(\n$\\' [text, 4 bytes]
DEBUG:    < PONG '(\n$\\' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926294.8301632}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 33 8c 57 [binary, 4 bytes]
DEBUG:    < PONG c5 33 8c 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 00 83 f6 [binary, 4 bytes]
DEBUG:    < PONG f2 00 83 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 60 4e e9 [binary, 4 bytes]
DEBUG:    < PONG f7 60 4e e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 cb d3 85 [binary, 4 bytes]
DEBUG:    < PONG 36 cb d3 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926316.1381326}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
Client qq reconnected
Sent reconnect state to qq
Added qq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='hq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61410 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: zKF9AumQDDHazeBSy4D74A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61525) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjIxMX0.y1_cVE9d_nfrZFEKcDmxzLwcDcyR4onlXT2JbBaZ_7w" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QtENmJHduMu6/Z6mf6k+71NcsTQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:31:56 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4423 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"d","display":"7d"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926316.4653609}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926316.4653609}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926316.9103017}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f

===== 加入房间请求开始 =====
请求数据: room_id='dd51df4b-7baf-4c13-8446-855d03ab1f0f' username='qq'
成功找到房间: dd51df4b-7baf-4c13-8446-855d03ab1f0f, 名称: fdsdfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61412 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 8obdEzNXRqIHECgLl+RQLQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61528) - "WebSocket /ws/game/dd51df4b-7baf-4c13-8446-855d03ab1f0f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjIxMn0.rdA9v7X_RfEE21ZDxrnv2FUEibq_QnmTc2nNHM4iyrw" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: VMArz9/xnaDX32UFj20Q4NUd25Y=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:31:57 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4464 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dd51df4...:"h","display":"6h"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926317.4633355}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926317.4633355}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 93 83 25 [binary, 4 bytes]
DEBUG:    < PONG af 93 83 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f 1f 13 ce [binary, 4 bytes]
DEBUG:    < PONG 0f 1f 13 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 16 58 6c [binary, 4 bytes]
DEBUG:    < PONG fe 16 58 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 2d 7f 00 [binary, 4 bytes]
DEBUG:    < PONG aa 2d 7f 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 ab ca 37 [binary, 4 bytes]
DEBUG:    < PONG 85 ab ca 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926346.4763968}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926347.8284044}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 c1 68 63 [binary, 4 bytes]
DEBUG:    < PONG e4 c1 68 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 a9 8f 02 [binary, 4 bytes]
DEBUG:    < PONG 99 a9 8f 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 b5 b6 f4 [binary, 4 bytes]
DEBUG:    < PONG e0 b5 b6 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 21 f0 05 [binary, 4 bytes]
DEBUG:    < PONG 27 21 f0 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 8e f4 42 [binary, 4 bytes]
DEBUG:    < PONG aa 8e f4 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3b 8c ad 01 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 3b 8c ad 01 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926376.4740777}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'y\x06\x11%' [text, 4 bytes]
DEBUG:    < PONG 'y\x06\x11%' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926377.827801}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb fb 47 a6 [binary, 4 bytes]
DEBUG:    < PONG cb fb 47 a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 45 d5 9e [binary, 4 bytes]
DEBUG:    < PONG cf 45 d5 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 2c 3d 90 [binary, 4 bytes]
DEBUG:    < PONG cd 2c 3d 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a ab 03 80 [binary, 4 bytes]
DEBUG:    < PONG 7a ab 03 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 48 0c c7 [binary, 4 bytes]
DEBUG:    < PONG 7e 48 0c c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926406.4770625}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926407.828238}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 17 35 c3 [binary, 4 bytes]
DEBUG:    < PONG 9e 17 35 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 69 5f 3d [binary, 4 bytes]
DEBUG:    < PONG ff 69 5f 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 28 f0 60 [binary, 4 bytes]
DEBUG:    < PONG 2c 28 f0 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 8d cb 60 [binary, 4 bytes]
DEBUG:    < PONG 93 8d cb 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 08 56 87 [binary, 4 bytes]
DEBUG:    < PONG ec 08 56 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 2c 38 cf [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 90 2c 38 cf [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926436.4777424}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 67 0b 5a [binary, 4 bytes]
DEBUG:    < PONG e1 67 0b 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926437.8266683}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...amp":1745926439.93244}}' [85 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926439.9334445}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 db f6 ac [binary, 4 bytes]
DEBUG:    < PONG 77 db f6 ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
Client qq reconnected
Sent reconnect state to qq
Added qq to room dd51df4b-7baf-4c13-8446-855d03ab1f0f
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f
WebSocket disconnected for client: hq
INFO:     127.0.0.1:61679 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dd51df4b-7baf-4c13-8446-855d03ab1f0f
WebSocket disconnected for client: qq
INFO:     127.0.0.1:61699 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:61679 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61679 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:61699 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61699 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fsddff' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fsddff, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=26c0b92d-8056-41d8-b975-9c85919ad08e, name=fsddff
Room created successfully: id=26c0b92d-8056-41d8-b975-9c85919ad08e
已创建房间 26c0b92d-8056-41d8-b975-9c85919ad08e，房主: hq，当前房间总数: 8
Room state saved successfully. Rooms: 8
房间创建成功, 房间ID: 26c0b92d-8056-41d8-b975-9c85919ad08e
创建房间成功: {'id': '26c0b92d-8056-41d8-b975-9c85919ad08e', 'name': 'fsddff', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:61679 - "POST /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:61679 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
尝试将用户 hq 添加到房间 26c0b92d-8056-41d8-b975-9c85919ad08e
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 26c0b92d-8056-41d8-b975-9c85919ad08e with no seat assigned
成功: 用户 hq 已加入房间 26c0b92d-8056-41d8-b975-9c85919ad08e
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:61682 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61682 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61682 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KvjFKPDOqagw3laEcrweJA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61720) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 4CSMa/QoVYrEBej8Mg5mc24BC9I=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:34:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4423 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926446.995566}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: OF+SjRyZmw8DzY4e5ogiqw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61722) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: o6owZ77FRYNfThpn7Z5OFRU2/J8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:34:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...ame":"hq","chips":0}]}}' [258 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926447.0358155}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...9ad08e","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745926447.398967}}' [479 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926448.7515862}}' [511 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:61703 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:61703 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
尝试将用户 qq 添加到房间 26c0b92d-8056-41d8-b975-9c85919ad08e
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 26c0b92d-8056-41d8-b975-9c85919ad08e with no seat assigned
成功: 用户 qq 已加入房间 26c0b92d-8056-41d8-b975-9c85919ad08e
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:61703 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61703 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61703 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: A/73orI1K7f0pVdCIbK3JA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61742) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: HxxVqGdrPFR6xVEJjZ2fQDQ+swg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:34:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4464 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926452.893431}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926452.893431}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: CpSSB1KCuYo/cEKnZA+IYQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61744) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: w0aK3yVoedaY81Mn0xyXvWG3T+Y=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:34:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...ame":"qq","chips":0}]}}' [299 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926452.926109}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926452.926109}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...9ad08e","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745926454.5803254}}' [521 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745926454.5803254}}' [521 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926455.5135245}}' [552 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745926455.5135245}}' [552 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...1d8-b975-9c85919ad08e"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745926456.4313629}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745926456.4313629}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1479 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1479 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1391 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1393 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":1}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1587 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1587 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1406 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1447 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 09 25 3c d8 [binary, 4 bytes]
DEBUG:    < PONG 09 25 3c d8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 03 b3 00 [binary, 4 bytes]
DEBUG:    < PONG e3 03 b3 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 67 0a 94 [binary, 4 bytes]
DEBUG:    < PONG 9c 67 0a 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'RΗg' [text, 4 bytes]
DEBUG:    < PONG 'RΗg' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926477.0434365}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926482.9478416}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 da 32 9a [binary, 4 bytes]
DEBUG:    < PONG 51 da 32 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 b6 9f 7a [binary, 4 bytes]
DEBUG:    < PONG f8 b6 9f 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 46 d6 4c [binary, 4 bytes]
DEBUG:    < PONG 56 46 d6 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 1c 13 d7 [binary, 4 bytes]
DEBUG:    < PONG 49 1c 13 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 34 82 e9 [binary, 4 bytes]
DEBUG:    < PONG b6 34 82 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926507.0417676}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 7f c1 be [binary, 4 bytes]
DEBUG:    < PONG 12 7f c1 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f 9c de 6f [binary, 4 bytes]
DEBUG:    < PONG 9f 9c de 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 e9 ac 1d [binary, 4 bytes]
DEBUG:    < PONG 78 e9 ac 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926513.135173}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 68 8b 7c [binary, 4 bytes]
DEBUG:    < PONG 99 68 8b 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 d5 73 94 [binary, 4 bytes]
DEBUG:    < PONG a3 d5 73 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 f9 26 55 [binary, 4 bytes]
DEBUG:    < PONG 51 f9 26 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d ce 6b 7f [binary, 4 bytes]
DEBUG:    < PONG 3d ce 6b 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926537.0435653}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926543.8420992}' [46 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745926545.049113}}' [86 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Action=buy_in, Player=qq, Result=True
Starting game in room 26c0b92d-8056-41d8-b975-9c85919ad08e
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 7c, As, 2s
Dealt cards to player position 7: 10s, Ad, Ah

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745926456.4301062
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-29 20:34:16.430106
[BROADCAST][room_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 26c0b92d-8056-41d8-b975-9c85919ad08e: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 8
玩家 hq 弃掉了第 1 张牌: {'rank': '7', 'suit': 'c', 'display': '7c'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '26c0b92d-8056-41d8-b975-9c85919ad08e', 'name': 'fsddff', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3591.702281, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '7', 'suit': 'c', 'display': '7c'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'A', 'suit': 'h', 'display': 'Ah'}, {'rank': 'A', 'suit': 'd', 'display': 'Ad'}, {'rank': '10', 'suit': 's', 'display': '10s'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 21.70228099822998, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-29T20:34:16.430106'}
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 8
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 8
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:61953 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: NCkhyDthKwzfg/bzw0lr2Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61956) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rYNTTQQQ9Xr3+tQ2+z54tMXgjKg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:35:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4458 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926545.6715453}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926545.6715453}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926546.1874688}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:61962 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: OC6i5aR+lolXvefFYk3KMQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61966) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Y5RtGQr3gHkSZ97cw6WGxQIs9hY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:35:46 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4499 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926546.8388612}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926546.8388612}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 74 38 1a [binary, 4 bytes]
DEBUG:    < PONG c0 74 38 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 80 66 23 [binary, 4 bytes]
DEBUG:    < PONG 1c 80 66 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 6e ab c1 [binary, 4 bytes]
DEBUG:    < PONG c6 6e ab c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'a\\\u03e9' [text, 4 bytes]
DEBUG:    < PONG 'a\\\u03e9' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 b2 5c 77 [binary, 4 bytes]
DEBUG:    < PONG 14 b2 5c 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 9b c4 5f [binary, 4 bytes]
DEBUG:    < PONG 62 9b c4 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926575.6780305}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926577.83528}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 e8 96 f0 [binary, 4 bytes]
DEBUG:    < PONG 85 e8 96 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 e0 81 04 [binary, 4 bytes]
DEBUG:    < PONG 07 e0 81 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e b8 1d 61 [binary, 4 bytes]
DEBUG:    < PONG 0e b8 1d 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 3f 5c 11 [binary, 4 bytes]
DEBUG:    < PONG fa 3f 5c 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 4d be 68 [binary, 4 bytes]
DEBUG:    < PONG 99 4d be 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926605.677464}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d f1 09 ab [binary, 4 bytes]
DEBUG:    < PONG 2d f1 09 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 55 b6 6b [binary, 4 bytes]
DEBUG:    < PONG 55 55 b6 6b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926607.841707}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 ed d1 3c [binary, 4 bytes]
DEBUG:    < PONG 91 ed d1 3c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 72 1a c1 [binary, 4 bytes]
DEBUG:    < PONG 31 72 1a c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a a1 50 c2 [binary, 4 bytes]
DEBUG:    < PONG 3a a1 50 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 99 f0 88 [binary, 4 bytes]
DEBUG:    < PONG 79 99 f0 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 54 58 a0 [binary, 4 bytes]
DEBUG:    < PONG 49 54 58 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926635.677673}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926637.844978}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 61 a2 ed [binary, 4 bytes]
DEBUG:    < PONG be 61 a2 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 e6 7c 68 [binary, 4 bytes]
DEBUG:    < PONG e9 e6 7c 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 c1 54 73 [binary, 4 bytes]
DEBUG:    < PONG 08 c1 54 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 0d fb 77 [binary, 4 bytes]
DEBUG:    < PONG 06 0d fb 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f 39 1e e6 [binary, 4 bytes]
DEBUG:    < PONG 3f 39 1e e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926665.678296}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 54 96 d2 [binary, 4 bytes]
DEBUG:    < PONG 95 54 96 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a b0 38 df [binary, 4 bytes]
DEBUG:    < PONG 1a b0 38 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926667.8300886}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 91 ef 4f [binary, 4 bytes]
DEBUG:    < PONG d7 91 ef 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e f6 2e d1 [binary, 4 bytes]
DEBUG:    < PONG 3e f6 2e d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 09 7f 67 [binary, 4 bytes]
DEBUG:    < PONG 91 09 7f 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 4d 1e a6 [binary, 4 bytes]
DEBUG:    < PONG 8d 4d 1e a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926691.1062045}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:62272 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: oU1iJNYqJKxjBHshgZo8yQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62276) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: J8BTAdStJPS8MwGH8GGEwHnG7hs=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:38:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4442 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1389 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926691.730446}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926691.730446}}' [83 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926691.9767795}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:62279 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: zWLk59LZA3HcLhPrFzj6aw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62282) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lfmn/fvzEiWKgUv1ZwGCmt/QPTk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:38:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926692.6209216}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926692.6209216}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 2e fd bc [binary, 4 bytes]
DEBUG:    < PONG 39 2e fd bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 29 0e 92 [binary, 4 bytes]
DEBUG:    < PONG 3c 29 0e 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 84 75 69 [binary, 4 bytes]
DEBUG:    < PONG 9a 84 75 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 2c 5f fa [binary, 4 bytes]
DEBUG:    < PONG 7e 2c 5f fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 3c e4 47 [binary, 4 bytes]
DEBUG:    < PONG 2c 3c e4 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926721.734878}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926722.8446715}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 57 eb e2 [binary, 4 bytes]
DEBUG:    < PONG d4 57 eb e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 ba e8 0e [binary, 4 bytes]
DEBUG:    < PONG 36 ba e8 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 67 3d db [binary, 4 bytes]
DEBUG:    < PONG 60 67 3d db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 09 db f0 [binary, 4 bytes]
DEBUG:    < PONG 74 09 db f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745926739.5532506}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:62274 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: SnWXUd5TNe2DoBS4nG15fA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62383) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: i2HdhXufH7a7thf8rSWsDEFsfLQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:38:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4441 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926739.968519}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926739.968519}}' [83 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745926740.317216}}' [86 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:62281 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: CZJKkOQVDKpRst3qrvtrwQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62395) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: u/tQd85Gy6YbVOAe/SWvc6JKMsg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:39:00 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926741.223732}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745926741.223732}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 31 9b fd [binary, 4 bytes]
DEBUG:    < PONG 47 31 9b fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 b8 1d aa [binary, 4 bytes]
DEBUG:    < PONG e6 b8 1d aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae 12 72 8b [binary, 4 bytes]
DEBUG:    < PONG ae 12 72 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 e1 fd 7c [binary, 4 bytes]
DEBUG:    < PONG e8 e1 fd 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 8a 32 29 [binary, 4 bytes]
DEBUG:    < PONG 4e 8a 32 29 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926769.97707}' [44 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926771.8281147}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 18 49 ad [binary, 4 bytes]
DEBUG:    < PONG 2f 18 49 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '5\\<\x1a' [text, 4 bytes]
DEBUG:    < PONG '5\\<\x1a' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1e d4 ba a2 [binary, 4 bytes]
DEBUG:    < PONG 1e d4 ba a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 16 8f 15 [binary, 4 bytes]
DEBUG:    < PONG 1c 16 8f 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 36 42 b3 [binary, 4 bytes]
DEBUG:    < PONG 27 36 42 b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926799.9741278}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f e8 51 42 [binary, 4 bytes]
DEBUG:    < PONG 2f e8 51 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c e2 e0 3b [binary, 4 bytes]
DEBUG:    < PONG 9c e2 e0 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926801.8405747}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f 31 c4 24 [binary, 4 bytes]
DEBUG:    < PONG 0f 31 c4 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 07 10 90 [binary, 4 bytes]
DEBUG:    < PONG 11 07 10 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u028a\x0e\x08' [text, 4 bytes]
DEBUG:    < PONG '\u028a\x0e\x08' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'C#H\x1b' [text, 4 bytes]
DEBUG:    < PONG 'C#H\x1b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d c6 ec fc [binary, 4 bytes]
DEBUG:    < PONG 1d c6 ec fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926829.9767933}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926831.83727}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 91 a4 33 ba [binary, 4 bytes]
DEBUG:    < PONG 91 a4 33 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 22 70 9e [binary, 4 bytes]
DEBUG:    < PONG 53 22 70 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 56 31 f5 [binary, 4 bytes]
DEBUG:    < PONG e6 56 31 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u0514\x0fE' [text, 4 bytes]
DEBUG:    < PONG '\u0514\x0fE' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a a1 06 66 [binary, 4 bytes]
DEBUG:    < PONG 7a a1 06 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926859.9780703}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 a2 03 5c [binary, 4 bytes]
DEBUG:    < PONG 37 a2 03 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 25 f1 a2 [binary, 4 bytes]
DEBUG:    < PONG c7 25 f1 a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926861.8402414}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 bd 8c cf [binary, 4 bytes]
DEBUG:    < PONG b9 bd 8c cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 97 18 f3 [binary, 4 bytes]
DEBUG:    < PONG 7f 97 18 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 f9 ed 43 [binary, 4 bytes]
DEBUG:    < PONG 08 f9 ed 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 63 c1 00 [binary, 4 bytes]
DEBUG:    < PONG e9 63 c1 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 9d 19 e1 [binary, 4 bytes]
DEBUG:    < PONG ea 9d 19 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926889.976779}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 f3 3e 2f [binary, 4 bytes]
DEBUG:    < PONG 14 f3 3e 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 f2 6d 94 [binary, 4 bytes]
DEBUG:    < PONG 44 f2 6d 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 9c eb f1 [binary, 4 bytes]
DEBUG:    < PONG a5 9c eb f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 e1 35 10 [binary, 4 bytes]
DEBUG:    < PONG 88 e1 35 10 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d f8 0e 5e [binary, 4 bytes]
DEBUG:    < PONG 2d f8 0e 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926919.9767559}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e d9 6f 4a [binary, 4 bytes]
DEBUG:    < PONG 8e d9 6f 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 ff c1 93 [binary, 4 bytes]
DEBUG:    < PONG 66 ff c1 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 8b d8 fe [binary, 4 bytes]
DEBUG:    < PONG bc 8b d8 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d 99 7f f0 [binary, 4 bytes]
DEBUG:    < PONG 2d 99 7f f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa f2 31 d9 [binary, 4 bytes]
DEBUG:    < PONG fa f2 31 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 14 cf da [binary, 4 bytes]
DEBUG:    < PONG 9e 14 cf da [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926945.8312607}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'B7\x18' [text, 4 bytes]
DEBUG:    < PONG 'B7\x18' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926949.9732919}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b f4 b8 80 [binary, 4 bytes]
DEBUG:    < PONG 4b f4 b8 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745926957.829566}}' [86 bytes]
INFO:     connection closed
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: t++t/pAnqYjpI5q85eRH+Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62895) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OQy0Mbr+aJZt9wOq8oKsk2q/U8s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:42:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4442 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926965.2466822}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: /Z4fkiZx+HfunFkIn6P82A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 62900) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DiKfMyPao6rkdwe+Z7fK1dgxoWc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:42:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926966.1536655}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745926966.1536655}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 c1 e9 7d [binary, 4 bytes]
DEBUG:    < PONG 49 c1 e9 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 df 72 30 [binary, 4 bytes]
DEBUG:    < PONG b9 df 72 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926995.2569332}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745926996.8301299}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 f2 1a 4b [binary, 4 bytes]
DEBUG:    < PONG f4 f2 1a 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a dd 4a 14 [binary, 4 bytes]
DEBUG:    < PONG 9a dd 4a 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927025.2584474}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 c4 5b e4 [binary, 4 bytes]
DEBUG:    < PONG e6 c4 5b e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 f6 a4 ce [binary, 4 bytes]
DEBUG:    < PONG f0 f6 a4 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927026.8420095}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 a3 9d 01 [binary, 4 bytes]
DEBUG:    < PONG 13 a3 9d 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 bc 49 db [binary, 4 bytes]
DEBUG:    < PONG 32 bc 49 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745927049.6728272}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Checking for expired rooms...
Room eea24e04-b16e-4424-ae4b-f911040622ef will expire in 0.7 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5 will expire in 2.9 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Notified 2 rooms about upcoming expiration. Remaining rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: hq
Error broadcasting to room member qq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
INFO:     127.0.0.1:63055 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='hq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:63055 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='26c0b92d-8056-41d8-b975-9c85919ad08e' username='qq'
成功找到房间: 26c0b92d-8056-41d8-b975-9c85919ad08e, 名称: fsddff
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:63059 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: NxNxcvMNCUbQ2/LjnWIoJw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63063) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: zsE6VSSs+1hS9l/PMoe7K7OF3Ow=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:44:09 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4442 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745927050.3030193}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: ztIMT+qIoGP+C74dPLp9RQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63065) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: IJK7aLYvIyg83fZOVi0zTzRvozM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:44:10 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1430 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745927050.5715163}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745927050.5715163}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 cd 2b 82 [binary, 4 bytes]
DEBUG:    < PONG 81 cd 2b 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f 4e c5 e9 [binary, 4 bytes]
DEBUG:    < PONG 0f 4e c5 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927080.3203232}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927080.8317993}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 fa 1a 48 [binary, 4 bytes]
DEBUG:    < PONG c5 fa 1a 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 1a 9d 3f [binary, 4 bytes]
DEBUG:    < PONG 42 1a 9d 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 72 32 cc [binary, 4 bytes]
DEBUG:    < PONG 65 72 32 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927110.310164}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 90 b3 86 [binary, 4 bytes]
DEBUG:    < PONG 9c 90 b3 86 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927110.8410053}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac ae 5c f4 [binary, 4 bytes]
DEBUG:    < PONG ac ae 5c f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b 84 a5 fd [binary, 4 bytes]
DEBUG:    < PONG 1b 84 a5 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927140.3103404}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927140.8273523}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 91 59 55 [binary, 4 bytes]
DEBUG:    < PONG 37 91 59 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 b7 62 08 [binary, 4 bytes]
DEBUG:    < PONG f8 b7 62 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c eb b5 32 [binary, 4 bytes]
DEBUG:    < PONG 2c eb b5 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927170.3181698}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 f6 62 d1 [binary, 4 bytes]
DEBUG:    < PONG 73 f6 62 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745927170.8351705}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 ef ef 26 [binary, 4 bytes]
DEBUG:    < PONG 89 ef ef 26 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 64 e0 2d [binary, 4 bytes]
DEBUG:    < PONG 95 64 e0 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 2OgSc6cUoZ90hKosnTONYg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63340) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rmA0Eqmsg33RbDVth4CLdLxP/PQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:46:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4442 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1390 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745927208.851699}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: h1YPpNQ6+iAOzhPWOfSCAw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63353) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OXZUSrMe6R+4Gnc+wLhMvMiAdjU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:46:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4482 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1431 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745927213.1510935}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745927213.1510935}}' [84 bytes]
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745927213.464872}}' [86 bytes]
INFO:     connection closed
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: ES14sBr9l7ZHsFGRR32JiA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 63385) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTI4NjQ0M30.nuMJJjRinHL7SfArZeZdAUTpebgeLYmdmJwmPCIL9O4" [accepted]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Checking for expired rooms...
Room eea24e04-b16e-4424-ae4b-f911040622ef has expired after 34.3 minutes of inactivity
Room eea24e04-b16e-4424-ae4b-f911040622ef has been idle for 34.3 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5 has expired after 32.1 minutes of inactivity
Room 089042bf-d9e5-4866-b7a4-385ab0d40aa5 has been idle for 32.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: eea24e04-b16e-4424-ae4b-f911040622ef
已删除房间 eea24e04-b16e-4424-ae4b-f911040622ef，当前房间总数: 7
Room state saved successfully. Rooms: 7
Removing expired room: 089042bf-d9e5-4866-b7a4-385ab0d40aa5
已删除房间 089042bf-d9e5-4866-b7a4-385ab0d40aa5，当前房间总数: 6
Room state saved successfully. Rooms: 6
Removed 2 expired rooms. Remaining rooms: 6
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
Client hq reconnected
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 6
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 6
Client hq reconnected
INFO:     127.0.0.1:63383 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: wjNTn+yXj1Y6Zeku9eP3koTMoeo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 11:46:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4442 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92...:"s","display":"2s"}]}}' [1380 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745933589.4713893}}' [84 bytes]
Sent reconnect state to hq
Added hq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
INFO:     127.0.0.1:63383 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
INFO:     127.0.0.1:65354 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:65354 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: B4voYItcGEhp3jVvrw6upg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65356) - "WebSocket /ws/game/26c0b92d-8056-41d8-b975-9c85919ad08e?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTI4NjQ0NH0.fXOslp-57b-Slx7IzB-aUxV_1hTVSzbhX4wMwgZ3TfU" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: d1qTdQu12Lo/zr2+1aG5D931brU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:13:02 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"26c0b92..."s","display":"10s"}]}}' [1421 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943183.5448794}}' [84 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 26c0b92d-8056-41d8-b975-9c85919ad08e
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 26c0b92d-8056-41d8-b975-9c85919ad08e
INFO:     127.0.0.1:65377 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:65377 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:65377 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65377 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65354 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:65361 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:65361 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65361 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65377 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='dfsq' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=dfsq, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=dc7d8ae9-83a9-4324-af52-dafce6b4ce23, name=dfsq
Room created successfully: id=dc7d8ae9-83a9-4324-af52-dafce6b4ce23
已创建房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23，房主: hq，当前房间总数: 7
Room state saved successfully. Rooms: 7
房间创建成功, 房间ID: dc7d8ae9-83a9-4324-af52-dafce6b4ce23
创建房间成功: {'id': 'dc7d8ae9-83a9-4324-af52-dafce6b4ce23', 'name': 'dfsq', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:65379 - "POST /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65379 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
尝试将用户 hq 添加到房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room dc7d8ae9-83a9-4324-af52-dafce6b4ce23 with no seat assigned
成功: 用户 hq 已加入房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:65377 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:65377 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:65377 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 8lyKijvxrtO6/7MOohWW3Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65400) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: loMRAHLRRglPhk6RuLs/7T54D94=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:13:09 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4432 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943189.415003}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: IHkP5IFKKP8yNOHT9fmvtA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65402) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: BWkD1XVEKjdoFN7fKL4NyoJDOEY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:13:09 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...ame":"hq","chips":0}]}}' [256 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943189.5015476}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...b4ce23","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943190.2229424}}' [478 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745943191.0683844}}' [509 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:65417 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65417 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:65417 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
尝试将用户 qq 添加到房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room dc7d8ae9-83a9-4324-af52-dafce6b4ce23 with no seat assigned
成功: 用户 qq 已加入房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:65418 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:65418 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:65418 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 7lP2jwSjxEBwTKQdlPpTZw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65433) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: E8u7mWZtZ1BeXtus89RWF9FsMpg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:13:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4473 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943198.5416577}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943198.5416577}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Y48HDhdzJANI6fjG6tlQGA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 65435) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: FW6GitHQcGQQwDIUphOqs1VdBVM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:13:17 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...ame":"qq","chips":0}]}}' [297 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943198.606709}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943198.606709}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...b4ce23","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943198.9750643}}' [519 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943198.9750643}}' [519 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943200.275692}}' [549 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943200.275692}}' [549 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...324-af52-dafce6b4ce23"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943205.8218133}}' [1465 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943205.8218133}}' [1465 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"d","display":"8d"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"h","display":"4h"}]}}' [1387 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 11 4c 8a [binary, 4 bytes]
DEBUG:    < PONG d6 11 4c 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 95 4c a5 [binary, 4 bytes]
DEBUG:    < PONG 1c 95 4c a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 37 5a ad [binary, 4 bytes]
DEBUG:    < PONG 5e 37 5a ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 59 b9 d5 [binary, 4 bytes]
DEBUG:    < PONG cd 59 b9 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943219.507134}' [45 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1576 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1576 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"d","display":"Qd"}]}}' [1395 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"h","display":"4h"}]}}' [1434 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943228.6470964}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 4a 5e ea [binary, 4 bytes]
DEBUG:    < PONG e0 4a 5e ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 1b c1 15 [binary, 4 bytes]
DEBUG:    < PONG d8 1b c1 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 4c 5c b1 [binary, 4 bytes]
DEBUG:    < PONG a0 4c 5c b1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f 95 8b 6d [binary, 4 bytes]
DEBUG:    < PONG 3f 95 8b 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1462 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1462 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 07 d2 33 e7 [binary, 4 bytes]
DEBUG:    < PONG 07 d2 33 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943249.5056264}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 fe 82 37 [binary, 4 bytes]
DEBUG:    < PONG 64 fe 82 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 16 11 9c [binary, 4 bytes]
DEBUG:    < PONG c2 16 11 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 96 82 c9 [binary, 4 bytes]
DEBUG:    < PONG c6 96 82 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943258.652957}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 51 6b e6 [binary, 4 bytes]
DEBUG:    < PONG 78 51 6b e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '[\u0736q' [text, 4 bytes]
DEBUG:    < PONG '[\u0736q' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 6b e6 22 [binary, 4 bytes]
DEBUG:    < PONG a5 6b e6 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 09 6f af [binary, 4 bytes]
DEBUG:    < PONG cf 09 6f af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943279.5091922}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943289.3515973}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 d2 29 9d [binary, 4 bytes]
DEBUG:    < PONG d3 d2 29 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 b1 cb 51 [binary, 4 bytes]
DEBUG:    < PONG 47 b1 cb 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 6f b2 b5 [binary, 4 bytes]
DEBUG:    < PONG 6b 6f b2 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 25 9a 6e [binary, 4 bytes]
DEBUG:    < PONG 6c 25 9a 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e df f6 46 [binary, 4 bytes]
DEBUG:    < PONG 3e df f6 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943309.5028946}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 e8 be ed [binary, 4 bytes]
DEBUG:    < PONG 61 e8 be ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 36 c2 2f [binary, 4 bytes]
DEBUG:    < PONG c8 36 c2 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 a6 a4 1a [binary, 4 bytes]
DEBUG:    < PONG 67 a6 a4 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943319.3528757}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 91 24 f5 [binary, 4 bytes]
DEBUG:    < PONG 57 91 24 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 8d 0d 20 [binary, 4 bytes]
DEBUG:    < PONG 12 8d 0d 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 72 45 87 [binary, 4 bytes]
DEBUG:    < PONG 27 72 45 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 71 b9 76 [binary, 4 bytes]
DEBUG:    < PONG be 71 b9 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943339.5050423}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943349.353908}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 4e 1a 1a [binary, 4 bytes]
DEBUG:    < PONG 80 4e 1a 1a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1a b3 b6 60 [binary, 4 bytes]
DEBUG:    < PONG 1a b3 b6 60 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 83 7d a9 [binary, 4 bytes]
DEBUG:    < PONG ff 83 7d a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 73 33 66 [binary, 4 bytes]
DEBUG:    < PONG 9b 73 33 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 e7 46 e6 [binary, 4 bytes]
DEBUG:    < PONG c9 e7 46 e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943369.509284}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1fA-K' [text, 4 bytes]
DEBUG:    < PONG '\x1fA-K' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 e6 cd 74 [binary, 4 bytes]
DEBUG:    < PONG 92 e6 cd 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 2d ed 43 [binary, 4 bytes]
DEBUG:    < PONG 2f 2d ed 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943379.3560412}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c be 8c 1b [binary, 4 bytes]
DEBUG:    < PONG 8c be 8c 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 5a 48 9c [binary, 4 bytes]
DEBUG:    < PONG 53 5a 48 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 89 39 f5 [binary, 4 bytes]
DEBUG:    < PONG 2a 89 39 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 b5 ac 77 [binary, 4 bytes]
DEBUG:    < PONG 44 b5 ac 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943399.5080326}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 2b 65 24 [binary, 4 bytes]
DEBUG:    < PONG d9 2b 65 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 e1 b5 01 [binary, 4 bytes]
DEBUG:    < PONG b8 e1 b5 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 0f 81 5d [binary, 4 bytes]
DEBUG:    < PONG 8d 0f 81 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 0e 29 43 [binary, 4 bytes]
DEBUG:    < PONG 9d 0e 29 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 2c f4 77 [binary, 4 bytes]
DEBUG:    < PONG b8 2c f4 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943429.508353}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 af 96 bc [binary, 4 bytes]
DEBUG:    < PONG 63 af 96 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943436.2322981}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
Client qq reconnected
Sent reconnect state to qq
Added qq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Action=buy_in, Player=qq, Result=True
Starting game in room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Qd, Kc, 8d
Dealt cards to player position 7: Qc, Kd, 4h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745943205.8151283
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-30 01:13:25.821813
[BROADCAST][room_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 7
玩家 hq 弃掉了第 2 张牌: {'rank': '8', 'suit': 'd', 'display': '8d'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': 'dc7d8ae9-83a9-4324-af52-dafce6b4ce23', 'name': 'dfsq', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3579.02176, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '8', 'suit': 'd', 'display': '8d'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '8', 'suit': 'd', 'display': '8d'}, 'hand': [{'rank': 'K', 'suit': 'c', 'display': 'Kc'}, {'rank': 'Q', 'suit': 'd', 'display': 'Qd'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 9.015074729919434, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:13:25.821813'}
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 3s, Ah, 4s
Dealt cards to player position 7: 7c, Js, 8h

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[BROADCAST][game_update] Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 7
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Checking for expired rooms...
No expired or expiring rooms found
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:49770 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:49774 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: JsGkDhz6D6ZXwxbxElB6ow==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49776) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Pk3WD6MJwLxkkaPmTYoMDTAyXN0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943436.896589}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: kFhF2nKBQJEWpMsXqx4j/w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49779) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: eoVEyccMIeAqQpjTo72nlV5I6Sg=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745943437.18343}}' [82 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745943437.18343}}' [82 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 56 8d e2 [binary, 4 bytes]
DEBUG:    < PONG 9c 56 8d e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'h\u02bb\x1e' [text, 4 bytes]
DEBUG:    < PONG 'h\u02bb\x1e' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943453.2598577}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client qq reconnected
Sent reconnect state to qq
Added qq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:49772 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:49772 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:49778 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:49778 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: YMQk56avuSAf7iYU1nKeGg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49807) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: T4Tknw7po+seTakzbM0VOs/rMi8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943453.6475654}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: YLVMA+OPNeWn7QERYamD4w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49810) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DiH/79AiWCAmI3cAElF4BUveaHI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943453.678021}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: pTpI9tjqocfojrYFpnsmbQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49814) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 5fGDyMXjI732vy2Hz2Xi9jKvbLE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943453.8863804}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943453.8863804}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: toXe7P5uGwR0yVTCn/oSJQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 49817) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: i9nrUm/lVWzlk8n98iSzSOji94w=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:17:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943454.056357}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943454.056357}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 b8 63 2d [binary, 4 bytes]
DEBUG:    < PONG 60 b8 63 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 a5 3a 2f [binary, 4 bytes]
DEBUG:    < PONG 79 a5 3a 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b dc f2 a0 [binary, 4 bytes]
DEBUG:    < PONG 7b dc f2 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b e0 30 e9 [binary, 4 bytes]
DEBUG:    < PONG 6b e0 30 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ':?1X' [text, 4 bytes]
DEBUG:    < PONG ':?1X' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 0b 8c 71 [binary, 4 bytes]
DEBUG:    < PONG b9 0b 8c 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 97 f7 b4 [binary, 4 bytes]
DEBUG:    < PONG 6c 97 f7 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943483.730166}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943484.359406}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 af 4d b6 [binary, 4 bytes]
DEBUG:    < PONG 05 af 4d b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 47 00 c6 [binary, 4 bytes]
DEBUG:    < PONG 0e 47 00 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 d7 d7 7b [binary, 4 bytes]
DEBUG:    < PONG e5 d7 d7 7b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 b2 25 28 [binary, 4 bytes]
DEBUG:    < PONG 94 b2 25 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 81 10 65 [binary, 4 bytes]
DEBUG:    < PONG e2 81 10 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 b6 7d ba [binary, 4 bytes]
DEBUG:    < PONG d6 b6 7d ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 63 13 d9 [binary, 4 bytes]
DEBUG:    < PONG 42 63 13 d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 e9 f1 a9 [binary, 4 bytes]
DEBUG:    < PONG 24 e9 f1 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'C6\x1bk' [text, 4 bytes]
DEBUG:    < PONG 'C6\x1bk' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943513.7229016}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 6b 9a 4d [binary, 4 bytes]
DEBUG:    < PONG 52 6b 9a 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 dd 36 4f [binary, 4 bytes]
DEBUG:    < PONG 96 dd 36 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943514.3591113}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING de e5 1d e1 [binary, 4 bytes]
DEBUG:    < PONG de e5 1d e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e f2 09 1b [binary, 4 bytes]
DEBUG:    < PONG 4e f2 09 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 ca 4f 66 [binary, 4 bytes]
DEBUG:    < PONG 53 ca 4f 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 52 3b 1f [binary, 4 bytes]
DEBUG:    < PONG f3 52 3b 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 8e aa ae [binary, 4 bytes]
DEBUG:    < PONG 52 8e aa ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 57 65 20 [binary, 4 bytes]
DEBUG:    < PONG 87 57 65 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x7fR{v' [text, 4 bytes]
DEBUG:    < PONG '\x7fR{v' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943543.7259238}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943544.3842149}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 e8 69 72 [binary, 4 bytes]
DEBUG:    < PONG 40 e8 69 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 22 57 ff [binary, 4 bytes]
DEBUG:    < PONG 8a 22 57 ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b bc f5 22 [binary, 4 bytes]
DEBUG:    < PONG 1b bc f5 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 5b f8 53 [binary, 4 bytes]
DEBUG:    < PONG e8 5b f8 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a c7 19 f5 [binary, 4 bytes]
DEBUG:    < PONG 6a c7 19 f5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a e1 d3 fb [binary, 4 bytes]
DEBUG:    < PONG 4a e1 d3 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'j\x13З' [text, 4 bytes]
DEBUG:    < PONG 'j\x13З' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a aa 7c 8b [binary, 4 bytes]
DEBUG:    < PONG 7a aa 7c 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 90 a8 09 [binary, 4 bytes]
DEBUG:    < PONG d0 90 a8 09 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943573.7325358}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 87 6f b3 [binary, 4 bytes]
DEBUG:    < PONG f1 87 6f b3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9b 8c 90 45 [binary, 4 bytes]
DEBUG:    < PONG 9b 8c 90 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943574.3728836}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 72 80 e5 [binary, 4 bytes]
DEBUG:    < PONG 95 72 80 e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 5f bd 18 [binary, 4 bytes]
DEBUG:    < PONG 45 5f bd 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 6e 7a 2f [binary, 4 bytes]
DEBUG:    < PONG 82 6e 7a 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 cf df 1f [binary, 4 bytes]
DEBUG:    < PONG e7 cf df 1f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 be a5 f3 [binary, 4 bytes]
DEBUG:    < PONG 17 be a5 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 4e b2 bc [binary, 4 bytes]
DEBUG:    < PONG f2 4e b2 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'K_p\x04' [text, 4 bytes]
DEBUG:    < PONG 'K_p\x04' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943603.735709}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943604.3573961}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 96 6a 83 [binary, 4 bytes]
DEBUG:    < PONG b6 96 6a 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 02 88 d2 [binary, 4 bytes]
DEBUG:    < PONG d6 02 88 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 94 0c 2f [binary, 4 bytes]
DEBUG:    < PONG 21 94 0c 2f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c dc 12 21 [binary, 4 bytes]
DEBUG:    < PONG 1c dc 12 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 c6 16 fe [binary, 4 bytes]
DEBUG:    < PONG 01 c6 16 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 01 bc ae [binary, 4 bytes]
DEBUG:    < PONG 6a 01 bc ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745943629.445995}}' [86 bytes]
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 7a b9 69 [binary, 4 bytes]
DEBUG:    < PONG 38 7a b9 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
Client hq reconnected
Sent reconnect state to hq
Added hq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client hq connected
Client qq reconnected
Sent reconnect state to qq
Added qq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client qq connected
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50079 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: c/QV59oS7BuGcIfEdrFeWQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50083) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: iNw+c6nrGRdE2HBnyBz4qBaBooU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:20:29 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943630.0841694}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943630.0841694}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745943630.441472}}' [86 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50087 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: yJNlV+znqQBZ0H/gzdnBtw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50090) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: eiSBpk8UyWZSXvqg7RHmlBIIspE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:20:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client qq reconnected

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='hq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50079 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943631.0654771}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CONNECTING
INFO:     connection closed
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: uDriK11qBSuyOJ2IibMweQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50092) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzE4NX0.7bu-KkNwIwLpdQTw382c8jho0LoyCn0wC_xbL5mC6fg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: tZkEC+ruviHX9IVpCB1ddp9dxho=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:20:30 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"s","display":"3s"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943631.4264195}}' [84 bytes]
Sent reconnect state to qq
Added qq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Client hq reconnected
Sent reconnect state to hq
Added hq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23

===== 加入房间请求开始 =====
请求数据: room_id='dc7d8ae9-83a9-4324-af52-dafce6b4ce23' username='qq'
成功找到房间: dc7d8ae9-83a9-4324-af52-dafce6b4ce23, 名称: dfsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50087 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 6O8vpZasOfW8SnLmRl/NFQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50094) - "WebSocket /ws/game/dc7d8ae9-83a9-4324-af52-dafce6b4ce23?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzE4Nn0.Tv4V5IEkKrdSIUO5E56JL0F7DitPESmuIyk3aKH0_Co" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: HRTYLzYLowiNvNGxinhg/WKL31A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:20:31 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"dc7d8ae...:"c","display":"7c"}]}}' [1370 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943631.817981}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943631.817981}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 67 b8 5d [binary, 4 bytes]
DEBUG:    < PONG 08 67 b8 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 23 a3 8f [binary, 4 bytes]
DEBUG:    < PONG d0 23 a3 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 1d 1d 94 [binary, 4 bytes]
DEBUG:    < PONG 17 1d 1d 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c c3 31 92 [binary, 4 bytes]
DEBUG:    < PONG 4c c3 31 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed fd f3 03 [binary, 4 bytes]
DEBUG:    < PONG ed fd f3 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 01 28 e4 [binary, 4 bytes]
DEBUG:    < PONG 9c 01 28 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 83 3d 2a [binary, 4 bytes]
DEBUG:    < PONG e3 83 3d 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 6e 50 5e [binary, 4 bytes]
DEBUG:    < PONG d1 6e 50 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 5b 09 15 [binary, 4 bytes]
DEBUG:    < PONG ed 5b 09 15 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943660.7888868}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943660.7888868}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745943660.791755}}' [86 bytes]
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943661.8359356}' [46 bytes]
Client qq reconnected
Sent reconnect state to qq
Added qq to room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
WebSocket disconnected for client: hq
WebSocket disconnected for client: hq
INFO:     127.0.0.1:50082 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:50082 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room dc7d8ae9-83a9-4324-af52-dafce6b4ce23
WebSocket disconnected for client: qq
WebSocket disconnected for client: qq
Room state saved successfully. Rooms: 7
INFO:     127.0.0.1:50089 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50082 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50082 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50089 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50089 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='cxa' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=cxa, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=b424f4d6-e86f-4182-93f7-83834f73fef2, name=cxa
Room created successfully: id=b424f4d6-e86f-4182-93f7-83834f73fef2
已创建房间 b424f4d6-e86f-4182-93f7-83834f73fef2，房主: hq，当前房间总数: 8
Room state saved successfully. Rooms: 8
房间创建成功, 房间ID: b424f4d6-e86f-4182-93f7-83834f73fef2
创建房间成功: {'id': 'b424f4d6-e86f-4182-93f7-83834f73fef2', 'name': 'cxa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:50082 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b424f4d6-e86f-4182-93f7-83834f73fef2' username='hq'
成功找到房间: b424f4d6-e86f-4182-93f7-83834f73fef2, 名称: cxa
尝试将用户 hq 添加到房间 b424f4d6-e86f-4182-93f7-83834f73fef2
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room b424f4d6-e86f-4182-93f7-83834f73fef2 with no seat assigned
成功: 用户 hq 已加入房间 b424f4d6-e86f-4182-93f7-83834f73fef2
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50082 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b424f4d6-e86f-4182-93f7-83834f73fef2' username='hq'
成功找到房间: b424f4d6-e86f-4182-93f7-83834f73fef2, 名称: cxa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50082 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='b424f4d6-e86f-4182-93f7-83834f73fef2' username='hq'
成功找到房间: b424f4d6-e86f-4182-93f7-83834f73fef2, 名称: cxa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50082 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b424f4d6-e86f-4182-93f7-83834f73fef2?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzY2NH0.DVO2dfwlpSrx0QRMrZVV9FgCiRXyQH0BKkZE46THb9g HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: gIES4BmeC2g7LUufyQkWpw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50182) - "WebSocket /ws/game/b424f4d6-e86f-4182-93f7-83834f73fef2?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzY2NH0.DVO2dfwlpSrx0QRMrZVV9FgCiRXyQH0BKkZE46THb9g" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6Uz7O7Gc55BoCa+2/hAA3KCjFQo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:07 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b424f4d...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943668.2392695}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/b424f4d6-e86f-4182-93f7-83834f73fef2?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzY2NH0.DVO2dfwlpSrx0QRMrZVV9FgCiRXyQH0BKkZE46THb9g HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: RXAJujjY8ssJE7fHEKck6w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50184) - "WebSocket /ws/game/b424f4d6-e86f-4182-93f7-83834f73fef2?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzY2NH0.DVO2dfwlpSrx0QRMrZVV9FgCiRXyQH0BKkZE46THb9g" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 8JrOXGL071kCUy90VMMLRpkl5AM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:07 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"b424f4d...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943668.3012695}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...73fef2","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943668.6652439}}' [477 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745943669.5862586}}' [508 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room b424f4d6-e86f-4182-93f7-83834f73fef2
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room b424f4d6-e86f-4182-93f7-83834f73fef2: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room b424f4d6-e86f-4182-93f7-83834f73fef2: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:50203 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50204 - "GET /api/rooms HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d 9f 47 1b [binary, 4 bytes]
DEBUG:    < PONG 1d 9f 47 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 f5 dd 99 [binary, 4 bytes]
DEBUG:    < PONG f6 f5 dd 99 [binary, 4 bytes]
DEBUG:    % received keepalive pong
Room state saved successfully. Rooms: 8
INFO:     127.0.0.1:50238 - "GET /api/rooms HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943698.3080275}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room b424f4d6-e86f-4182-93f7-83834f73fef2
WebSocket disconnected for client: hq
INFO:     127.0.0.1:50238 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50255 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50238 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50238 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50255 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50255 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50255 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='vfa' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=vfa, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=9d03a888-0c3b-425c-a103-6807e17d89b5, name=vfa
Room created successfully: id=9d03a888-0c3b-425c-a103-6807e17d89b5
已创建房间 9d03a888-0c3b-425c-a103-6807e17d89b5，房主: hq，当前房间总数: 9
Room state saved successfully. Rooms: 9
房间创建成功, 房间ID: 9d03a888-0c3b-425c-a103-6807e17d89b5
创建房间成功: {'id': '9d03a888-0c3b-425c-a103-6807e17d89b5', 'name': 'vfa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:50255 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='hq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
尝试将用户 hq 添加到房间 9d03a888-0c3b-425c-a103-6807e17d89b5
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 9d03a888-0c3b-425c-a103-6807e17d89b5 with no seat assigned
成功: 用户 hq 已加入房间 9d03a888-0c3b-425c-a103-6807e17d89b5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50255 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='hq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50255 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='hq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50255 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: cyHDYMXn21K5IMP9Z2/30A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50276) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: laXb9VyDW4X+0qhQ4FNw3dhBDVQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [2215 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943706.4420552}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: GQKltL6M5UpaqTIJznA33A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50278) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sBODq0LEspmfKoxXMQpjMNdHYyI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943706.5583906}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...7d89b5","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943707.0301952}}' [477 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943707.865059}}' [507 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 9d03a888-0c3b-425c-a103-6807e17d89b5
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:50239 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='qq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
尝试将用户 qq 添加到房间 9d03a888-0c3b-425c-a103-6807e17d89b5
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 9d03a888-0c3b-425c-a103-6807e17d89b5 with no seat assigned
成功: 用户 qq 已加入房间 9d03a888-0c3b-425c-a103-6807e17d89b5
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50239 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='qq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50239 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='qq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50239 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 7jdXguFJihSbeJ0utDnQpw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50298) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: OUv10idZIeTwTwSY6BiKCZresCE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:50 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4285 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943711.247085}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943711.247085}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: oBZbFjOtZBvkj8l1adSWIg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50300) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Tgqny7XPNIwDmncPDnspsVOkZfw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:21:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943711.299605}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943711.299605}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...7d89b5","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943712.0724077}}' [518 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943712.0724077}}' [518 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943713.214555}}' [548 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943713.214555}}' [548 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...25c-a103-6807e17d89b5"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943716.6872787}}' [1451 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943716.6872787}}' [1451 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"d","display":"5d"}]}}' [1388 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"c","display":"3c"}]}}' [1386 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 e9 b6 4a [binary, 4 bytes]
DEBUG:    < PONG 44 e9 b6 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '>\nw"' [text, 4 bytes]
DEBUG:    < PONG '>\nw"' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":1}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1582 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1582 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"d","display":"5d"}]}}' [1404 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"c","display":"3c"}]}}' [1441 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 09 85 23 [binary, 4 bytes]
DEBUG:    < PONG 73 09 85 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 a2 01 c2 [binary, 4 bytes]
DEBUG:    < PONG c1 a2 01 c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943736.5696197}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943741.3547306}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 f9 11 af [binary, 4 bytes]
DEBUG:    < PONG 59 f9 11 af [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 0b de 31 [binary, 4 bytes]
DEBUG:    < PONG f1 0b de 31 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 40 b3 59 [binary, 4 bytes]
DEBUG:    < PONG d1 40 b3 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d d8 65 11 [binary, 4 bytes]
DEBUG:    < PONG 5d d8 65 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943763.4188392}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 9d03a888-0c3b-425c-a103-6807e17d89b5
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Action=buy_in, Player=qq, Result=True
Starting game in room 9d03a888-0c3b-425c-a103-6807e17d89b5
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 5d, 7h, 10d
Dealt cards to player position 7: 9c, 4c, 3c

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745943716.6872787
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-30 01:21:56.687278
[BROADCAST][room_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 9d03a888-0c3b-425c-a103-6807e17d89b5: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 9
玩家 hq 弃掉了第 1 张牌: {'rank': '7', 'suit': 'h', 'display': '7h'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '9d03a888-0c3b-425c-a103-6807e17d89b5', 'name': 'vfa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3585.957546, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '7', 'suit': 'h', 'display': '7h'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': '9', 'suit': 'c', 'display': '9c'}, {'rank': '4', 'suit': 'c', 'display': '4c'}, {'rank': '3', 'suit': 'c', 'display': '3c'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 15.957546710968018, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:21:56.687278'}
Checking for expired rooms...
No expired or expiring rooms found
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 9
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 9d03a888-0c3b-425c-a103-6807e17d89b5

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='hq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50374 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: TQnb0vk4wrm2YpAR1iBc9Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50379) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzcwM30.XXwAdsyf-aspoo5wlKKZtzRVbUFDATDIs093H5h6fFM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: QE1C/hb6uo+TlZb6LzwL/+yh7Jc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:22:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4427 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"d","display":"5d"}]}}' [1387 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943764.1247647}}' [84 bytes]
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 9d03a888-0c3b-425c-a103-6807e17d89b5
Client hq reconnected
Sent reconnect state to hq
Added hq to room 9d03a888-0c3b-425c-a103-6807e17d89b5

===== 加入房间请求开始 =====
请求数据: room_id='9d03a888-0c3b-425c-a103-6807e17d89b5' username='qq'
成功找到房间: 9d03a888-0c3b-425c-a103-6807e17d89b5, 名称: vfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50381 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: XOSlnCyBnEZoyAl8ug/DYA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50385) - "WebSocket /ws/game/9d03a888-0c3b-425c-a103-6807e17d89b5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzcwMX0.rBqoVuDXSRhiqHc9KY1-foToFwyy4Lo33Nge8rJ2ywE" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: WsIfAMDAnQqMlbLZHbrmtl/JTiM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:22:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4464 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"9d03a88...:"c","display":"3c"}]}}' [1423 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943765.2070227}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943765.2070227}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 2d 8d 6c [binary, 4 bytes]
DEBUG:    < PONG fa 2d 8d 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 4a dd b4 [binary, 4 bytes]
DEBUG:    < PONG b6 4a dd b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 c2 9a db [binary, 4 bytes]
DEBUG:    < PONG 64 c2 9a db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 0f 9f 2d [binary, 4 bytes]
DEBUG:    < PONG 67 0f 9f 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 cc 6b 14 [binary, 4 bytes]
DEBUG:    < PONG 30 cc 6b 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 7c 0b ab [binary, 4 bytes]
DEBUG:    < PONG bc 7c 0b ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943794.1390662}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943795.358118}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed aa b6 80 [binary, 4 bytes]
DEBUG:    < PONG ed aa b6 80 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 d3 36 00 [binary, 4 bytes]
DEBUG:    < PONG 69 d3 36 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 d8 1e a7 [binary, 4 bytes]
DEBUG:    < PONG 62 d8 1e a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 7b d2 54 [binary, 4 bytes]
DEBUG:    < PONG ba 7b d2 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 1f 17 b6 [binary, 4 bytes]
DEBUG:    < PONG 90 1f 17 b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943824.1288226}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 78 e3 92 [binary, 4 bytes]
DEBUG:    < PONG 67 78 e3 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943825.3511977}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 c4 d5 75 [binary, 4 bytes]
DEBUG:    < PONG 19 c4 d5 75 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 9b 57 06 [binary, 4 bytes]
DEBUG:    < PONG 69 9b 57 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943834.0412872}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943834.0412872}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 9d03a888-0c3b-425c-a103-6807e17d89b5
Room state saved successfully. Rooms: 9
Room state saved successfully. Rooms: 9
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 9d03a888-0c3b-425c-a103-6807e17d89b5
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 9d03a888-0c3b-425c-a103-6807e17d89b5
WebSocket disconnected for client: qq
INFO:     127.0.0.1:50498 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:50498 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50504 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50504 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50511 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50511 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50511 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50498 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50507 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50507 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50507 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50511 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='sa1' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=sa1, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f, name=sa1
Room created successfully: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f
已创建房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f，房主: hq，当前房间总数: 10
Room state saved successfully. Rooms: 10
房间创建成功, 房间ID: 853c76d8-6c85-446f-a4d9-ec76a90bd10f
创建房间成功: {'id': '853c76d8-6c85-446f-a4d9-ec76a90bd10f', 'name': 'sa1', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:50504 - "POST /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50504 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='hq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
尝试将用户 hq 添加到房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 853c76d8-6c85-446f-a4d9-ec76a90bd10f with no seat assigned
成功: 用户 hq 已加入房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50511 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='hq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50511 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='hq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50511 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzgzOH0.p4kRgJ1EFJDbtO16pNY9N-oGUvZdyrYwuGBnxkmOTQg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 1vaTH37/BbG+oKj32bmThw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50537) - "WebSocket /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzgzOH0.p4kRgJ1EFJDbtO16pNY9N-oGUvZdyrYwuGBnxkmOTQg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: pBapgKxwROIupaGkWSCVA9KfGWc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:24:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4410 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943842.127371}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzgzOH0.p4kRgJ1EFJDbtO16pNY9N-oGUvZdyrYwuGBnxkmOTQg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: s1s2HYTOHDuDz51emK1U2g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50539) - "WebSocket /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzgzOH0.p4kRgJ1EFJDbtO16pNY9N-oGUvZdyrYwuGBnxkmOTQg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: UM7E4lxv+YPDqQg8ZNrKSkugy5E=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:24:01 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943842.1912713}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...0bd10f","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943842.6049035}}' [477 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745943843.650966}}' [507 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 853c76d8-6c85-446f-a4d9-ec76a90bd10f
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Action=sit_down, Player=hq, Result=True
Room state saved successfully. Rooms: 10
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:50544 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50544 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='qq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
尝试将用户 qq 添加到房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 853c76d8-6c85-446f-a4d9-ec76a90bd10f with no seat assigned
成功: 用户 qq 已加入房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50545 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='qq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50545 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='853c76d8-6c85-446f-a4d9-ec76a90bd10f' username='qq'
成功找到房间: 853c76d8-6c85-446f-a4d9-ec76a90bd10f, 名称: sa1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50545 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzgzOX0.T-pn0QfkCuatmlrQm6GpluLaBW4MpnriaRROm8daSUg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: qjxahvi+014MMhtD080ocQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50558) - "WebSocket /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzgzOX0.T-pn0QfkCuatmlrQm6GpluLaBW4MpnriaRROm8daSUg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: gzB5nMixwkw28+z9twC9Vbrtl0s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:24:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4446 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943846.8995607}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943846.8995607}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzgzOX0.T-pn0QfkCuatmlrQm6GpluLaBW4MpnriaRROm8daSUg HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Ej8NQjsg8j0wwycFGxC/tg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50561) - "WebSocket /ws/game/853c76d8-6c85-446f-a4d9-ec76a90bd10f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzgzOX0.T-pn0QfkCuatmlrQm6GpluLaBW4MpnriaRROm8daSUg" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rq/SCdbEZnpBUcZPMRjYMh8Q924=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:24:06 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943846.9802716}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943846.9802716}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...0bd10f","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943847.3665104}}' [518 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943847.3665104}}' [518 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...amp":1745943848.42475}}' [547 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...amp":1745943848.42475}}' [547 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...46f-a4d9-ec76a90bd10f"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943850.7508705}}' [1453 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745943850.7508705}}' [1453 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...:"d","display":"3d"}]}}' [1388 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"853c76d...:"s","display":"3s"}]}}' [1390 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 63 e5 dd [binary, 4 bytes]
DEBUG:    < PONG 3c 63 e5 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 5a 4e 4c [binary, 4 bytes]
DEBUG:    < PONG 9d 5a 4e 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 3b ca 4c [binary, 4 bytes]
DEBUG:    < PONG 24 3b ca 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 42 02 5c [binary, 4 bytes]
DEBUG:    < PONG a3 42 02 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943872.2104146}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943877.0061338}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f cf fe 7e [binary, 4 bytes]
DEBUG:    < PONG 6f cf fe 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 c0 c6 9a [binary, 4 bytes]
DEBUG:    < PONG 71 c0 c6 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 2a e2 8d [binary, 4 bytes]
DEBUG:    < PONG 41 2a e2 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 9b 2b 01 [binary, 4 bytes]
DEBUG:    < PONG 40 9b 2b 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'rDtv' [text, 4 bytes]
DEBUG:    < PONG 'rDtv' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 f4 3d c9 [binary, 4 bytes]
DEBUG:    < PONG 73 f4 3d c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943902.2046351}' [46 bytes]
WARNING:  StatReload detected changes in 'src\models\room.py'. Reloading...
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 58 bc 0a [binary, 4 bytes]
DEBUG:    < PONG 94 58 bc 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 6b f6 be [binary, 4 bytes]
DEBUG:    < PONG 7e 6b f6 be [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943907.3520098}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec 15 e1 d6 [binary, 4 bytes]
DEBUG:    < PONG ec 15 e1 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 8a 9d 59 [binary, 4 bytes]
DEBUG:    < PONG 56 8a 9d 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Nz\x1cI' [text, 4 bytes]
DEBUG:    < PONG 'Nz\x1cI' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 af 1a 20 [binary, 4 bytes]
DEBUG:    < PONG 27 af 1a 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745943929.947623}}' [86 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745943929.9496472}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 853c76d8-6c85-446f-a4d9-ec76a90bd10f
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Action=buy_in, Player=qq, Result=True
Starting game in room 853c76d8-6c85-446f-a4d9-ec76a90bd10f
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 3d, 5c, 8h
Dealt cards to player position 7: 3s, 9s, 10s

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745943850.7508705
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-30 01:24:10.750870
[BROADCAST][room_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Action=start_game, Player=hq, Result=True
[DEBUG] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Change reason: First update for this room
[BROADCAST][game_update] Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 10
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 10
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 853c76d8-6c85-446f-a4d9-ec76a90bd10f
WebSocket disconnected for client: hq
INFO:     127.0.0.1:50733 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 853c76d8-6c85-446f-a4d9-ec76a90bd10f
WebSocket disconnected for client: qq
INFO:     127.0.0.1:50753 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
Room state saved successfully. Rooms: 10
INFO:     127.0.0.1:50733 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50733 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50753 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:50753 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fsq' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fsq, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 2248659158800
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=314e283e-e4fb-4db3-b5ab-575e09d08d84, name=fsq
Room created successfully: id=314e283e-e4fb-4db3-b5ab-575e09d08d84
已创建房间 314e283e-e4fb-4db3-b5ab-575e09d08d84，房主: hq，当前房间总数: 11
Room state saved successfully. Rooms: 11
房间创建成功, 房间ID: 314e283e-e4fb-4db3-b5ab-575e09d08d84
创建房间成功: {'id': '314e283e-e4fb-4db3-b5ab-575e09d08d84', 'name': 'fsq', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:50735 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='hq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
尝试将用户 hq 添加到房间 314e283e-e4fb-4db3-b5ab-575e09d08d84
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 314e283e-e4fb-4db3-b5ab-575e09d08d84 with no seat assigned
成功: 用户 hq 已加入房间 314e283e-e4fb-4db3-b5ab-575e09d08d84
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50735 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='hq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50735 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='hq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:50735 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: vH68sJo14NdItD19mwhN4w==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50778) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: kGCQsIYNagZsAvMOcdgoK8+ZPII=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:25:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4307 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943940.0416539}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: /wwcervJwSAbz0w0HKDhhA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50780) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: t43lVb3hVQhCuSjWn9ZEJHxahGU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:25:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...ame":"hq","chips":0}]}}' [255 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943940.134874}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...d08d84","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943940.3907268}}' [477 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745943941.3508713}}' [508 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 314e283e-e4fb-4db3-b5ab-575e09d08d84
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:50756 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50800 - "GET /api/rooms HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 61 d2 f8 [binary, 4 bytes]
DEBUG:    < PONG ea 61 d2 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb dc 62 65 [binary, 4 bytes]
DEBUG:    < PONG eb dc 62 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
Room state saved successfully. Rooms: 11
INFO:     127.0.0.1:50801 - "GET /api/rooms HTTP/1.1" 200 OK
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745943970.1590056}' [46 bytes]
INFO:     127.0.0.1:50865 - "GET /api/rooms HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 c3 d2 14 [binary, 4 bytes]
DEBUG:    < PONG 11 c3 d2 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 03 b3 56 [binary, 4 bytes]
DEBUG:    < PONG ac 03 b3 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
INFO:     127.0.0.1:50873 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 11
INFO:     127.0.0.1:50912 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:50912 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='qq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
尝试将用户 qq 添加到房间 314e283e-e4fb-4db3-b5ab-575e09d08d84
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 314e283e-e4fb-4db3-b5ab-575e09d08d84 with no seat assigned
成功: 用户 qq 已加入房间 314e283e-e4fb-4db3-b5ab-575e09d08d84
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:50912 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='qq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50912 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='qq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:50912 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 4uFIfnu0A7d/zaq3cjf3Kw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50938) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: SeW8bIU4g/7oZ1ZaI8FGID+EJgk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:26:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4309 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943998.2210999}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745943998.2210999}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Zvu3XONBN4QliTFtlXRZdg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 50940) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: p8tVTOquwm/ArHuxZjtAZtM1L3A=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:26:37 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...ame":"qq","chips":0}]}}' [296 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943998.362813}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745943998.362813}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...d08d84","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943998.8715596}}' [518 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745943998.8715596}}' [518 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745943999.8578265}}' [549 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745943999.8578265}}' [549 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb b5 72 e1 [binary, 4 bytes]
DEBUG:    < PONG cb b5 72 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944000.1420624}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 46 c7 6f 96 [binary, 4 bytes]
DEBUG:    < PONG 46 c7 6f 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 7e 1f 50 [binary, 4 bytes]
DEBUG:    < PONG 9c 7e 1f 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8_W7' [text, 4 bytes]
DEBUG:    < PONG '8_W7' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 82 49 52 [binary, 4 bytes]
DEBUG:    < PONG 93 82 49 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 a4 a2 d6 [binary, 4 bytes]
DEBUG:    < PONG 64 a4 a2 d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944029.3544836}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944030.1582093}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 50 7f 42 [binary, 4 bytes]
DEBUG:    < PONG ca 50 7f 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f 1c e6 68 [binary, 4 bytes]
DEBUG:    < PONG 2f 1c e6 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 43 2e 90 [binary, 4 bytes]
DEBUG:    < PONG 13 43 2e 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a a3 44 18 [binary, 4 bytes]
DEBUG:    < PONG 8a a3 44 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...db3-b5ab-575e09d08d84"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944042.3180723}}' [1451 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944042.3180723}}' [1451 bytes]
INFO:     Shutting down
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1475 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"c","display":"2c"}]}}' [1386 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"h","display":"6h"}]}}' [1386 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 b9 97 24 [binary, 4 bytes]
DEBUG:    < PONG c8 b9 97 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 1d 96 c7 [binary, 4 bytes]
DEBUG:    < PONG 75 1d 96 c7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944058.3963084}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 ca 42 96 [binary, 4 bytes]
DEBUG:    < PONG 69 ca 42 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944060.1411347}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae a3 06 01 [binary, 4 bytes]
DEBUG:    < PONG ae a3 06 01 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":1}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1576 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1576 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"c","display":"2c"}]}}' [1395 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"h","display":"6h"}]}}' [1434 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1461 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1461 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"d","display":"4d"}]}}' [1369 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"s","display":"8s"}]}}' [1369 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 c2 1a 91 [binary, 4 bytes]
DEBUG:    < PONG 20 c2 1a 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 66 a7 46 [binary, 4 bytes]
DEBUG:    < PONG df 66 a7 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 f4 f9 9f [binary, 4 bytes]
DEBUG:    < PONG 01 f4 f9 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 70 9e c2 [binary, 4 bytes]
DEBUG:    < PONG a0 70 9e c2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944088.3818715}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944090.165568}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa 36 22 83 [binary, 4 bytes]
DEBUG:    < PONG aa 36 22 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5a 72 e4 92 [binary, 4 bytes]
DEBUG:    < PONG 5a 72 e4 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 16 75 b5 [binary, 4 bytes]
DEBUG:    < PONG 84 16 75 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 87 74 2c [binary, 4 bytes]
DEBUG:    < PONG 01 87 74 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 23 45 22 [binary, 4 bytes]
DEBUG:    < PONG da 23 45 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 03 0f 0a [binary, 4 bytes]
DEBUG:    < PONG b0 03 0f 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944119.3602993}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 c7 9f 76 [binary, 4 bytes]
DEBUG:    < PONG d1 c7 9f 76 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944120.1421492}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae c6 3f b0 [binary, 4 bytes]
DEBUG:    < PONG ae c6 3f b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 0d c1 6f [binary, 4 bytes]
DEBUG:    < PONG 9c 0d c1 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 50 01 1e [binary, 4 bytes]
DEBUG:    < PONG f9 50 01 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 d8 5a f8 [binary, 4 bytes]
DEBUG:    < PONG 52 d8 5a f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 2c 4c b5 [binary, 4 bytes]
DEBUG:    < PONG 00 2c 4c b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944150.1305337}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 19 0c ca ea [binary, 4 bytes]
DEBUG:    < PONG 19 0c ca ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 d9 c3 05 [binary, 4 bytes]
DEBUG:    < PONG 78 d9 c3 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'k\\d2' [text, 4 bytes]
DEBUG:    < PONG 'k\\d2' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd c1 9e 70 [binary, 4 bytes]
DEBUG:    < PONG dd c1 9e 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944162.36159}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 9e 1c f6 [binary, 4 bytes]
DEBUG:    < PONG e0 9e 1c f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 46 a1 13 [binary, 4 bytes]
DEBUG:    < PONG 17 46 a1 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d f2 1b e8 [binary, 4 bytes]
DEBUG:    < PONG 9d f2 1b e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944180.1430502}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 c7 3b 95 [binary, 4 bytes]
DEBUG:    < PONG 45 c7 3b 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x12\x07!p' [text, 4 bytes]
DEBUG:    < PONG '\x12\x07!p' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe fe 11 18 [binary, 4 bytes]
DEBUG:    < PONG fe fe 11 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 10 ba a0 [binary, 4 bytes]
DEBUG:    < PONG b4 10 ba a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 72 5b 1c [binary, 4 bytes]
DEBUG:    < PONG ed 72 5b 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944210.1397636}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 e7 60 bf [binary, 4 bytes]
DEBUG:    < PONG c8 e7 60 bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 6f 94 42 [binary, 4 bytes]
DEBUG:    < PONG e1 6f 94 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 87 7d d9 56 [binary, 4 bytes]
DEBUG:    < PONG 87 7d d9 56 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc ef 91 34 [binary, 4 bytes]
DEBUG:    < PONG dc ef 91 34 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944222.3554454}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 46 e2 cd [binary, 4 bytes]
DEBUG:    < PONG d8 46 e2 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 51 19 53 [binary, 4 bytes]
DEBUG:    < PONG d9 51 19 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 48 d1 a5 [binary, 4 bytes]
DEBUG:    < PONG 86 48 d1 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944240.1380754}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd d2 93 f8 [binary, 4 bytes]
DEBUG:    < PONG bd d2 93 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf e6 23 83 [binary, 4 bytes]
DEBUG:    < PONG cf e6 23 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ad ad 6a 92 [binary, 4 bytes]
DEBUG:    < PONG ad ad 6a 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 8f 82 f1 [binary, 4 bytes]
DEBUG:    < PONG f6 8f 82 f1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 51 62 97 [binary, 4 bytes]
DEBUG:    < PONG 7c 51 62 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944270.1434126}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944271.4239037}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c ae e9 a5 [binary, 4 bytes]
DEBUG:    < PONG 4c ae e9 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f a3 02 3e [binary, 4 bytes]
DEBUG:    < PONG 7f a3 02 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 00 79 e9 [binary, 4 bytes]
DEBUG:    < PONG 72 00 79 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 78 5b 24 [binary, 4 bytes]
DEBUG:    < PONG f6 78 5b 24 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'P\x9e~' [text, 4 bytes]
DEBUG:    < PONG 'P\x9e~' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 85 52 a0 [binary, 4 bytes]
DEBUG:    < PONG 56 85 52 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944299.3502703}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944300.1452444}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b6 1a d8 67 [binary, 4 bytes]
DEBUG:    < PONG b6 1a d8 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 02 ca 4c [binary, 4 bytes]
DEBUG:    < PONG 4e 02 ca 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'S/5[' [text, 4 bytes]
DEBUG:    < PONG 'S/5[' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 fa 56 2b [binary, 4 bytes]
DEBUG:    < PONG d0 fa 56 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Ira.' [text, 4 bytes]
DEBUG:    < PONG 'Ira.' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 a7 03 7a [binary, 4 bytes]
DEBUG:    < PONG 55 a7 03 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944329.360714}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944330.1435144}' [46 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745944336.8256633}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 4c 93 3e [binary, 4 bytes]
DEBUG:    < PONG 83 4c 93 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x7fbA2' [text, 4 bytes]
DEBUG:    < PONG '\x7fbA2' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [25852]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 314e283e-e4fb-4db3-b5ab-575e09d08d84
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Action=buy_in, Player=qq, Result=True
Room state saved successfully. Rooms: 11
Checking for expired rooms...
No expired or expiring rooms found
Starting game in room 314e283e-e4fb-4db3-b5ab-575e09d08d84
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 5d, 2c, Ac
Dealt cards to player position 7: Qc, Qh, 6h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745944042.3180723
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-30 01:27:22.318072
[BROADCAST][room_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 11
玩家 hq 弃掉了第 1 张牌: {'rank': '5', 'suit': 'd', 'display': '5d'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '314e283e-e4fb-4db3-b5ab-575e09d08d84', 'name': 'fsq', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'remaining_time': 3580.256568, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '5', 'suit': 'd', 'display': '5d'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '5', 'suit': 'd', 'display': '5d'}, 'hand': [{'rank': 'A', 'suit': 'c', 'display': 'Ac'}, {'rank': '2', 'suit': 'c', 'display': '2c'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 10.25656795501709, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:27:22.318072'}
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 9d, 4d, 6d
Dealt cards to player position 7: 8s, Qc, 9s

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[BROADCAST][game_update] Room 314e283e-e4fb-4db3-b5ab-575e09d08d84: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 11
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Room state saved successfully. Rooms: 11
Checking for expired rooms...
No expired or expiring rooms found
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 314e283e-e4fb-4db3-b5ab-575e09d08d84
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 314e283e-e4fb-4db3-b5ab-575e09d08d84
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Application stopping...
Rooms at shutdown: {'0d281117-d6ad-4972-b7a3-969997976163': <src.models.room.Room object at 0x0000020B8E95FDA0>, '98864112-d748-413a-a015-1c9483793f2e': <src.models.room.Room object at 0x0000020B8E99F2F0>, '352c8ffe-e3ce-4b28-aafd-c796de267aa3': <src.models.room.Room object at 0x0000020B8E9BD4C0>, 'b8e2f51f-a82b-42e1-815a-a56466f715c5': <src.models.room.Room object at 0x0000020B8E9BE390>, 'dd51df4b-7baf-4c13-8446-855d03ab1f0f': <src.models.room.Room object at 0x0000020B8E9F9460>, '26c0b92d-8056-41d8-b975-9c85919ad08e': <src.models.room.Room object at 0x0000020B8EA4C2C0>, 'dc7d8ae9-83a9-4324-af52-dafce6b4ce23': <src.models.room.Room object at 0x0000020B8EA4FF80>, 'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x0000020B8E9D6240>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x0000020B8E9BC650>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x0000020B8E9D7A40>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x0000020B8E9BDC40>}
INFO:     Started server process [5596]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
Initializing RoomManager
Creating Room: id=0d281117-d6ad-4972-b7a3-969997976163, name=sadsad
Room created successfully: id=0d281117-d6ad-4972-b7a3-969997976163
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=98864112-d748-413a-a015-1c9483793f2e, name=fdsd
Room created successfully: id=98864112-d748-413a-a015-1c9483793f2e
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=352c8ffe-e3ce-4b28-aafd-c796de267aa3, name=cbvvbc
Room created successfully: id=352c8ffe-e3ce-4b28-aafd-c796de267aa3
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=b8e2f51f-a82b-42e1-815a-a56466f715c5, name=jgrt
Room created successfully: id=b8e2f51f-a82b-42e1-815a-a56466f715c5
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=dd51df4b-7baf-4c13-8446-855d03ab1f0f, name=fdsdfs
Room created successfully: id=dd51df4b-7baf-4c13-8446-855d03ab1f0f
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=26c0b92d-8056-41d8-b975-9c85919ad08e, name=fsddff
Room created successfully: id=26c0b92d-8056-41d8-b975-9c85919ad08e
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=dc7d8ae9-83a9-4324-af52-dafce6b4ce23, name=dfsq
Room created successfully: id=dc7d8ae9-83a9-4324-af52-dafce6b4ce23
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=b424f4d6-e86f-4182-93f7-83834f73fef2, name=cxa
Room created successfully: id=b424f4d6-e86f-4182-93f7-83834f73fef2
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Room: id=9d03a888-0c3b-425c-a103-6807e17d89b5, name=vfa
Room created successfully: id=9d03a888-0c3b-425c-a103-6807e17d89b5
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f, name=sa1
Room created successfully: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=314e283e-e4fb-4db3-b5ab-575e09d08d84, name=fsq
Room created successfully: id=314e283e-e4fb-4db3-b5ab-575e09d08d84
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 11
Room manager cleanup thread started
Main room_manager instance id: 1324244231584
Initial rooms: {'0d281117-d6ad-4972-b7a3-969997976163': <src.models.room.Room object at 0x00000134532EB620>, '98864112-d748-413a-a015-1c9483793f2e': <src.models.room.Room object at 0x00000134532EBB60>, '352c8ffe-e3ce-4b28-aafd-c796de267aa3': <src.models.room.Room object at 0x0000013453308230>, 'b8e2f51f-a82b-42e1-815a-a56466f715c5': <src.models.room.Room object at 0x0000013453308920>, 'dd51df4b-7baf-4c13-8446-855d03ab1f0f': <src.models.room.Room object at 0x0000013453309010>, '26c0b92d-8056-41d8-b975-9c85919ad08e': <src.models.room.Room object at 0x0000013453309580>, 'dc7d8ae9-83a9-4324-af52-dafce6b4ce23': <src.models.room.Room object at 0x0000013453309730>, 'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x00000134533098E0>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x0000013453309A00>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x0000013453309BB0>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x0000013453309D60>}
Application starting...
Rooms at startup: {'0d281117-d6ad-4972-b7a3-969997976163': <src.models.room.Room object at 0x00000134532EB620>, '98864112-d748-413a-a015-1c9483793f2e': <src.models.room.Room object at 0x00000134532EBB60>, '352c8ffe-e3ce-4b28-aafd-c796de267aa3': <src.models.room.Room object at 0x0000013453308230>, 'b8e2f51f-a82b-42e1-815a-a56466f715c5': <src.models.room.Room object at 0x0000013453308920>, 'dd51df4b-7baf-4c13-8446-855d03ab1f0f': <src.models.room.Room object at 0x0000013453309010>, '26c0b92d-8056-41d8-b975-9c85919ad08e': <src.models.room.Room object at 0x0000013453309580>, 'dc7d8ae9-83a9-4324-af52-dafce6b4ce23': <src.models.room.Room object at 0x0000013453309730>, 'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x00000134533098E0>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x0000013453309A00>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x0000013453309BB0>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x0000013453309D60>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-30 00:32:26.553409

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='qq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51373 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:51370 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='314e283e-e4fb-4db3-b5ab-575e09d08d84' username='hq'
成功找到房间: 314e283e-e4fb-4db3-b5ab-575e09d08d84, 名称: fsq
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51369 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: ZBp+TZWMo1E0dUf/yyNskg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     127.0.0.1:51375 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < GET /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: AsjcH1xyzQyIxM5O03L6ug==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51386) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwMzkzNX0.L1Z_vFHzMPJ3WDqh0GgAiS_Igbl1UAgAFVYiPu_Aj0U" [accepted]
INFO:     ('127.0.0.1', 51381) - "WebSocket /ws/game/314e283e-e4fb-4db3-b5ab-575e09d08d84?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwMzkzNH0.yoH4GRT-WJB1XgxXGTqBXBs0eMVuYEMTa_0Y-dRUZJY" [accepted]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client qq connected
Added qq to room 314e283e-e4fb-4db3-b5ab-575e09d08d84
Client hq connected
Added hq to room 314e283e-e4fb-4db3-b5ab-575e09d08d84
Error sending message to qq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 314e283e-e4fb-4db3-b5ab-575e09d08d84
Error broadcasting to room member hq: no close frame received or sent
Error sending message to hq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 314e283e-e4fb-4db3-b5ab-575e09d08d84
INFO:     127.0.0.1:51370 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:51370 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51370 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51375 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51375 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='vcbs' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=vcbs, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1324244231584
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, name=vcbs
Room created successfully: id=e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
已创建房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d，房主: hq，当前房间总数: 12
Room state saved successfully. Rooms: 12
房间创建成功, 房间ID: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
创建房间成功: {'id': 'e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d', 'name': 'vcbs', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:51370 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='hq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
尝试将用户 hq 添加到房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d with no seat assigned
成功: 用户 hq 已加入房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:51370 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='hq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51370 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='hq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51370 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: BJueUGUfHbtg/dKN1qZWcg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51451) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: sXsLmq2BrRrUKdBAan2OFzxXGxQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:32:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"qq","chips":333.0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...ame":"hq","chips":0}]}}' [273 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944353.1286693}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: miHo/EDSi8UE0jSa3Q8Hqw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51453) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TOvXc3Tz5sUzn3mN+Wyg1rSayS4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:32:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...ame":"hq","chips":0}]}}' [273 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944353.197052}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...c3eb9d","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745944353.5311067}}' [495 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745944354.4732814}}' [526 bytes]
Client hq reconnected
Sent pending message to hq: game_state
Added hq to room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:51468 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='qq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
尝试将用户 qq 添加到房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d with no seat assigned
成功: 用户 qq 已加入房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:51468 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='qq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51468 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='qq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51468 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: WqimzLrbDw3Hvd1rzqYN/g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51483) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 1qlbzqwmAKlF1gxS7WqGdyY28qQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:32:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"314e283...:"qq","chips":333.0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...ame":"qq","chips":0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944360.0410733}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944360.0410733}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: A8df2ZRvIodPLjHgSIA3eA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51485) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Yq+FdoDfDgcl3mlhcpDgXxYvijM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:32:39 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...ame":"qq","chips":0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944360.1138444}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944360.1138444}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...c3eb9d","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745944360.5057344}}' [536 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745944360.5057344}}' [536 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745944361.682888}}' [566 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745944361.682888}}' [566 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...b0e-9b61-9f0f7bc3eb9d"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944369.7266374}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944369.7266374}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1501 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1501 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...:"d","display":"5d"}]}}' [1414 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...:"s","display":"2s"}]}}' [1412 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 13 a4 e5 2c [binary, 4 bytes]
DEBUG:    < PONG 13 a4 e5 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 a0 2b 71 [binary, 4 bytes]
DEBUG:    < PONG 49 a0 2b 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 9b c0 5c [binary, 4 bytes]
DEBUG:    < PONG 6b 9b c0 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b e7 cc 63 [binary, 4 bytes]
DEBUG:    < PONG 0b e7 cc 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944383.2044828}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944390.156679}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 4b 40 61 [binary, 4 bytes]
DEBUG:    < PONG e7 4b 40 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d e2 ef 69 [binary, 4 bytes]
DEBUG:    < PONG 8d e2 ef 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a ec c5 92 [binary, 4 bytes]
DEBUG:    < PONG 7a ec c5 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 aa 60 d3 [binary, 4 bytes]
DEBUG:    < PONG c6 aa 60 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 13 30 ef [binary, 4 bytes]
DEBUG:    < PONG 06 13 30 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 99 f4 b7 [binary, 4 bytes]
DEBUG:    < PONG 6c 99 f4 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944413.3583734}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 8d 66 df [binary, 4 bytes]
DEBUG:    < PONG e6 8d 66 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 0d 75 e2 [binary, 4 bytes]
DEBUG:    < PONG c7 0d 75 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944420.3656986}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 12 6a bf [binary, 4 bytes]
DEBUG:    < PONG f8 12 6a bf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f e0 3a 64 [binary, 4 bytes]
DEBUG:    < PONG 6f e0 3a 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f fe 07 17 [binary, 4 bytes]
DEBUG:    < PONG 2f fe 07 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 6d 80 a5 [binary, 4 bytes]
DEBUG:    < PONG cb 6d 80 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944443.373055}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944450.3506596}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 f8 cb 1b [binary, 4 bytes]
DEBUG:    < PONG 96 f8 cb 1b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 2d 4f ea [binary, 4 bytes]
DEBUG:    < PONG c6 2d 4f ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a5 67 a5 3a [binary, 4 bytes]
DEBUG:    < PONG a5 67 a5 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a 98 ee 47 [binary, 4 bytes]
DEBUG:    < PONG 9a 98 ee 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe 25 15 25 [binary, 4 bytes]
DEBUG:    < PONG fe 25 15 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 db 76 89 [binary, 4 bytes]
DEBUG:    < PONG e8 db 76 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944473.3813653}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a cc 55 e0 [binary, 4 bytes]
DEBUG:    < PONG 3a cc 55 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 69 2f d1 [binary, 4 bytes]
DEBUG:    < PONG 2e 69 2f d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944480.3648438}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '>=:\x00' [text, 4 bytes]
DEBUG:    < PONG '>=:\x00' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'G7E(' [text, 4 bytes]
DEBUG:    < PONG 'G7E(' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a e6 df 0b [binary, 4 bytes]
DEBUG:    < PONG 0a e6 df 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 d6 b5 ed [binary, 4 bytes]
DEBUG:    < PONG 94 d6 b5 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 26 82 3e [binary, 4 bytes]
DEBUG:    < PONG f7 26 82 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 71 89 6a [binary, 4 bytes]
DEBUG:    < PONG db 71 89 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 c0 6b 11 [binary, 4 bytes]
DEBUG:    < PONG 86 c0 6b 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 3e bd 03 [binary, 4 bytes]
DEBUG:    < PONG b3 3e bd 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944522.365331}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944522.3836432}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 72 93 6d [binary, 4 bytes]
DEBUG:    < PONG 68 72 93 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 c5 97 87 [binary, 4 bytes]
DEBUG:    < PONG e3 c5 97 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 5f f3 d7 [binary, 4 bytes]
DEBUG:    < PONG 4a 5f f3 d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b 9d 3b 44 [binary, 4 bytes]
DEBUG:    < PONG 1b 9d 3b 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 3e 74 19 [binary, 4 bytes]
DEBUG:    < PONG 96 3e 74 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 a6 1c e7 [binary, 4 bytes]
DEBUG:    < PONG 11 a6 1c e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d 0b fe 3f [binary, 4 bytes]
DEBUG:    < PONG 3d 0b fe 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 ef 84 6a [binary, 4 bytes]
DEBUG:    < PONG 99 ef 84 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 fe 63 f3 [binary, 4 bytes]
DEBUG:    < PONG 02 fe 63 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 c0 9e 27 [binary, 4 bytes]
DEBUG:    < PONG 48 c0 9e 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 30 e6 41 [binary, 4 bytes]
DEBUG:    < PONG 27 30 e6 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 95 ee e5 [binary, 4 bytes]
DEBUG:    < PONG 7f 95 ee e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944582.4036038}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944582.4036038}' [46 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...amp":1745944585.46707}}' [85 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent pending message to qq: game_state
Added qq to room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Action=buy_in, Player=qq, Result=True
Starting game in room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Qs, 10s, 5d
Dealt cards to player position 7: 2s, 6s, 8c

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745944369.7266374
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-30 01:32:49.726637
[BROADCAST][room_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 12
处理玩家 1 动作: discard, 金额: 1
玩家 hq 必须先弃掉一张牌
Room state saved successfully. Rooms: 12
Room state saved successfully. Rooms: 12
Room state saved successfully. Rooms: 12
Room state saved successfully. Rooms: 12
Room state saved successfully. Rooms: 12
Room state saved successfully. Rooms: 12
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
INFO:     127.0.0.1:51934 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='hq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:51934 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:51938 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d' username='qq'
成功找到房间: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, 名称: vcbs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:51938 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: zrKmvigjVe+nW5YF4bvplA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51943) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDM0OH0.5jLyLmAXGjQLpaC3wQayoXOa429rVYtAEauw_UziViI" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ujRrn7Y1pT+hC7j/NdlwIPL8xSU=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4382 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...:"d","display":"5d"}]}}' [1397 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944586.116576}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: azWa6tgBkAwgY3t9wq6rig==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 51946) - "WebSocket /ws/game/e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDM0OX0.ESv1mL2LbwRjgjEPqXrIDOXF-_uoOQAq9Ir4QgB_qnM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: hoMcAUTRAN1qcsQd4XD2eOY/r/4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:25 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4380 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e1a8177...:"s","display":"2s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944586.3338673}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944586.3338673}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 e5 c2 4f [binary, 4 bytes]
DEBUG:    < PONG 32 e5 c2 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 8c 23 50 [binary, 4 bytes]
DEBUG:    < PONG 01 8c 23 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745944600.6330044}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745944600.6330044}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Client qq reconnected
Sent reconnect state to qq
Added qq to room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Room state saved successfully. Rooms: 12
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
WebSocket disconnected for client: qq
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
WebSocket disconnected for client: hq
INFO:     127.0.0.1:51944 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:51944 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:51941 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:51944 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51945 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51945 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51945 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51941 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51942 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51942 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:51942 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:52019 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='sdffds' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=sdffds, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1324244231584
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=01d1f837-0170-4cb9-873a-b570fa63d717, name=sdffds
Room created successfully: id=01d1f837-0170-4cb9-873a-b570fa63d717
已创建房间 01d1f837-0170-4cb9-873a-b570fa63d717，房主: hq，当前房间总数: 13
Room state saved successfully. Rooms: 13
房间创建成功, 房间ID: 01d1f837-0170-4cb9-873a-b570fa63d717
创建房间成功: {'id': '01d1f837-0170-4cb9-873a-b570fa63d717', 'name': 'sdffds', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:52019 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
尝试将用户 hq 添加到房间 01d1f837-0170-4cb9-873a-b570fa63d717
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 01d1f837-0170-4cb9-873a-b570fa63d717 with no seat assigned
成功: 用户 hq 已加入房间 01d1f837-0170-4cb9-873a-b570fa63d717
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:52019 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52019 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52019 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: NU181ApDUw1GmAxu6VDXPA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52034) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: DyEmhQ2bZohh6EfutmIIeBONxR4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:52 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4365 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...ame":"hq","chips":0}]}}' [275 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944613.8394227}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: yaSySkUVAVKEw23Bg64VsA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52036) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: NYExUGuK6USl6T8O2+YOCRMS9ag=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...ame":"hq","chips":0}]}}' [275 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745944613.9207356}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...63d717","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...mp":1745944614.122112}}' [496 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745944615.1036565}}' [528 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:52046 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 13
INFO:     127.0.0.1:52046 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
尝试将用户 qq 添加到房间 01d1f837-0170-4cb9-873a-b570fa63d717
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 01d1f837-0170-4cb9-873a-b570fa63d717 with no seat assigned
成功: 用户 qq 已加入房间 01d1f837-0170-4cb9-873a-b570fa63d717
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:52046 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52046 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52046 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 2p/bq1p8I1JTv6bQ+uKVZA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52064) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: fJ4iuJAo58E1ejoOlB2Jf7+AZfw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4362 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...ame":"qq","chips":0}]}}' [316 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944619.936607}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944619.936607}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 0/1A05VEhxGXTMAKP7WyCw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52066) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: AJ/e7RWgDMBB7pxOKpzGr2UrrIc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:36:59 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...ame":"qq","chips":0}]}}' [316 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944619.994209}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745944619.994209}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...63d717","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745944623.0202436}}' [538 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745944623.0202436}}' [538 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745944624.0312138}}' [569 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745944624.0312138}}' [569 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 3f e7 ea [binary, 4 bytes]
DEBUG:    < PONG 27 3f e7 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 5e d3 cf [binary, 4 bytes]
DEBUG:    < PONG e5 5e d3 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df e0 38 f2 [binary, 4 bytes]
DEBUG:    < PONG df e0 38 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 d2 6c 45 [binary, 4 bytes]
DEBUG:    < PONG 75 d2 6c 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944643.9538355}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944650.3674915}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea 03 8f 8c [binary, 4 bytes]
DEBUG:    < PONG ea 03 8f 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 2d 6b e1 [binary, 4 bytes]
DEBUG:    < PONG 66 2d 6b e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...cb9-873a-b570fa63d717"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944657.5528028}}' [1493 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745944657.5528028}}' [1493 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1503 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1503 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"8h"}]}}' [1414 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"3h"}]}}' [1416 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 17 bc 05 [binary, 4 bytes]
DEBUG:    < PONG 85 17 bc 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 45 18 55 [binary, 4 bytes]
DEBUG:    < PONG b0 45 18 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 d8 63 5f [binary, 4 bytes]
DEBUG:    < PONG d6 d8 63 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4b b3 cf 07 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944673.9425626}' [46 bytes]
DEBUG:    < PONG 4b b3 cf 07 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 e8 91 c6 [binary, 4 bytes]
DEBUG:    < PONG e2 e8 91 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 1d 36 f2 [binary, 4 bytes]
DEBUG:    < PONG 0b 1d 36 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944680.2213519}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d f9 d1 67 [binary, 4 bytes]
DEBUG:    < PONG 6d f9 d1 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d6 23 3f 35 [binary, 4 bytes]
DEBUG:    < PONG d6 23 3f 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'q' [text, 4 bytes]
DEBUG:    < PONG 'q' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'kUB~' [text, 4 bytes]
DEBUG:    < PONG 'kUB~' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944703.9444647}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944710.3910482}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 49 92 db [binary, 4 bytes]
DEBUG:    < PONG 6a 49 92 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e d9 33 36 [binary, 4 bytes]
DEBUG:    < PONG 4e d9 33 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 f5 44 b9 [binary, 4 bytes]
DEBUG:    < PONG 49 f5 44 b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 0a 4c 11 [binary, 4 bytes]
DEBUG:    < PONG b1 0a 4c 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0c\x0ep,' [text, 4 bytes]
DEBUG:    < PONG '\x0c\x0ep,' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 2f f2 a4 [binary, 4 bytes]
DEBUG:    < PONG 62 2f f2 a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944733.9535818}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 7c 9f ea [binary, 4 bytes]
DEBUG:    < PONG ed 7c 9f ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 0c c3 d1 [binary, 4 bytes]
DEBUG:    < PONG 9c 0c c3 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944740.3890808}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 7a b5 94 [binary, 4 bytes]
DEBUG:    < PONG 10 7a b5 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 4b 2f ae [binary, 4 bytes]
DEBUG:    < PONG 2a 4b 2f ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e 41 82 71 [binary, 4 bytes]
DEBUG:    < PONG 3e 41 82 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '-\x198\x0b' [text, 4 bytes]
DEBUG:    < PONG '-\x198\x0b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944763.957214}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x16|2z' [text, 4 bytes]
DEBUG:    < PONG '\x16|2z' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 9b 73 6f [binary, 4 bytes]
DEBUG:    < PONG a2 9b 73 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc b9 33 9c [binary, 4 bytes]
DEBUG:    < PONG bc b9 33 9c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '*4WH' [text, 4 bytes]
DEBUG:    < PONG '*4WH' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 e4 24 aa [binary, 4 bytes]
DEBUG:    < PONG d9 e4 24 aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944793.9641898}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 9d 6b c3 [binary, 4 bytes]
DEBUG:    < PONG d1 9d 6b c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 0a 4b b8 [binary, 4 bytes]
DEBUG:    < PONG 78 0a 4b b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d fb c7 41 [binary, 4 bytes]
DEBUG:    < PONG 2d fb c7 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee 42 ff 96 [binary, 4 bytes]
DEBUG:    < PONG ee 42 ff 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '?' [text, 4 bytes]
DEBUG:    < PONG '?' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 81 5e f4 [binary, 4 bytes]
DEBUG:    < PONG 8a 81 5e f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 ca 32 ca [binary, 4 bytes]
DEBUG:    < PONG 77 ca 32 ca [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944822.4068918}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944823.9669993}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 b0 2d a8 [binary, 4 bytes]
DEBUG:    < PONG c2 b0 2d a8 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 74 2a 9f f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 74 2a 9f f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944838.6062496}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 0e d4 23 [binary, 4 bytes]
DEBUG:    < PONG cb 0e d4 23 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 1c e7 3b [binary, 4 bytes]
DEBUG:    < PONG 02 1c e7 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944853.9771547}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 09 82 0d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 b1 bd 64 [binary, 4 bytes]
DEBUG:    < PONG 1c 09 82 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f2 b1 bd 64 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d df af 90 [binary, 4 bytes]
DEBUG:    < PONG 8d df af 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 45 10 02 [binary, 4 bytes]
DEBUG:    < PONG e7 45 10 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944860.4146307}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 97 ed 25 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 2c 32 4a [binary, 4 bytes]
DEBUG:    < PONG bd 97 ed 25 [binary, 4 bytes]
DEBUG:    < PONG bf 2c 32 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f c3 00 46 [binary, 4 bytes]
DEBUG:    < PONG 1f c3 00 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 47 87 93 [binary, 4 bytes]
DEBUG:    < PONG 60 47 87 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944883.9815953}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944890.4166002}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 43 00 a5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 2a ea b4 [binary, 4 bytes]
DEBUG:    < PONG 25 43 00 a5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f1 2a ea b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 b1 41 d4 [binary, 4 bytes]
DEBUG:    < PONG f4 b1 41 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 cc 04 57 [binary, 4 bytes]
DEBUG:    < PONG 22 cc 04 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944913.989198}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 4d 16 d5 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 24 d5 06 [binary, 4 bytes]
DEBUG:    < PONG 22 4d 16 d5 [binary, 4 bytes]
DEBUG:    < PONG 04 24 d5 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'P\u075e}' [text, 4 bytes]
DEBUG:    < PONG 'P\u075e}' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 56 52 93 [binary, 4 bytes]
DEBUG:    < PONG 47 56 52 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944920.5435455}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 c9 3c c2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 26 c0 08 e8 [binary, 4 bytes]
DEBUG:    < PONG f4 c9 3c c2 [binary, 4 bytes]
DEBUG:    < PONG 26 c0 08 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 9f c9 43 [binary, 4 bytes]
DEBUG:    < PONG 51 9f c9 43 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 ac 6c b2 [binary, 4 bytes]
DEBUG:    < PONG c7 ac 6c b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944943.9867795}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944950.4307795}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'Kj"o' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4d f4 7b ab [binary, 4 bytes]
DEBUG:    < PONG 'Kj"o' [text, 4 bytes]
DEBUG:    < PONG 4d f4 7b ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 c7 dd 08 [binary, 4 bytes]
DEBUG:    < PONG 76 c7 dd 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 7a 9c 59 [binary, 4 bytes]
DEBUG:    < PONG 05 7a 9c 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944973.9976733}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 ea 7c 44 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 fd 66 49 [binary, 4 bytes]
DEBUG:    < PONG 86 ea 7c 44 [binary, 4 bytes]
DEBUG:    < PONG 17 fd 66 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 08 58 87 [binary, 4 bytes]
DEBUG:    < PONG 75 08 58 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 37 f9 85 [binary, 4 bytes]
DEBUG:    < PONG 7b 37 f9 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745944980.4290802}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 a8 e1 8d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 0b ca 68 [binary, 4 bytes]
DEBUG:    < PONG d3 0b ca 68 [binary, 4 bytes]
DEBUG:    < PONG 34 a8 e1 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 56 eb 68 [binary, 4 bytes]
DEBUG:    < PONG ef 56 eb 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 24 40 61 [binary, 4 bytes]
DEBUG:    < PONG e7 24 40 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945003.4497213}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Action=buy_in, Player=qq, Result=True
Checking for expired rooms...
Room 0d281117-d6ad-4972-b7a3-969997976163 has expired after 316.8 minutes of inactivity
Room 0d281117-d6ad-4972-b7a3-969997976163 has been idle for 316.8 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 98864112-d748-413a-a015-1c9483793f2e has expired after 313.1 minutes of inactivity
Room 98864112-d748-413a-a015-1c9483793f2e has been idle for 313.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3 has expired after 310.7 minutes of inactivity
Room 352c8ffe-e3ce-4b28-aafd-c796de267aa3 has been idle for 310.7 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room b8e2f51f-a82b-42e1-815a-a56466f715c5 has expired after 308.4 minutes of inactivity
Room b8e2f51f-a82b-42e1-815a-a56466f715c5 has been idle for 308.4 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room dd51df4b-7baf-4c13-8446-855d03ab1f0f has expired after 307.1 minutes of inactivity
Room dd51df4b-7baf-4c13-8446-855d03ab1f0f has been idle for 307.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 26c0b92d-8056-41d8-b975-9c85919ad08e has expired after 303.2 minutes of inactivity
Room 26c0b92d-8056-41d8-b975-9c85919ad08e has been idle for 303.2 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: 0d281117-d6ad-4972-b7a3-969997976163
已删除房间 0d281117-d6ad-4972-b7a3-969997976163，当前房间总数: 12
Room state saved successfully. Rooms: 12
Removing expired room: 98864112-d748-413a-a015-1c9483793f2e
已删除房间 98864112-d748-413a-a015-1c9483793f2e，当前房间总数: 11
Room state saved successfully. Rooms: 11
Removing expired room: 352c8ffe-e3ce-4b28-aafd-c796de267aa3
已删除房间 352c8ffe-e3ce-4b28-aafd-c796de267aa3，当前房间总数: 10
Room state saved successfully. Rooms: 10
Removing expired room: b8e2f51f-a82b-42e1-815a-a56466f715c5
已删除房间 b8e2f51f-a82b-42e1-815a-a56466f715c5，当前房间总数: 9
Room state saved successfully. Rooms: 9
Removing expired room: dd51df4b-7baf-4c13-8446-855d03ab1f0f
已删除房间 dd51df4b-7baf-4c13-8446-855d03ab1f0f，当前房间总数: 8
Room state saved successfully. Rooms: 8
Removing expired room: 26c0b92d-8056-41d8-b975-9c85919ad08e
已删除房间 26c0b92d-8056-41d8-b975-9c85919ad08e，当前房间总数: 7
Room state saved successfully. Rooms: 7
Removed 6 expired rooms. Remaining rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Starting game in room 01d1f837-0170-4cb9-873a-b570fa63d717
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: Ad, Kh, 8h
Dealt cards to player position 7: 10h, Jd, 3h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745944657.5455253
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-30 01:37:37.552802
[BROADCAST][room_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 01d1f837-0170-4cb9-873a-b570fa63d717: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 7
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Checking for expired rooms...
Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23 will expire in 0.9 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Notified 1 rooms about upcoming expiration. Remaining rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 01d1f837-0170-4cb9-873a-b570fa63d717
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 01d1f837-0170-4cb9-873a-b570fa63d717

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52811 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52814 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: gaVMudPIEVWNFaXGe1sBNg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52817) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: xU5l84KUeimYAEfOiUeXj3blIxw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:43:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4400 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"8h"}]}}' [1397 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945004.0969703}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: +6lKp42Tkkyk/Tpa9xU/2Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52819) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 6M8ajMiinjWN3sSC6fkm5rGpcv0=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:43:23 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4402 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"3h"}]}}' [1399 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745945004.283475}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745945004.283475}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 4d 1a e1 [binary, 4 bytes]
DEBUG:    < PONG d8 4d 1a e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 94 ae f4 [binary, 4 bytes]
DEBUG:    < PONG fa 94 ae f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 76 23 30 [binary, 4 bytes]
DEBUG:    < PONG b8 76 23 30 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 61 f9 9f [binary, 4 bytes]
DEBUG:    < PONG d2 61 f9 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 6f 75 8b [binary, 4 bytes]
DEBUG:    < PONG 3c 6f 75 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945034.1115367}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945034.4390836}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 67 af 76 93 [binary, 4 bytes]
DEBUG:    < PONG 67 af 76 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 2e 3c 2d [binary, 4 bytes]
DEBUG:    < PONG c6 2e 3c 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 6c 7f d6 [binary, 4 bytes]
DEBUG:    < PONG 23 6c 7f d6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945050.8180232}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Client qq reconnected
Sent reconnect state to qq
Added qq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 01d1f837-0170-4cb9-873a-b570fa63d717

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:52816 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: lVc4BWCa105ZR1WK4I/7NQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52881) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: q/KCRbyEJDkm+cwNoCXmuw87BaE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:44:11 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4383 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"8h"}]}}' [1395 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945051.2197022}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945051.2197022}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945051.5842073}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room 01d1f837-0170-4cb9-873a-b570fa63d717
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 01d1f837-0170-4cb9-873a-b570fa63d717

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:52818 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: NPHvWsEEBqH6JJkwf7IOLw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 52887) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rwCggpI9VfB22e//XGPbOH9g7B4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:44:12 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4385 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"3h"}]}}' [1399 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...tamp":1745945052.1889}}' [81 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...tamp":1745945052.1889}}' [81 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 30 3d f3 c4 [binary, 4 bytes]
DEBUG:    < PONG 30 3d f3 c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 57 ac f0 [binary, 4 bytes]
DEBUG:    < PONG 7e 57 ac f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 e0 cb 9b [binary, 4 bytes]
DEBUG:    < PONG b2 e0 cb 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 a9 c4 37 [binary, 4 bytes]
DEBUG:    < PONG 54 a9 c4 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ec e8 ea d0 [binary, 4 bytes]
DEBUG:    < PONG ec e8 ea d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d 9a 7e 3b [binary, 4 bytes]
DEBUG:    < PONG 0d 9a 7e 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945081.2353702}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945082.4533355}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 13 da 6a [binary, 4 bytes]
DEBUG:    < PONG 20 13 da 6a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 12 b1 40 [binary, 4 bytes]
DEBUG:    < PONG 38 12 b1 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u4016[' [text, 4 bytes]
DEBUG:    < PONG '\u4016[' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 37 77 b4 [binary, 4 bytes]
DEBUG:    < PONG ab 37 77 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945111.2354188}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0b 77 f5 ec [binary, 4 bytes]
DEBUG:    < PONG 0b 77 f5 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac 90 04 17 [binary, 4 bytes]
DEBUG:    < PONG ac 90 04 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945112.4527986}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 ba 42 65 [binary, 4 bytes]
DEBUG:    < PONG 68 ba 42 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '$N\u04bf' [text, 4 bytes]
DEBUG:    < PONG '$N\u04bf' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 ba d4 db [binary, 4 bytes]
DEBUG:    < PONG a4 ba d4 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 96 33 cf [binary, 4 bytes]
DEBUG:    < PONG 59 96 33 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 8d 11 c1 [binary, 4 bytes]
DEBUG:    < PONG 31 8d 11 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c be 30 7e [binary, 4 bytes]
DEBUG:    < PONG 8c be 30 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945141.2430582}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945142.4700606}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 c4 35 55 [binary, 4 bytes]
DEBUG:    < PONG f2 c4 35 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b 23 be dd [binary, 4 bytes]
DEBUG:    < PONG 6b 23 be dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '6<\x1fr' [text, 4 bytes]
DEBUG:    < PONG '6<\x1fr' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 6a 7a 3e [binary, 4 bytes]
DEBUG:    < PONG d8 6a 7a 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945171.2509189}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'M\x00\x1eR' [text, 4 bytes]
DEBUG:    < PONG 'M\x00\x1eR' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 62 46 f8 8a [binary, 4 bytes]
DEBUG:    < PONG 62 46 f8 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945172.47697}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 2e 86 4e [binary, 4 bytes]
DEBUG:    < PONG b8 2e 86 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 b0 76 17 [binary, 4 bytes]
DEBUG:    < PONG e5 b0 76 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 5d 1d db [binary, 4 bytes]
DEBUG:    < PONG 2e 5d 1d db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 18 a5 73 [binary, 4 bytes]
DEBUG:    < PONG fd 18 a5 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745945194.083817}}' [86 bytes]
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 61 82 00 [binary, 4 bytes]
DEBUG:    < PONG f1 61 82 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
Client qq reconnected
Sent reconnect state to qq
Added qq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 01d1f837-0170-4cb9-873a-b570fa63d717
INFO:     127.0.0.1:53143 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='hq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53143 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: Gj0AG+s+8rZayXro3DPyVA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53149) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNDYwNn0.SZhzEwp-xwVsswP-v510dCSN493n9s8bSO1QExILR6s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 2OEhp1jLKJlBuvuy3/NkX1XhfMo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:46:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4381 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"8h"}]}}' [1397 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945194.7427366}}' [84 bytes]
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 01d1f837-0170-4cb9-873a-b570fa63d717
Client hq reconnected
Sent reconnect state to hq
Added hq to room 01d1f837-0170-4cb9-873a-b570fa63d717
INFO:     127.0.0.1:53151 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53151 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: vonpigy1pTHEHtuhwk6jLw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53156) - "WebSocket /ws/game/01d1f837-0170-4cb9-873a-b570fa63d717?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNDYwNX0.dq5znevClmi0EAHc8WNZmjrvLIaZ0lG4oPMGeNHPuX8" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: Ua4fY2mdUoE/yicCv3hgViVnY4k=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:46:34 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...pdate for this room"}}}' [4385 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"3h"}]}}' [1399 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945195.2610762}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945195.2610762}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 6c 1e e0 [binary, 4 bytes]
DEBUG:    < PONG ce 6c 1e e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 73 64 d9 7a [binary, 4 bytes]
DEBUG:    < PONG 73 64 d9 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 24 fb c4 [binary, 4 bytes]
DEBUG:    < PONG 78 24 fb c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 b0 0b 84 [binary, 4 bytes]
DEBUG:    < PONG 03 b0 0b 84 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae ff ac 0b [binary, 4 bytes]
DEBUG:    < PONG ae ff ac 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945224.7543876}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945225.4752004}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 3e cc d9 [binary, 4 bytes]
DEBUG:    < PONG a7 3e cc d9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 5d 6e 9a [binary, 4 bytes]
DEBUG:    < PONG 10 5d 6e 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 40 ba 71 58 [binary, 4 bytes]
DEBUG:    < PONG 40 ba 71 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e af 0f 4e [binary, 4 bytes]
DEBUG:    < PONG 2e af 0f 4e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1e.\x1df' [text, 4 bytes]
DEBUG:    < PONG '\x1e.\x1df' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d1 92 2f a3 [binary, 4 bytes]
DEBUG:    < PONG d1 92 2f a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945254.766339}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d e8 63 cd [binary, 4 bytes]
DEBUG:    < PONG 9d e8 63 cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945255.4832742}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e a0 57 c6 [binary, 4 bytes]
DEBUG:    < PONG 2e a0 57 c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 4b 18 2e [binary, 4 bytes]
DEBUG:    < PONG d3 4b 18 2e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 4a 7d f7 [binary, 4 bytes]
DEBUG:    < PONG dd 4a 7d f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 94 c6 97 [binary, 4 bytes]
DEBUG:    < PONG c1 94 c6 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 86 24 72 [binary, 4 bytes]
DEBUG:    < PONG 60 86 24 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945284.7713087}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945285.4882169}' [46 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1594 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1594 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"Kh"}]}}' [1413 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"3h"}]}}' [1454 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1641 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1641 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83...:"h","display":"Kh"}]}}' [1461 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"01d1f83..."h","display":"10h"}]}}' [1463 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd 65 e7 e8 [binary, 4 bytes]
DEBUG:    < PONG bd 65 e7 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 0b f1 d5 [binary, 4 bytes]
DEBUG:    < PONG d5 0b f1 d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 69 da ce 4b [binary, 4 bytes]
DEBUG:    < PONG 69 da ce 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 db d2 18 [binary, 4 bytes]
DEBUG:    < PONG 95 db d2 18 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4f e4 c0 8f [binary, 4 bytes]
DEBUG:    < PONG 4f e4 c0 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 65 f6 16 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG af 65 f6 16 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945314.7712917}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 cc e3 a3 [binary, 4 bytes]
DEBUG:    < PONG 58 cc e3 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945315.4988647}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 43 6e a6 [binary, 4 bytes]
DEBUG:    < PONG 90 43 6e a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 db 42 bc [binary, 4 bytes]
DEBUG:    < PONG 20 db 42 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 30 8d 5f [binary, 4 bytes]
DEBUG:    < PONG d3 30 8d 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
WARNING:  StatReload detected changes in 'src\models\room.py'. Reloading...
DEBUG:    % sending keepalive ping
DEBUG:    > PING 54 ed f1 6c [binary, 4 bytes]
DEBUG:    < PONG 54 ed f1 6c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7d d1 77 f4 [binary, 4 bytes]
DEBUG:    < PONG 7d d1 77 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945344.7751582}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945345.5013523}' [46 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945353.1054144}}' [87 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945353.1094368}}' [87 bytes]
INFO:     connection closed
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room 01d1f837-0170-4cb9-873a-b570fa63d717
Room state saved successfully. Rooms: 7
Checking for expired rooms...
Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23 has expired after 34.1 minutes of inactivity
Room dc7d8ae9-83a9-4324-af52-dafce6b4ce23 has been idle for 34.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room b424f4d6-e86f-4182-93f7-83834f73fef2 will expire in 3.7 minutes
Sent room_expiring notification to player: hq
Room 9d03a888-0c3b-425c-a103-6807e17d89b5 will expire in 4.4 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Removing expired room: dc7d8ae9-83a9-4324-af52-dafce6b4ce23
已删除房间 dc7d8ae9-83a9-4324-af52-dafce6b4ce23，当前房间总数: 6
Room state saved successfully. Rooms: 6
Removed 1 expired rooms, Notified 2 rooms about upcoming expiration. Remaining rooms: 6
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
玩家 hq 弃掉了第 2 张牌: {'rank': '8', 'suit': 'h', 'display': '8h'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '01d1f837-0170-4cb9-873a-b570fa63d717', 'name': 'sdffds', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 2970.220425, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '8', 'suit': 'h', 'display': '8h'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'J', 'suit': 'd', 'display': 'Jd'}, {'rank': '10', 'suit': 'h', 'display': '10h'}, {'rank': '3', 'suit': 'h', 'display': '3h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 0, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:37:37.552802'}
玩家 qq 弃掉了第 2 张牌: {'rank': '3', 'suit': 'h', 'display': '3h'}
[BROADCAST][game_update]: Action=discard, Player=qq, GameState={'room_id': '01d1f837-0170-4cb9-873a-b570fa63d717', 'name': 'sdffds', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 2965.39244, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '8', 'suit': 'h', 'display': '8h'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'h', 'display': '3h'}}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'h', 'display': '3h'}, 'hand': [{'rank': 'J', 'suit': 'd', 'display': 'Jd'}, {'rank': '10', 'suit': 'h', 'display': '10h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 0, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:37:37.552802'}
Room state saved successfully. Rooms: 6
Room state saved successfully. Rooms: 6
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 01d1f837-0170-4cb9-873a-b570fa63d717
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 01d1f837-0170-4cb9-873a-b570fa63d717

===== 加入房间请求开始 =====
请求数据: room_id='01d1f837-0170-4cb9-873a-b570fa63d717' username='qq'
成功找到房间: 01d1f837-0170-4cb9-873a-b570fa63d717, 名称: sdffds
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53574 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
WebSocket disconnected for client: qq
INFO:     127.0.0.1:53574 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:53574 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:53591 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:53591 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:53591 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53596 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53596 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53596 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53574 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53577 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53577 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53577 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53577 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53596 - "GET /api/rooms HTTP/1.1" 200 OK
Room state saved successfully. Rooms: 6
INFO:     127.0.0.1:53596 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='gfa' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=gfa, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1324244231584
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=1e692007-973d-4266-8258-59ca162aaac0, name=gfa
Room created successfully: id=1e692007-973d-4266-8258-59ca162aaac0
已创建房间 1e692007-973d-4266-8258-59ca162aaac0，房主: hq，当前房间总数: 7
Room state saved successfully. Rooms: 7
房间创建成功, 房间ID: 1e692007-973d-4266-8258-59ca162aaac0
创建房间成功: {'id': '1e692007-973d-4266-8258-59ca162aaac0', 'name': 'gfa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:53596 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
尝试将用户 hq 添加到房间 1e692007-973d-4266-8258-59ca162aaac0
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 1e692007-973d-4266-8258-59ca162aaac0 with no seat assigned
成功: 用户 hq 已加入房间 1e692007-973d-4266-8258-59ca162aaac0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:53596 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53596 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53596 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: y6gMtGc5aXvYNa5eU1dnRw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53651) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: MrpI2HSm2CiCtPoL8E4LCbd93tE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:49:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4579 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945368.5085678}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: TVXMLFRNtfw6PQLWSN0ECA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53653) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: uOHLi8fFMAzM6exG994FfgrEgUI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:49:28 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945368.5913918}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...2aaac0","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945368.8772476}}' [494 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745945369.6535268}}' [525 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 1e692007-973d-4266-8258-59ca162aaac0
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:53658 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53658 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
尝试将用户 qq 添加到房间 1e692007-973d-4266-8258-59ca162aaac0
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 1e692007-973d-4266-8258-59ca162aaac0 with no seat assigned
成功: 用户 qq 已加入房间 1e692007-973d-4266-8258-59ca162aaac0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:53658 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53658 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53658 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: qvKQeOa3qB8n2pWd989JRw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53678) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: e5B+8VsBnw/8Uw0kSQeO9F27lh8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:49:32 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4581 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945373.5708964}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945373.5708964}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: xJRdB1GEtbhRCYkGllcYEw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53680) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bMDrc8NJ2A20RnPJ5jmADOd68oM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:49:33 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945373.6434076}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945373.6434076}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...2aaac0","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945374.3543274}}' [535 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945374.3543274}}' [535 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745945375.472529}}' [565 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745945375.472529}}' [565 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 0a 35 51 [binary, 4 bytes]
DEBUG:    < PONG f7 0a 35 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 58 7c ac [binary, 4 bytes]
DEBUG:    < PONG 59 58 7c ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...266-8258-59ca162aaac0"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745945391.0027785}}' [1488 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745945391.0027785}}' [1488 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1498 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1498 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"d","display":"4d"}]}}' [1411 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"h","display":"2h"}]}}' [1409 bytes]
INFO:     Shutting down
DEBUG:    % sending keepalive ping
DEBUG:    > PING 16 6b 8f a2 [binary, 4 bytes]
DEBUG:    < PONG 16 6b 8f a2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 24 32 85 [binary, 4 bytes]
DEBUG:    < PONG a3 24 32 85 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1605 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1605 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200..."d","display":"10d"}]}}' [1427 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"h","display":"2h"}]}}' [1464 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945398.610845}' [45 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1655 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1655 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200..."d","display":"10d"}]}}' [1476 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"c","display":"7c"}]}}' [1474 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945403.7155778}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'B5\x1b\t' [text, 4 bytes]
DEBUG:    < PONG 'B5\x1b\t' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 88 18 65 [binary, 4 bytes]
DEBUG:    < PONG 64 88 18 65 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f6 07 81 a7 [binary, 4 bytes]
DEBUG:    < PONG f6 07 81 a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 62 e4 d4 [binary, 4 bytes]
DEBUG:    < PONG 63 62 e4 d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 7 -> 1"}}' [1487 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 7 -> 1"}}' [1487 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"s","display":"6s"}]}}' [1400 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"d","display":"4d"}]}}' [1396 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 f3 7a d0 [binary, 4 bytes]
DEBUG:    < PONG 81 f3 7a d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945428.6136796}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8b e0 f2 5d [binary, 4 bytes]
DEBUG:    < PONG 8b e0 f2 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 03 4d 0a [binary, 4 bytes]
DEBUG:    < PONG bf 03 4d 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea bf 51 b8 [binary, 4 bytes]
DEBUG:    < PONG ea bf 51 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945433.8258803}' [46 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745945443.4451888}}' [87 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 c1 22 ce [binary, 4 bytes]
DEBUG:    < PONG 68 c1 22 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 65 62 fb [binary, 4 bytes]
DEBUG:    < PONG 17 65 62 fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a7 02 f1 2b [binary, 4 bytes]
DEBUG:    < PONG a7 02 f1 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fd 63 6f f3 [binary, 4 bytes]
DEBUG:    < PONG fd 63 6f f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\ua0815' [text, 4 bytes]
DEBUG:    < PONG '\ua0815' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 ba 25 d2 [binary, 4 bytes]
DEBUG:    < PONG c3 ba 25 d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5596]
Client qq reconnected
Sent reconnect state to qq
Added qq to room 1e692007-973d-4266-8258-59ca162aaac0
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Action=buy_in, Player=qq, Result=True
Starting game in room 1e692007-973d-4266-8258-59ca162aaac0
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 10d, Kc, 4d
Dealt cards to player position 7: 9c, 7c, 2h

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745945390.9987566
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-30 01:49:51.002778
[BROADCAST][room_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '4', 'suit': 'd', 'display': '4d'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '1e692007-973d-4266-8258-59ca162aaac0', 'name': 'gfa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 3594.344009, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '4', 'suit': 'd', 'display': '4d'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': '9', 'suit': 'c', 'display': '9c'}, {'rank': '7', 'suit': 'c', 'display': '7c'}, {'rank': '2', 'suit': 'h', 'display': '2h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 24.339987754821777, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:49:51.002778'}
Room state saved successfully. Rooms: 7
玩家 qq 弃掉了第 2 张牌: {'rank': '2', 'suit': 'h', 'display': '2h'}
[BROADCAST][game_update]: Action=discard, Player=qq, GameState={'room_id': '1e692007-973d-4266-8258-59ca162aaac0', 'name': 'gfa', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 3588.638212, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '4', 'suit': 'd', 'display': '4d'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': True, 'discarded_card': {'rank': '2', 'suit': 'h', 'display': '2h'}}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': True, 'discarded_card': {'rank': '2', 'suit': 'h', 'display': '2h'}, 'hand': [{'rank': '9', 'suit': 'c', 'display': '9c'}, {'rank': '7', 'suit': 'c', 'display': '7c'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 18.634190320968628, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:49:51.002778'}
处理玩家 7 动作: fold, 金额: 0
玩家 qq 选择弃牌
Final pot after adding player bets: 1.5
Player hq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 1 -> 0 (位置 1)
Dealing cards to players
Dealt cards to player position 1: 10h, 10s, 6s
Dealt cards to player position 7: Ah, 4d, 8c

=== POSTING BLINDS ===
Before blinds: hq has 111.5 chips
Before blinds: qq has 332.5 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 111.0
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 331.5

=== CHIPS AFTER BLINDS ===
hq has 111.0 chips, bet: 0.5, position: BUTTON
qq has 331.5 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
回合成功开始。当前玩家: hq
[BROADCAST][game_update] Room 1e692007-973d-4266-8258-59ca162aaac0: Sending update. Reason: Current player changed: 7 -> 1
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 1e692007-973d-4266-8258-59ca162aaac0
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 1e692007-973d-4266-8258-59ca162aaac0
处理玩家 1 动作: discard, 金额: 2
玩家 hq 必须先弃掉一张牌
Room state saved successfully. Rooms: 7
Room state saved successfully. Rooms: 7
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Application stopping...
Rooms at shutdown: {'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x00000134533098E0>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x0000013453309A00>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x0000013453309BB0>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x0000013453309D60>, 'e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d': <src.models.room.Room object at 0x00000134533E01A0>, '01d1f837-0170-4cb9-873a-b570fa63d717': <src.models.room.Room object at 0x00000134533E0F50>, '1e692007-973d-4266-8258-59ca162aaac0': <src.models.room.Room object at 0x000001345343AE40>}
INFO:     Started server process [17876]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
DEBUG:    = connection is CONNECTING
DEBUG:    = connection is CONNECTING
Initializing RoomManager
Creating Room: id=b424f4d6-e86f-4182-93f7-83834f73fef2, name=cxa
Room created successfully: id=b424f4d6-e86f-4182-93f7-83834f73fef2
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Room: id=9d03a888-0c3b-425c-a103-6807e17d89b5, name=vfa
Room created successfully: id=9d03a888-0c3b-425c-a103-6807e17d89b5
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f, name=sa1
Room created successfully: id=853c76d8-6c85-446f-a4d9-ec76a90bd10f
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=314e283e-e4fb-4db3-b5ab-575e09d08d84, name=fsq
Room created successfully: id=314e283e-e4fb-4db3-b5ab-575e09d08d84
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d, name=vcbs
Room created successfully: id=e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=01d1f837-0170-4cb9-873a-b570fa63d717, name=sdffds
Room created successfully: id=01d1f837-0170-4cb9-873a-b570fa63d717
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Creating Room: id=1e692007-973d-4266-8258-59ca162aaac0, name=gfa
Room created successfully: id=1e692007-973d-4266-8258-59ca162aaac0
Creating Player: name=hq, chips=111.0
Player hq created successfully with no assigned seat
Creating Player: name=qq, chips=333.0
Player qq created successfully with no assigned seat
Room state loaded successfully. Rooms: 7
Room manager cleanup thread started
Main room_manager instance id: 1842169931168
Initial rooms: {'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x000001ACE9F5B6B0>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x000001ACE9F5B980>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x000001ACE9F780B0>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x000001ACE9F78740>, 'e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d': <src.models.room.Room object at 0x000001ACE9F78A70>, '01d1f837-0170-4cb9-873a-b570fa63d717': <src.models.room.Room object at 0x000001ACE9F78C20>, '1e692007-973d-4266-8258-59ca162aaac0': <src.models.room.Room object at 0x000001ACE9F78DD0>}
Application starting...
Rooms at startup: {'b424f4d6-e86f-4182-93f7-83834f73fef2': <src.models.room.Room object at 0x000001ACE9F5B6B0>, '9d03a888-0c3b-425c-a103-6807e17d89b5': <src.models.room.Room object at 0x000001ACE9F5B980>, '853c76d8-6c85-446f-a4d9-ec76a90bd10f': <src.models.room.Room object at 0x000001ACE9F780B0>, '314e283e-e4fb-4db3-b5ab-575e09d08d84': <src.models.room.Room object at 0x000001ACE9F78740>, 'e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d': <src.models.room.Room object at 0x000001ACE9F78A70>, '01d1f837-0170-4cb9-873a-b570fa63d717': <src.models.room.Room object at 0x000001ACE9F78C20>, '1e692007-973d-4266-8258-59ca162aaac0': <src.models.room.Room object at 0x000001ACE9F78DD0>}
Timer update task started
[DEBUG] Timer update task started at 2025-04-30 00:51:37.690035
INFO:     127.0.0.1:53902 - "GET /api/users/profile HTTP/1.1" 403 Forbidden

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53785 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53792 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53790 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:53883 - "GET /api/users/profile HTTP/1.1" 403 Forbidden

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='qq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53786 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53791 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: K0SSZYci+9LgkJTDlVYm9Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits

===== 加入房间请求开始 =====
请求数据: room_id='1e692007-973d-4266-8258-59ca162aaac0' username='hq'
成功找到房间: 1e692007-973d-4266-8258-59ca162aaac0, 名称: gfa
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53793 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    < GET /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: KKv+gCLAh5LO71yeRB1pzg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53804) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTM1OX0.6ecn3WtvxktQ2b1OBn9Yjhc05XNs733N5mG6kt71D-s" [accepted]
INFO:     ('127.0.0.1', 53806) - "WebSocket /ws/game/1e692007-973d-4266-8258-59ca162aaac0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTM1OH0.eD8CpHfpN6pCVuzs0CMTXTCG09ySZh-ZD7MSKnlohJ4" [accepted]
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
Client qq connected
Added qq to room 1e692007-973d-4266-8258-59ca162aaac0
Client hq connected
Added hq to room 1e692007-973d-4266-8258-59ca162aaac0
Error sending message to qq: no close frame received or sent
Error broadcasting to room member qq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 1e692007-973d-4266-8258-59ca162aaac0
Error broadcasting to room member hq: no close frame received or sent
Error sending message to hq: no close frame received or sent
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 1e692007-973d-4266-8258-59ca162aaac0
INFO:     127.0.0.1:53883 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53883 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:53902 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53902 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='va1' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=va1, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1842169931168
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=390625c0-1255-408b-8f5c-39eaf9646339, name=va1
Room created successfully: id=390625c0-1255-408b-8f5c-39eaf9646339
已创建房间 390625c0-1255-408b-8f5c-39eaf9646339，房主: hq，当前房间总数: 8
Room state saved successfully. Rooms: 8
房间创建成功, 房间ID: 390625c0-1255-408b-8f5c-39eaf9646339
创建房间成功: {'id': '390625c0-1255-408b-8f5c-39eaf9646339', 'name': 'va1', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:53883 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='hq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
尝试将用户 hq 添加到房间 390625c0-1255-408b-8f5c-39eaf9646339
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 390625c0-1255-408b-8f5c-39eaf9646339 with no seat assigned
成功: 用户 hq 已加入房间 390625c0-1255-408b-8f5c-39eaf9646339
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:53883 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='hq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53883 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='hq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:53883 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTQ5OX0.DIxkEW8qCxY4Gb2uZUyDWCXfeithOp4-xWD1gKLRIV0 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: k82KxyQDg38BA+r1Ln4PJA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53936) - "WebSocket /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTQ5OX0.DIxkEW8qCxY4Gb2uZUyDWCXfeithOp4-xWD1gKLRIV0" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: kSDIp5XyGjJrTKStbmFxVfOnhXk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:51:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"qq","chips":333.0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945504.0878687}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTQ5OX0.DIxkEW8qCxY4Gb2uZUyDWCXfeithOp4-xWD1gKLRIV0 HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 24VrxLp8IM3ozmsxSoMEdw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53938) - "WebSocket /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMwNTQ5OX0.DIxkEW8qCxY4Gb2uZUyDWCXfeithOp4-xWD1gKLRIV0" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: o6NhAVRdPK9jyItSnDpO8odA/SI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:51:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945504.1816843}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...646339","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945504.7637198}}' [494 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745945505.6617796}}' [525 bytes]
Client hq reconnected
Sent pending message to hq: game_state
Added hq to room 390625c0-1255-408b-8f5c-39eaf9646339
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:53904 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='qq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
尝试将用户 qq 添加到房间 390625c0-1255-408b-8f5c-39eaf9646339
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 390625c0-1255-408b-8f5c-39eaf9646339 with no seat assigned
成功: 用户 qq 已加入房间 390625c0-1255-408b-8f5c-39eaf9646339
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:53904 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='qq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53904 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='390625c0-1255-408b-8f5c-39eaf9646339' username='qq'
成功找到房间: 390625c0-1255-408b-8f5c-39eaf9646339, 名称: va1
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:53904 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTUwMH0.koFLk4pPeOK-BI3kvXDaAb82Zg8O5hC-9pKfuQsgyCM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: ZKjHOvFdHbURo988bj+m1Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53957) - "WebSocket /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTUwMH0.koFLk4pPeOK-BI3kvXDaAb82Zg8O5hC-9pKfuQsgyCM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: mxjNH6beYUXXz/88VchoB4jdHs4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:51:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"1e69200...:"qq","chips":333.0}]}}' [314 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945509.4237921}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945509.4237921}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTUwMH0.koFLk4pPeOK-BI3kvXDaAb82Zg8O5hC-9pKfuQsgyCM HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 577DeP9X1P7DX/tVdBVrBA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 53959) - "WebSocket /ws/game/390625c0-1255-408b-8f5c-39eaf9646339?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMwNTUwMH0.koFLk4pPeOK-BI3kvXDaAb82Zg8O5hC-9pKfuQsgyCM" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: wgUgISvyCC4z3/eazrfbb8rxRjw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 16:51:49 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945509.5011182}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745945509.5011182}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...646339","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945513.0407436}}' [535 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745945513.0407436}}' [535 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745945514.5000846}}' [566 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745945514.5000846}}' [566 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 aa f5 4c [binary, 4 bytes]
DEBUG:    < PONG c6 aa f5 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 64 15 bc [binary, 4 bytes]
DEBUG:    < PONG d9 64 15 bc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...08b-8f5c-39eaf9646339"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745945527.2882614}}' [1493 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745945527.2882614}}' [1493 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1498 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1498 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"h","display":"3h"}]}}' [1409 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"s","display":"2s"}]}}' [1409 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 2d b2 4a [binary, 4 bytes]
DEBUG:    < PONG 8c 2d b2 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 4a 8e 4c [binary, 4 bytes]
DEBUG:    < PONG f1 4a 8e 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945534.196987}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945539.7180626}' [46 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1598 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1598 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"h","display":"7h"}]}}' [1417 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"s","display":"2s"}]}}' [1456 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 61 7b 8a [binary, 4 bytes]
DEBUG:    < PONG 37 61 7b 8a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db 52 c5 03 [binary, 4 bytes]
DEBUG:    < PONG db 52 c5 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 3d 75 c1 [binary, 4 bytes]
DEBUG:    < PONG eb 3d 75 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 9b 63 ae [binary, 4 bytes]
DEBUG:    < PONG bf 9b 63 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1483 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1483 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"c","display":"2c"}]}}' [1391 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"390625c...:"d","display":"7d"}]}}' [1391 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 53 95 59 [binary, 4 bytes]
DEBUG:    < PONG c3 53 95 59 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945564.1984599}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 1b 9f 1c [binary, 4 bytes]
DEBUG:    < PONG 22 1b 9f 1c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 29 2b fd 13 [binary, 4 bytes]
DEBUG:    < PONG 29 2b fd 13 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '&\x1c<\x7f' [text, 4 bytes]
DEBUG:    < PONG '&\x1c<\x7f' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945569.9217951}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a4 7d bc 9f [binary, 4 bytes]
DEBUG:    < PONG a4 7d bc 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 3e da e7 [binary, 4 bytes]
DEBUG:    < PONG d4 3e da e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'z|;s' [text, 4 bytes]
DEBUG:    < PONG 'z|;s' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ab 0f b0 9e [binary, 4 bytes]
DEBUG:    < PONG ab 0f b0 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945594.211355}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945600.553963}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 92 c1 f8 [binary, 4 bytes]
DEBUG:    < PONG 3a 92 c1 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'K\x1e`A' [text, 4 bytes]
DEBUG:    < PONG 'K\x1e`A' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d3 d8 4f 0d [binary, 4 bytes]
DEBUG:    < PONG d3 d8 4f 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 37 0d eb [binary, 4 bytes]
DEBUG:    < PONG 99 37 0d eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING df e6 6e 0f [binary, 4 bytes]
DEBUG:    < PONG df e6 6e 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945624.2166367}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 47 cf 6e [binary, 4 bytes]
DEBUG:    < PONG 42 47 cf 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 fd a4 f3 [binary, 4 bytes]
DEBUG:    < PONG 58 fd a4 f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 25 c0 4c 72 [binary, 4 bytes]
DEBUG:    < PONG 25 c0 4c 72 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945630.5498056}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 79 4a 83 [binary, 4 bytes]
DEBUG:    < PONG 8f 79 4a 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 81 bf a9 55 [binary, 4 bytes]
DEBUG:    < PONG 81 bf a9 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 bc 1d 81 [binary, 4 bytes]
DEBUG:    < PONG 86 bc 1d 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 84 75 fe 95 [binary, 4 bytes]
DEBUG:    < PONG 84 75 fe 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945654.2214305}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945662.5540857}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'W\n,(' [text, 4 bytes]
DEBUG:    < PONG 'W\n,(' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 a5 46 db [binary, 4 bytes]
DEBUG:    < PONG 05 a5 46 db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 50 4f c6 [binary, 4 bytes]
DEBUG:    < PONG 92 50 4f c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 d6 f9 28 [binary, 4 bytes]
DEBUG:    < PONG 00 d6 f9 28 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0f ba 87 45 [binary, 4 bytes]
DEBUG:    < PONG 0f ba 87 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945684.2160397}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5b 52 fd 14 [binary, 4 bytes]
DEBUG:    < PONG 5b 52 fd 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c 53 93 cc [binary, 4 bytes]
DEBUG:    < PONG 6c 53 93 cc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING af 7e 6c a1 [binary, 4 bytes]
DEBUG:    < PONG af 7e 6c a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e b1 64 19 [binary, 4 bytes]
DEBUG:    < PONG 3e b1 64 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 eb b6 0d [binary, 4 bytes]
DEBUG:    < PONG 42 eb b6 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f ff d8 de [binary, 4 bytes]
DEBUG:    < PONG 6f ff d8 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 38 80 8f [binary, 4 bytes]
DEBUG:    < PONG fc 38 80 8f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945714.2190473}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945718.5512369}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 92 14 81 [binary, 4 bytes]
DEBUG:    < PONG c8 92 14 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 52 6c 43 90 [binary, 4 bytes]
DEBUG:    < PONG 52 6c 43 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 2d 55 22 [binary, 4 bytes]
DEBUG:    < PONG f7 2d 55 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 92 9d 0b [binary, 4 bytes]
DEBUG:    < PONG 28 92 9d 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 52 7f 92 [binary, 4 bytes]
DEBUG:    < PONG 97 52 7f 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945744.2311428}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '31&I' [text, 4 bytes]
DEBUG:    < PONG '31&I' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 e7 a0 f7 [binary, 4 bytes]
DEBUG:    < PONG 55 e7 a0 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 b4 05 03 [binary, 4 bytes]
DEBUG:    < PONG a6 b4 05 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945749.5928233}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f0 12 92 b5 [binary, 4 bytes]
DEBUG:    < PONG f0 12 92 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 67 92 69 [binary, 4 bytes]
DEBUG:    < PONG e1 67 92 69 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 9f 83 97 [binary, 4 bytes]
DEBUG:    < PONG 18 9f 83 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 1c 5d a7 [binary, 4 bytes]
DEBUG:    < PONG ba 1c 5d a7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945774.2271347}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945780.5697725}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 4d 54 81 [binary, 4 bytes]
DEBUG:    < PONG 92 4d 54 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 d2 b2 6e [binary, 4 bytes]
DEBUG:    < PONG e0 d2 b2 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9e 5f fa b5 [binary, 4 bytes]
DEBUG:    < PONG 9e 5f fa b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 c4 53 a3 [binary, 4 bytes]
DEBUG:    < PONG 10 c4 53 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x15\x16\x00_' [text, 4 bytes]
DEBUG:    < PONG '\x15\x16\x00_' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945804.236661}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 e9 43 62 [binary, 4 bytes]
DEBUG:    < PONG 33 e9 43 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x03\x11\u0102' [text, 4 bytes]
DEBUG:    < PONG '\x03\x11\u0102' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ee f2 be 08 [binary, 4 bytes]
DEBUG:    < PONG ee f2 be 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945809.8139584}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3d d5 12 ab [binary, 4 bytes]
DEBUG:    < PONG 3d d5 12 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%%\u0704' [text, 4 bytes]
DEBUG:    < PONG '%%\u0704' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 2a 06 b5 [binary, 4 bytes]
DEBUG:    < PONG b3 2a 06 b5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 a4 db 6d [binary, 4 bytes]
DEBUG:    < PONG a8 a4 db 6d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945834.2445352}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945842.5776882}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '{1[n' [text, 4 bytes]
DEBUG:    < PONG '{1[n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7e 01 ca d7 [binary, 4 bytes]
DEBUG:    < PONG 7e 01 ca d7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e b9 af 88 [binary, 4 bytes]
DEBUG:    < PONG 6e b9 af 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 09 41 88 [binary, 4 bytes]
DEBUG:    < PONG 11 09 41 88 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 09 33 ed [binary, 4 bytes]
DEBUG:    < PONG 9d 09 33 ed [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945864.2481472}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 3a ba 19 [binary, 4 bytes]
DEBUG:    < PONG b9 3a ba 19 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 1e ee 35 [binary, 4 bytes]
DEBUG:    < PONG 97 1e ee 35 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a d3 c0 82 [binary, 4 bytes]
DEBUG:    < PONG 0a d3 c0 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a bc 6e 55 [binary, 4 bytes]
DEBUG:    < PONG 4a bc 6e 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 61 eb df [binary, 4 bytes]
DEBUG:    < PONG b3 61 eb df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'vwh1' [text, 4 bytes]
DEBUG:    < PONG 'vwh1' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 67 54 0c [binary, 4 bytes]
DEBUG:    < PONG 96 67 54 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945894.2449646}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945902.5857723}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa c4 f8 77 [binary, 4 bytes]
DEBUG:    < PONG fa c4 f8 77 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb 4b d2 df [binary, 4 bytes]
DEBUG:    < PONG cb 4b d2 df [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d2 3b f3 c5 [binary, 4 bytes]
DEBUG:    < PONG d2 3b f3 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 ad 5a 17 [binary, 4 bytes]
DEBUG:    < PONG 95 ad 5a 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 d5 ed 54 [binary, 4 bytes]
DEBUG:    < PONG f2 d5 ed 54 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945924.256098}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c 23 87 71 [binary, 4 bytes]
DEBUG:    < PONG 0c 23 87 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 07 bb 3f [binary, 4 bytes]
DEBUG:    < PONG 5f 07 bb 3f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 89 fb fe [binary, 4 bytes]
DEBUG:    < PONG 9d 89 fb fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 94 4f aa [binary, 4 bytes]
DEBUG:    < PONG 65 94 4f aa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 60 d2 7d [binary, 4 bytes]
DEBUG:    < PONG 94 60 d2 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 ef 7e d5 [binary, 4 bytes]
DEBUG:    < PONG e9 ef 7e d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d9 ed 48 7e [binary, 4 bytes]
DEBUG:    < PONG d9 ed 48 7e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945954.2501469}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945962.5994098}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 0f 3b 5e [binary, 4 bytes]
DEBUG:    < PONG a6 0f 3b 5e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 78 1c f5 e2 [binary, 4 bytes]
DEBUG:    < PONG 78 1c f5 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 5d 60 a0 [binary, 4 bytes]
DEBUG:    < PONG 4e 5d 60 a0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c 72 04 a6 [binary, 4 bytes]
DEBUG:    < PONG 4c 72 04 a6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c 4c cd ac [binary, 4 bytes]
DEBUG:    < PONG 9c 4c cd ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745945984.259371}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 26 98 92 [binary, 4 bytes]
DEBUG:    < PONG 0e 26 98 92 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'eNS&' [text, 4 bytes]
DEBUG:    < PONG 'eNS&' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f eb b4 bb [binary, 4 bytes]
DEBUG:    < PONG 8f eb b4 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 72 d7 39 ea [binary, 4 bytes]
DEBUG:    < PONG 72 d7 39 ea [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 fe 12 2b [binary, 4 bytes]
DEBUG:    < PONG e7 fe 12 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 40 3d f3 [binary, 4 bytes]
DEBUG:    < PONG 12 40 3d f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ae 20 a7 42 [binary, 4 bytes]
DEBUG:    < PONG ae 20 a7 42 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946014.261823}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946022.6096272}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 90 01 cf [binary, 4 bytes]
DEBUG:    < PONG 83 90 01 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf 27 c7 4a [binary, 4 bytes]
DEBUG:    < PONG bf 27 c7 4a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 01 45 91 [binary, 4 bytes]
DEBUG:    < PONG b3 01 45 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '=\u01e9w' [text, 4 bytes]
DEBUG:    < PONG '=\u01e9w' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING dc 60 e3 ad [binary, 4 bytes]
DEBUG:    < PONG dc 60 e3 ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946044.265676}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9a bf 8b 3d [binary, 4 bytes]
DEBUG:    < PONG 9a bf 8b 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '{\x08C:' [text, 4 bytes]
DEBUG:    < PONG '{\x08C:' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be f6 91 39 [binary, 4 bytes]
DEBUG:    < PONG be f6 91 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 68 6f f0 71 [binary, 4 bytes]
DEBUG:    < PONG 68 6f f0 71 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 31 fb f9 [binary, 4 bytes]
DEBUG:    < PONG 94 31 fb f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 76 17 eb cd [binary, 4 bytes]
DEBUG:    < PONG 76 17 eb cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e3 22 b3 37 [binary, 4 bytes]
DEBUG:    < PONG e3 22 b3 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946074.2727108}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946082.6077392}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x0f\x19Ч' [text, 4 bytes]
DEBUG:    < PONG '\x0f\x19Ч' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 bb c8 f4 [binary, 4 bytes]
DEBUG:    < PONG a0 bb c8 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 0d ea 75 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 1c 93 1d [binary, 4 bytes]
DEBUG:    < PONG 0e 0d ea 75 [binary, 4 bytes]
DEBUG:    < PONG f5 1c 93 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 52 28 f2 [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946104.278511}' [45 bytes]
DEBUG:    < PONG e4 52 28 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 05 a5 c5 [binary, 4 bytes]
DEBUG:    < PONG a1 05 a5 c5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 57 b9 8d c1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 ca 15 2d [binary, 4 bytes]
DEBUG:    < PONG 57 b9 8d c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 56 ca 15 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a3 d5 2c 0d [binary, 4 bytes]
DEBUG:    < PONG a3 d5 2c 0d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 ae 9f 11 [binary, 4 bytes]
DEBUG:    < PONG 43 ae 9f 11 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 ff e3 c0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a 95 86 36 [binary, 4 bytes]
DEBUG:    < PONG b4 ff e3 c0 [binary, 4 bytes]
DEBUG:    < PONG 2a 95 86 36 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946134.2826045}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946142.6202824}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9d 66 24 3b [binary, 4 bytes]
DEBUG:    < PONG 9d 66 24 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a b1 44 74 [binary, 4 bytes]
DEBUG:    < PONG 2a b1 44 74 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 4e f6 7a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 2c ff 2d [binary, 4 bytes]
DEBUG:    < PONG f5 4e f6 7a [binary, 4 bytes]
DEBUG:    < PONG fa 2c ff 2d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946164.2872124}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3e b5 6a 97 [binary, 4 bytes]
DEBUG:    < PONG 3e b5 6a 97 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 90 5d 41 [binary, 4 bytes]
DEBUG:    < PONG 85 90 5d 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 ac 61 86 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 5a 07 b4 [binary, 4 bytes]
DEBUG:    < PONG c3 ac 61 86 [binary, 4 bytes]
DEBUG:    < PONG f7 5a 07 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 44 78 dd [binary, 4 bytes]
DEBUG:    < PONG 15 44 78 dd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6b e9 35 e1 [binary, 4 bytes]
DEBUG:    < PONG 6b e9 35 e1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 a1 e4 4a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 df 03 0f [binary, 4 bytes]
DEBUG:    < PONG d8 a1 e4 4a [binary, 4 bytes]
DEBUG:    < PONG 27 df 03 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946194.284166}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946202.6262794}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 32 df 89 f9 [binary, 4 bytes]
DEBUG:    < PONG 32 df 89 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 4f ab c9 [binary, 4 bytes]
DEBUG:    < PONG 49 4f ab c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 37 96 1d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 af b4 68 [binary, 4 bytes]
DEBUG:    < PONG 7b 37 96 1d [binary, 4 bytes]
DEBUG:    < PONG b9 af b4 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946224.2946146}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f de 77 5d [binary, 4 bytes]
DEBUG:    < PONG 5f de 77 5d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 81 36 87 [binary, 4 bytes]
DEBUG:    < PONG 96 81 36 87 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 17 15 e7 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 90 e6 95 89 [binary, 4 bytes]
DEBUG:    < PONG 28 17 15 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 90 e6 95 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 54 21 0a [binary, 4 bytes]
DEBUG:    < PONG b9 54 21 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c e7 5c c6 [binary, 4 bytes]
DEBUG:    < PONG 2c e7 5c c6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 2d 9e b2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d7 f7 c3 6c [binary, 4 bytes]
DEBUG:    < PONG d7 f7 c3 6c [binary, 4 bytes]
DEBUG:    < PONG d4 2d 9e b2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946254.2990282}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946262.634715}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 2e ff fc [binary, 4 bytes]
DEBUG:    < PONG d4 2e ff fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 96 b0 92 04 [binary, 4 bytes]
DEBUG:    < PONG 96 b0 92 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 00 33 94 13 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 33 22 a0 22 [binary, 4 bytes]
DEBUG:    < PONG 00 33 94 13 [binary, 4 bytes]
DEBUG:    < PONG 33 22 a0 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946284.299296}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 e8 63 cf [binary, 4 bytes]
DEBUG:    < PONG 66 e8 63 cf [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 d9 f6 40 [binary, 4 bytes]
DEBUG:    < PONG 98 d9 f6 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 d1 11 38 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ac b1 57 fc [binary, 4 bytes]
DEBUG:    < PONG 05 d1 11 38 [binary, 4 bytes]
DEBUG:    < PONG ac b1 57 fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 d5 9e 83 [binary, 4 bytes]
DEBUG:    < PONG 37 d5 9e 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 cb 78 f0 [binary, 4 bytes]
DEBUG:    < PONG 59 cb 78 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa ff b9 de [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 bf df fe [binary, 4 bytes]
DEBUG:    < PONG fa ff b9 de [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 24 bf df fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946314.306304}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946322.6438432}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd 78 5f 48 [binary, 4 bytes]
DEBUG:    < PONG cd 78 5f 48 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 7b 76 3e [binary, 4 bytes]
DEBUG:    < PONG da 7b 76 3e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 f3 39 42 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0c e4 92 67 [binary, 4 bytes]
DEBUG:    < PONG 20 f3 39 42 [binary, 4 bytes]
DEBUG:    < PONG 0c e4 92 67 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946344.3061922}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 e2 e9 33 [binary, 4 bytes]
DEBUG:    < PONG 38 e2 e9 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6e 01 d3 57 [binary, 4 bytes]
DEBUG:    < PONG 6e 01 d3 57 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a 87 c4 7d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING dd 22 bb 62 [binary, 4 bytes]
DEBUG:    < PONG 8a 87 c4 7d [binary, 4 bytes]
DEBUG:    < PONG dd 22 bb 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 c0 2d 9e [binary, 4 bytes]
DEBUG:    < PONG e9 c0 2d 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c2 c1 3b 05 [binary, 4 bytes]
DEBUG:    < PONG c2 c1 3b 05 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 58 8d ea [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 28 9a 1d [binary, 4 bytes]
DEBUG:    < PONG 7c 58 8d ea [binary, 4 bytes]
DEBUG:    < PONG 39 28 9a 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946374.3084733}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745946382.6533144}' [46 bytes]
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745946383.803922}}' [86 bytes]
INFO:     connection closed
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
INFO:     connection closed
INFO:     connection closed
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
INFO:     connection closed
Client qq reconnected
Sent pending message to qq: game_state
Added qq to room 390625c0-1255-408b-8f5c-39eaf9646339
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Action=buy_in, Player=qq, Result=True
Starting game in room 390625c0-1255-408b-8f5c-39eaf9646339
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 3h, Qd, 7h
Dealt cards to player position 7: 2s, 7c, Ks

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745945527.2862332
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-30 01:52:07.286233
[BROADCAST][room_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Action=start_game, Player=hq, Result=True
Room state saved successfully. Rooms: 8
[BROADCAST][game_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '3', 'suit': 'h', 'display': '3h'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '390625c0-1255-408b-8f5c-39eaf9646339', 'name': 'va1', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 3587.118891, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'h', 'display': '3h'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '3', 'suit': 'h', 'display': '3h'}, 'hand': [{'rank': 'Q', 'suit': 'd', 'display': 'Qd'}, {'rank': '7', 'suit': 'h', 'display': '7h'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 17.1188907623291, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T01:52:07.286233'}
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
Room state saved successfully. Rooms: 8
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 2c, Jh, Kh
Dealt cards to player position 7: 7d, 9d, Kd

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[BROADCAST][game_update] Room 390625c0-1255-408b-8f5c-39eaf9646339: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 8
处理玩家 7 动作: discard, 金额: 2
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Room state saved successfully. Rooms: 8
Checking for expired rooms...
Room b424f4d6-e86f-4182-93f7-83834f73fef2 has expired after 35.5 minutes of inactivity
Room b424f4d6-e86f-4182-93f7-83834f73fef2 has been idle for 35.5 minutes and will be removed
Sent room_expired notification to player: hq
Room 9d03a888-0c3b-425c-a103-6807e17d89b5 has expired after 34.7 minutes of inactivity
Room 9d03a888-0c3b-425c-a103-6807e17d89b5 has been idle for 34.7 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f has expired after 32.5 minutes of inactivity
Room 853c76d8-6c85-446f-a4d9-ec76a90bd10f has been idle for 32.5 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 314e283e-e4fb-4db3-b5ab-575e09d08d84 will expire in 0.0 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Removing expired room: b424f4d6-e86f-4182-93f7-83834f73fef2
已删除房间 b424f4d6-e86f-4182-93f7-83834f73fef2，当前房间总数: 7
Room state saved successfully. Rooms: 7
Removing expired room: 9d03a888-0c3b-425c-a103-6807e17d89b5
已删除房间 9d03a888-0c3b-425c-a103-6807e17d89b5，当前房间总数: 6
Room state saved successfully. Rooms: 6
Removing expired room: 853c76d8-6c85-446f-a4d9-ec76a90bd10f
已删除房间 853c76d8-6c85-446f-a4d9-ec76a90bd10f，当前房间总数: 5
Room state saved successfully. Rooms: 5
Removed 3 expired rooms, Notified 1 rooms about upcoming expiration. Remaining rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Room state saved successfully. Rooms: 5
Checking for expired rooms...
Room 314e283e-e4fb-4db3-b5ab-575e09d08d84 has expired after 35.0 minutes of inactivity
Room 314e283e-e4fb-4db3-b5ab-575e09d08d84 has been idle for 35.0 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d will expire in 1.1 minutes
Sent room_expiring notification to player: hq
Sent room_expiring notification to player: qq
Removing expired room: 314e283e-e4fb-4db3-b5ab-575e09d08d84
已删除房间 314e283e-e4fb-4db3-b5ab-575e09d08d84，当前房间总数: 4
Room state saved successfully. Rooms: 4
Removed 1 expired rooms, Notified 1 rooms about upcoming expiration. Remaining rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
Room state saved successfully. Rooms: 4
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 390625c0-1255-408b-8f5c-39eaf9646339
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 390625c0-1255-408b-8f5c-39eaf9646339
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Checking for expired rooms...
Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d has expired after 47.0 minutes of inactivity
Room e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d has been idle for 47.0 minutes and will be removed
Room state saved successfully. Rooms: 4
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 01d1f837-0170-4cb9-873a-b570fa63d717 has expired after 42.6 minutes of inactivity
Room 01d1f837-0170-4cb9-873a-b570fa63d717 has been idle for 42.6 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Room 1e692007-973d-4266-8258-59ca162aaac0 has expired after 30.1 minutes of inactivity
Room 1e692007-973d-4266-8258-59ca162aaac0 has been idle for 30.1 minutes and will be removed
Sent room_expired notification to player: hq
Sent room_expired notification to player: qq
Removing expired room: e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d
已删除房间 e1a8177c-aeac-4b0e-9b61-9f0f7bc3eb9d，当前房间总数: 3
Room state saved successfully. Rooms: 3
Removing expired room: 01d1f837-0170-4cb9-873a-b570fa63d717
已删除房间 01d1f837-0170-4cb9-873a-b570fa63d717，当前房间总数: 2
Room state saved successfully. Rooms: 2
Removing expired room: 1e692007-973d-4266-8258-59ca162aaac0
已删除房间 1e692007-973d-4266-8258-59ca162aaac0，当前房间总数: 1
Room state saved successfully. Rooms: 1
Removed 3 expired rooms. Remaining rooms: 1
Room state saved successfully. Rooms: 1
INFO:     127.0.0.1:55672 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:55672 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55777 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:55777 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Room state saved successfully. Rooms: 1
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 1
INFO:     127.0.0.1:59486 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59486 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59486 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59486 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59498 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59498 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:59498 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59498 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59486 - "OPTIONS /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='s1a' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=s1a, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1842169931168
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, name=s1a
Room created successfully: id=e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
已创建房间 e2dbd227-707e-4a33-8368-5f9b7f5a9ad0，房主: hq，当前房间总数: 2
Room state saved successfully. Rooms: 2
房间创建成功, 房间ID: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
创建房间成功: {'id': 'e2dbd227-707e-4a33-8368-5f9b7f5a9ad0', 'name': 's1a', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:59489 - "POST /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59489 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
尝试将用户 hq 添加到房间 e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0 with no seat assigned
成功: 用户 hq 已加入房间 e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59486 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59486 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59486 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: /YU71b4WUoc5sY7vxcMihg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59523) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: q6S/hn+2RzL/eUQx70U4KokerOc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:06:54 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4355 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953615.5183523}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: tHj8YqOo9IVGK3q835FB9g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59525) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: lAmsuYvD4v1Qe26MvtUcD/4UiYk=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:06:55 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...ame":"hq","chips":0}]}}' [272 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953615.5805275}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...5a9ad0","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745953615.9065347}}' [494 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745953616.8428266}}' [525 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Action=buy_in, Player=hq, Result=True
INFO:     127.0.0.1:59505 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:59505 - "OPTIONS /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
尝试将用户 qq 添加到房间 e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0 with no seat assigned
成功: 用户 qq 已加入房间 e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:59508 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59508 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59508 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: D3CfGVL4zzsbM+693LtjYQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59545) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: y4qfh5ygR8dv7xSb8u8puyVyYZw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:07:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4355 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745953624.293936}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745953624.293936}}' [83 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: URw/Tif/5q3wOp2aHzQJ6A==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59547) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: R2aPKZSGGtnoToXBsYn0D5rZZCE=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:07:04 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...ame":"qq","chips":0}]}}' [313 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745953624.340443}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745953624.340443}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...5a9ad0","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745953624.6856241}}' [535 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745953624.6856241}}' [535 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745953626.077402}}' [565 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745953626.077402}}' [565 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 db 48 0b [binary, 4 bytes]
DEBUG:    < PONG 61 db 48 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 f8 e2 c0 [binary, 4 bytes]
DEBUG:    < PONG 12 f8 e2 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...a33-8368-5f9b7f5a9ad0"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745953640.3924203}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745953640.3924203}}' [1474 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1497 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1497 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"c","display":"9c"}]}}' [1409 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"3s"}]}}' [1411 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 53 b5 30 95 [binary, 4 bytes]
DEBUG:    < PONG 53 b5 30 95 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 06 ae b6 [binary, 4 bytes]
DEBUG:    < PONG bc 06 ae b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953645.5979207}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953654.3742096}' [46 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":2}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1597 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1597 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"h","display":"Jh"}]}}' [1418 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"3s"}]}}' [1459 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 85 49 c9 [binary, 4 bytes]
DEBUG:    < PONG f7 85 49 c9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 56 9d 5c b6 [binary, 4 bytes]
DEBUG:    < PONG 56 9d 5c b6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 a7 94 aa [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 0f 32 f2 [binary, 4 bytes]
DEBUG:    < PONG 04 a7 94 aa [binary, 4 bytes]
DEBUG:    < PONG e7 0f 32 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u0407R#' [text, 4 bytes]
DEBUG:    < PONG '\u0407R#' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 a1 b1 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG b0 a1 b1 83 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953675.599168}' [45 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1485 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...ayer changed: 1 -> 7"}}' [1485 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'bO10' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f7 c0 2c 4c [binary, 4 bytes]
DEBUG:    < PONG 'bO10' [text, 4 bytes]
DEBUG:    < PONG f7 c0 2c 4c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953684.381646}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f5 a9 d6 7c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 df 5a 9b [binary, 4 bytes]
DEBUG:    < PONG f5 a9 d6 7c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG e4 df 5a 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c5 db fc 97 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9f b4 28 ec [binary, 4 bytes]
DEBUG:    < PONG c5 db fc 97 [binary, 4 bytes]
DEBUG:    < PONG 9f b4 28 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953705.5830443}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953714.6537242}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a8 03 44 d2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 c0 d5 ef [binary, 4 bytes]
DEBUG:    < PONG a8 03 44 d2 [binary, 4 bytes]
DEBUG:    < PONG 64 c0 d5 ef [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745953721.5997143}}' [87 bytes]
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Action=buy_in, Player=qq, Result=True
Room state saved successfully. Rooms: 2
Starting game in room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 9c, Jh, Ah
Dealt cards to player position 7: Kh, 10c, 3s

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 1 (hq)
两人游戏 - BB位置: 7 (qq)
Small Blind: Player 1 (hq) posts 0.5, remaining chips: 110.5
Big Blind: Player 7 (qq) posts 1.0, remaining chips: 332.0

=== CHIPS AFTER BLINDS ===
hq has 110.5 chips, bet: 0.5, position: BUTTON
qq has 332.0 chips, bet: 1.0, position: BIG BLIND
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 1)
设置当前玩家为: hq，索引: 1
计时器初始化: 设置时间为 1745953640.3924203
回合成功开始。当前玩家: hq
Game started successfully. End time: 2025-04-30 04:07:20.392420
[BROADCAST][room_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Sending update. Reason: First update for this room
玩家 hq 弃掉了第 2 张牌: {'rank': '9', 'suit': 'c', 'display': '9c'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': 'e2dbd227-707e-4a33-8368-5f9b7f5a9ad0', 'name': 's1a', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 3586.00241, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.5, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '9', 'suit': 'c', 'display': '9c'}}, {'name': 'qq', 'chips': 332.0, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 1, 'current_player_idx': 1, 'current_player': {'name': 'hq', 'chips': 110.5, 'position': 1, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '9', 'suit': 'c', 'display': '9c'}, 'hand': [{'rank': 'A', 'suit': 'h', 'display': 'Ah'}, {'rank': 'J', 'suit': 'h', 'display': 'Jh'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'hq', 'turn_remaining_time': 16.002410173416138, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T04:07:20.392420'}
Room state saved successfully. Rooms: 2
处理玩家 1 动作: fold, 金额: 0
玩家 hq 选择弃牌
Final pot after adding player bets: 1.5
Player qq wins 1.5 chips (all others folded)
Next hand will start in 5 seconds...
移动庄家按钮: 0 -> 1 (位置 7)
Dealing cards to players
Dealt cards to player position 1: 4s, Qd, Kh
Dealt cards to player position 7: 9s, 10h, 5d

=== POSTING BLINDS ===
Before blinds: hq has 110.5 chips
Before blinds: qq has 333.5 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 333.0
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 109.5

=== CHIPS AFTER BLINDS ===
hq has 109.5 chips, bet: 1.0, position: BIG BLIND
qq has 333.0 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
回合成功开始。当前玩家: qq
[DEBUG] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Change reason: Current player changed: 1 -> 7
[BROADCAST][game_update] Room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0: Sending update. Reason: Current player changed: 1 -> 7
Room state saved successfully. Rooms: 2
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59671 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:59671 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: QByJIV9wpRJWGnVEXtrD/Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59679) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: bmsG1Ng+3FLSVTwDDzC9gKoqKeQ=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:08:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4341 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953722.2357411}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953722.2357411}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: arMGrM+bIcfUBK4wR+EOMA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59683) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ox7h7l02/vS7qG9kLefAstWp38U=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:08:42 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953722.2546358}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953722.2546358}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745953722.6984348}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client hq connected
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59689 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:59689 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Xca8Jvj37dpMZEQfqOg9jQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59693) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ByjP9XkWphcj5RlAAM2qzeo6HX8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:08:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4343 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953723.3325467}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953723.3325467}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: 0IZoZhmAE6uOzQh0RZkFFw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 59695) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: YHRPtxXvGIGcV2LN6Ga3uhtqf1s=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:08:43 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953723.3559577}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745953723.3559577}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 84 ca 61 [binary, 4 bytes]
DEBUG:    < PONG 04 84 ca 61 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5e 62 e6 b4 [binary, 4 bytes]
DEBUG:    < PONG 5e 62 e6 b4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 34 6b 15 f7 [binary, 4 bytes]
DEBUG:    < PONG 34 6b 15 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 45 b9 2b 63 [binary, 4 bytes]
DEBUG:    < PONG 45 b9 2b 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 51 09 e6 49 [binary, 4 bytes]
DEBUG:    < PONG 51 09 e6 49 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 b8 a3 21 [binary, 4 bytes]
DEBUG:    < PONG 11 b8 a3 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cd c7 62 98 [binary, 4 bytes]
DEBUG:    < PONG cd c7 62 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953752.2773001}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953753.6499116}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 ec 3b 40 [binary, 4 bytes]
DEBUG:    < PONG 27 ec 3b 40 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 9a 61 e0 [binary, 4 bytes]
DEBUG:    < PONG d0 9a 61 e0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 9a 94 58 [binary, 4 bytes]
DEBUG:    < PONG f1 9a 94 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'KOG-' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3c 1c d2 58 [binary, 4 bytes]
DEBUG:    < PONG 'KOG-' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 3c 1c d2 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 36 1b 39 e4 [binary, 4 bytes]
DEBUG:    < PONG 36 1b 39 e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'XYq\x06' [text, 4 bytes]
DEBUG:    < PONG 'XYq\x06' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '3KcC' [text, 4 bytes]
DEBUG:    < PONG '3KcC' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba 72 db e6 [binary, 4 bytes]
DEBUG:    < PONG ba 72 db e6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953782.2772603}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6d 51 3f 84 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e 71 d3 3d [binary, 4 bytes]
DEBUG:    < PONG 6d 51 3f 84 [binary, 4 bytes]
DEBUG:    < PONG 0e 71 d3 3d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953783.6431482}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 27 ad 7a 25 [binary, 4 bytes]
DEBUG:    < PONG 27 ad 7a 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 7c 09 90 [binary, 4 bytes]
DEBUG:    < PONG 82 7c 09 90 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b0 fc f8 00 [binary, 4 bytes]
DEBUG:    < PONG b0 fc f8 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 41 51 3b [binary, 4 bytes]
DEBUG:    < PONG d5 41 51 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 ba 3c 39 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 09 88 47 [binary, 4 bytes]
DEBUG:    < PONG b7 ba 3c 39 [binary, 4 bytes]
DEBUG:    < PONG e2 09 88 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 bd d9 4f [binary, 4 bytes]
DEBUG:    < PONG c4 bd d9 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953812.2657135}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953813.4063563}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 49 bc a9 ae [binary, 4 bytes]
DEBUG:    < PONG 49 bc a9 ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING be 34 db 39 [binary, 4 bytes]
DEBUG:    < PONG be 34 db 39 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8d 98 87 fa [binary, 4 bytes]
DEBUG:    < PONG 8d 98 87 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cc 81 c3 77 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 61 f6 32 [binary, 4 bytes]
DEBUG:    < PONG cc 81 c3 77 [binary, 4 bytes]
DEBUG:    < PONG ce 61 f6 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1b ed 0d e9 [binary, 4 bytes]
DEBUG:    < PONG 1b ed 0d e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0d b2 db b9 [binary, 4 bytes]
DEBUG:    < PONG 0d b2 db b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 21 bd 8d cd [binary, 4 bytes]
DEBUG:    < PONG 21 bd 8d cd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 bd 20 8d [binary, 4 bytes]
DEBUG:    < PONG 18 bd 20 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953842.6661837}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0a ff 49 4d [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 65 de d0 d1 [binary, 4 bytes]
DEBUG:    < PONG 0a ff 49 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 65 de d0 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953843.6597428}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c3 d1 1f fd [binary, 4 bytes]
DEBUG:    < PONG c3 d1 1f fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '~kIR' [text, 4 bytes]
DEBUG:    < PONG '~kIR' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 bb 41 6f [binary, 4 bytes]
DEBUG:    < PONG 44 bb 41 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e1 0f 7d d1 [binary, 4 bytes]
DEBUG:    < PONG e1 0f 7d d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 28 13 d1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 fa 5e db [binary, 4 bytes]
DEBUG:    < PONG 44 28 13 d1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 93 fa 5e db [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4c f9 ea eb [binary, 4 bytes]
DEBUG:    < PONG 4c f9 ea eb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953872.6607196}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953873.6533484}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING be e1 50 ab [binary, 4 bytes]
DEBUG:    < PONG be e1 50 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5f 0c fb a4 [binary, 4 bytes]
DEBUG:    < PONG 5f 0c fb a4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 0c 46 f0 [binary, 4 bytes]
DEBUG:    < PONG c0 0c 46 f0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2d 0a 89 e2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING cb bc e1 2c [binary, 4 bytes]
DEBUG:    < PONG 2d 0a 89 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG cb bc e1 2c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 e8 5e 50 [binary, 4 bytes]
DEBUG:    < PONG 98 e8 5e 50 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 33 c3 96 [binary, 4 bytes]
DEBUG:    < PONG de 33 c3 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ea b3 71 98 [binary, 4 bytes]
DEBUG:    < PONG ea b3 71 98 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 ed bc ae [binary, 4 bytes]
DEBUG:    < PONG e7 ed bc ae [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b2 6d 50 92 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 c8 48 c1 [binary, 4 bytes]
DEBUG:    < PONG b2 6d 50 92 [binary, 4 bytes]
DEBUG:    < PONG 11 c8 48 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 09 d7 c1 [binary, 4 bytes]
DEBUG:    < PONG 47 09 d7 c1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 7d f4 5a [binary, 4 bytes]
DEBUG:    < PONG e4 7d f4 5a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '{2\u04e8' [text, 4 bytes]
DEBUG:    < PONG '{2\u04e8' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '2\x05F\x11' [text, 4 bytes]
DEBUG:    < PONG '2\x05F\x11' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING de 85 a2 45 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 10 c0 c0 fa [binary, 4 bytes]
DEBUG:    < PONG de 85 a2 45 [binary, 4 bytes]
DEBUG:    < PONG 10 c0 c0 fa [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7b 39 99 4d [binary, 4 bytes]
DEBUG:    < PONG 7b 39 99 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953933.6495485}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953934.6436825}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 42 38 ae 9f [binary, 4 bytes]
DEBUG:    < PONG 42 38 ae 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 5a c5 2b [binary, 4 bytes]
DEBUG:    < PONG e8 5a c5 2b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db dd 14 e9 [binary, 4 bytes]
DEBUG:    < PONG db dd 14 e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1d ec 95 e4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1f 84 22 03 [binary, 4 bytes]
DEBUG:    < PONG 1d ec 95 e4 [binary, 4 bytes]
DEBUG:    < PONG 1f 84 22 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 99 b6 25 [binary, 4 bytes]
DEBUG:    < PONG d4 99 b6 25 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 9f 59 47 [binary, 4 bytes]
DEBUG:    < PONG c0 9f 59 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 44 ef 66 03 [binary, 4 bytes]
DEBUG:    < PONG 44 ef 66 03 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 03 b6 74 fe [binary, 4 bytes]
DEBUG:    < PONG 03 b6 74 fe [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953963.4040556}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6c a9 0b 93 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 9c fe e9 19 [binary, 4 bytes]
DEBUG:    < PONG 9c fe e9 19 [binary, 4 bytes]
DEBUG:    < PONG 6c a9 0b 93 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 bf b9 a9 [binary, 4 bytes]
DEBUG:    < PONG a0 bf b9 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x04<u\x0b' [text, 4 bytes]
DEBUG:    < PONG '\x04<u\x0b' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 98 a4 83 8c [binary, 4 bytes]
DEBUG:    < PONG 98 a4 83 8c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6a 65 82 9f [binary, 4 bytes]
DEBUG:    < PONG 6a 65 82 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 ee 5a 06 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 7e 1c 79 [binary, 4 bytes]
DEBUG:    < PONG e2 ee 5a 06 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 83 7e 1c 79 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 71 e7 ec [binary, 4 bytes]
DEBUG:    < PONG 12 71 e7 ec [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953993.648859}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745953994.6635768}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 6b 33 f8 [binary, 4 bytes]
DEBUG:    < PONG 48 6b 33 f8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 a3 70 c8 [binary, 4 bytes]
DEBUG:    < PONG c4 a3 70 c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 66 60 a3 [binary, 4 bytes]
DEBUG:    < PONG ed 66 60 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745954002.680103}}' [86 bytes]
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client qq connected
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60069 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60069 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60071 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60071 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: pyVUOZo8k5X4rgTr9oYceA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60079) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: rIPBugRk71UE4COE46kgQDMFJMI=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:13:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4341 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1393 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...amp":1745954003.31887}}' [82 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: tFcd1yVsyLCFbjQtQBZ/pg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60080) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: 7/VxiUsyxuOoutuMmK3wWPDbPq8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:13:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4343 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3381999}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3381999}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: dmYelU/79Tb6MdU3AyPIBA==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60082) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ZhCJPBgWz2ycMtLfBK358WiJiC4=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:13:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3442678}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3442678}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: s951rjIhHbnnMKO2+PdpxQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60084) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: c86u8Ot1TZXx0y54lIN9kP2sjr8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:13:22 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3645434}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954003.3645434}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 5d 94 92 44 [binary, 4 bytes]
DEBUG:    < PONG 5d 94 92 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 88 6c e9 82 [binary, 4 bytes]
DEBUG:    < PONG 88 6c e9 82 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd e4 0c 27 [binary, 4 bytes]
DEBUG:    < PONG bd e4 0c 27 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff ee 1d b9 [binary, 4 bytes]
DEBUG:    < PONG ff ee 1d b9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'V+O\x12' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 b4 8f df [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e7 47 94 78 [binary, 4 bytes]
DEBUG:    < PONG e8 b4 8f df [binary, 4 bytes]
DEBUG:    < PONG 'V+O\x12' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < PONG e7 47 94 78 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING da 14 97 c3 [binary, 4 bytes]
DEBUG:    < PONG da 14 97 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 f6 3a c8 [binary, 4 bytes]
DEBUG:    < PONG a9 f6 3a c8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 38 47 6c 8b [binary, 4 bytes]
DEBUG:    < PONG 38 47 6c 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954033.647936}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954033.65779}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 97 cb 16 f7 [binary, 4 bytes]
DEBUG:    < PONG 97 cb 16 f7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 d0 1d ac [binary, 4 bytes]
DEBUG:    < PONG b5 d0 1d ac [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 6f 67 ec b1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff b8 94 b2 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 28 79 da 21 [binary, 4 bytes]
DEBUG:    < PONG 6f 67 ec b1 [binary, 4 bytes]
DEBUG:    < PONG ff b8 94 b2 [binary, 4 bytes]
DEBUG:    < PONG 28 79 da 21 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ff 62 b9 0f [binary, 4 bytes]
DEBUG:    < PONG ff 62 b9 0f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 58 81 a5 68 [binary, 4 bytes]
DEBUG:    < PONG 58 81 a5 68 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING eb 21 a6 3b [binary, 4 bytes]
DEBUG:    < PONG eb 21 a6 3b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa a1 91 9d [binary, 4 bytes]
DEBUG:    < PONG aa a1 91 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2f b9 5f 0b [binary, 4 bytes]
DEBUG:    < PONG 2f b9 5f 0b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 94 0b 0d 2f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'G27D' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'bY\x1e\x02' [text, 4 bytes]
DEBUG:    < PONG 94 0b 0d 2f [binary, 4 bytes]
DEBUG:    < PONG 'G27D' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 7a b6 70 [binary, 4 bytes]
DEBUG:    < PONG 'bY\x1e\x02' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < PONG f1 7a b6 70 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 95 77 5a c4 [binary, 4 bytes]
DEBUG:    < PONG 95 77 5a c4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954063.6515796}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954063.6631699}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bd d1 67 0a [binary, 4 bytes]
DEBUG:    < PONG bd d1 67 0a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 64 4e 43 e8 [binary, 4 bytes]
DEBUG:    < PONG 64 4e 43 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c8 33 8c ad [binary, 4 bytes]
DEBUG:    < PONG c8 33 8c ad [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 1c fa 81 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'q\x1b<U' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '.j$8' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 b1 47 ba [binary, 4 bytes]
DEBUG:    < PONG 'q\x1b<U' [text, 4 bytes]
DEBUG:    < PONG fc 1c fa 81 [binary, 4 bytes]
DEBUG:    < PONG '.j$8' [text, 4 bytes]
DEBUG:    < PONG 15 b1 47 ba [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 d3 f6 62 [binary, 4 bytes]
DEBUG:    < PONG 70 d3 f6 62 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745954083.6918707}}' [87 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client qq reconnected
Sent reconnect state to qq
Added qq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
Client hq connected
Client qq connected
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
Room state saved successfully. Rooms: 2
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='hq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60212 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'rMl"' [text, 4 bytes]
DEBUG:    < PONG 'rMl"' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: glsM+r6ON814NkOVh483EQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60215) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxMzYxMH0.oo64d0416MZVFC7YOsL8AJv5W7rUT8VjvdL9jozuW-I" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: g91OBGCBepe3WN8B836UkHBQp7c=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:14:44 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4341 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"s","display":"4s"}]}}' [1394 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954084.4965522}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954084.4965522}}' [84 bytes]
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745954084.728947}}' [86 bytes]
INFO:     connection closed
Client hq reconnected
Sent reconnect state to hq
Added hq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60220 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: Mm75yq5bIQFd3jmZtXTRLQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60223) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ys1dH3pFUs/KenAuqn2s4PUQOFc=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:14:45 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4343 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954085.3753037}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954085.3753037}}' [84 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 80 33 2e 9e [binary, 4 bytes]
DEBUG:    < PONG 80 33 2e 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745954097.3353677}}' [87 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745954097.3401341}}' [87 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745954097.345189}}' [86 bytes]
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...mp":1745954097.345189}}' [86 bytes]
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
DEBUG:    < CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1005 (no status received [internal]) [0 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: hq
WebSocket disconnected for client: hq
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0

===== 加入房间请求开始 =====
请求数据: room_id='e2dbd227-707e-4a33-8368-5f9b7f5a9ad0' username='qq'
成功找到房间: e2dbd227-707e-4a33-8368-5f9b7f5a9ad0, 名称: s1a
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60222 - "POST /api/rooms/join HTTP/1.1" 200 OK
INFO:     127.0.0.1:60214 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:60214 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: lTRBDESmwsRkOPfy7JNXig==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60253) - "WebSocket /ws/game/e2dbd227-707e-4a33-8368-5f9b7f5a9ad0?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxMzYxMn0.5H86Po1F3vfUpFcbWPNoRYElH0WFqPoW4LN_MC4E1bo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: ecvrNj+p8O6GFzYK0m/JS95P1DY=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:14:58 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4343 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"e2dbd22...:"d","display":"5d"}]}}' [1396 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954098.2957027}}' [84 bytes]
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
INFO:     connection closed
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
INFO:     connection closed
Client qq reconnected
Sent reconnect state to qq
Added qq to room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room e2dbd227-707e-4a33-8368-5f9b7f5a9ad0
WebSocket disconnected for client: qq
WebSocket disconnected for client: qq
WebSocket disconnected for client: qq
INFO:     127.0.0.1:60222 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:60222 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:60222 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60222 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60289 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:60289 - "GET /api/rooms HTTP/1.1" 200 OK

===== 创建房间请求开始（room_routes.py） =====
请求数据: name='fsddfs' small_blind=0.5 big_blind=1.0 buy_in_min=100.0 buy_in_max=1000.0 game_duration_hours=1.0 max_players=8 creator='hq'
房间参数: name=fsddfs, max_players=8, small_blind=0.5, big_blind=1.0
游戏时长: 1.0 小时
房间管理器实例ID: 1842169931168
使用creator字段作为房主: hq
最终确定的房主: hq
Creating Room: id=0b9c02bd-766f-41e3-9201-ad029a1ac46b, name=fsddfs
Room created successfully: id=0b9c02bd-766f-41e3-9201-ad029a1ac46b
已创建房间 0b9c02bd-766f-41e3-9201-ad029a1ac46b，房主: hq，当前房间总数: 3
Room state saved successfully. Rooms: 3
房间创建成功, 房间ID: 0b9c02bd-766f-41e3-9201-ad029a1ac46b
创建房间成功: {'id': '0b9c02bd-766f-41e3-9201-ad029a1ac46b', 'name': 'fsddfs', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'buy_in_min': 100.0, 'buy_in_max': 1000.0, 'players': [], 'current_players': 0, 'game_duration_hours': 1.0}
===== 创建房间请求结束（成功） =====

INFO:     127.0.0.1:60289 - "POST /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='hq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
尝试将用户 hq 添加到房间 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Creating Player: name=hq, chips=0
Player hq created successfully with no assigned seat
Player hq joined room 0b9c02bd-766f-41e3-9201-ad029a1ac46b with no seat assigned
成功: 用户 hq 已加入房间 0b9c02bd-766f-41e3-9201-ad029a1ac46b
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60289 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='hq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60289 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='hq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
信息: 用户 hq 已在房间中
INFO:     127.0.0.1:60289 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: AblTTn+sF8yawQWxkVNaeg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60306) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: VGZcbYdmyi44Zd7sH5LHasPzFac=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:15:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4341 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...ame":"hq","chips":0}]}}' [275 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954109.4579964}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: sIKezcz2E97tJTCSLkaE9g==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60308) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: TQy400mro/+IhafGdUoDtSqepqo=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:15:08 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...ame":"hq","chips":0}]}}' [275 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745954109.502174}}' [83 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...1ac46b","seat_index":1}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745954110.3107667}}' [497 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":111,"seat_index":1}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...p":1745954111.1248126}}' [528 bytes]
Client hq reconnected
Sent reconnect state to hq
Added hq to room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Client hq connected
处理入座请求: 玩家=hq, 座位=1
玩家 hq 已入座在座位 1，同时设置position=1
[BROADCAST][room_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Action=sit_down, Player=hq, Result=True
处理买入请求: 玩家=hq, 金额=111.0, 座位=1
玩家 hq 已买入 111.0，总买入: 111.0，总筹码: 111.0，座位: 1，position=1
[BROADCAST][room_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Action=buy_in, Player=hq, Result=True
Room state saved successfully. Rooms: 3
INFO:     127.0.0.1:60317 - "GET /api/rooms HTTP/1.1" 200 OK
INFO:     127.0.0.1:60317 - "GET /api/rooms HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='qq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
尝试将用户 qq 添加到房间 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Creating Player: name=qq, chips=0
Player qq created successfully with no assigned seat
Player qq joined room 0b9c02bd-766f-41e3-9201-ad029a1ac46b with no seat assigned
成功: 用户 qq 已加入房间 0b9c02bd-766f-41e3-9201-ad029a1ac46b
注意: 玩家加入房间时没有座位分配，需要手动选择座位
当前房间玩家: ['hq', 'qq']
===== 加入房间请求结束 =====

INFO:     127.0.0.1:60317 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='qq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60317 - "POST /api/rooms/join HTTP/1.1" 200 OK

===== 加入房间请求开始 =====
请求数据: room_id='0b9c02bd-766f-41e3-9201-ad029a1ac46b' username='qq'
成功找到房间: 0b9c02bd-766f-41e3-9201-ad029a1ac46b, 名称: fsddfs
信息: 用户 qq 已在房间中
INFO:     127.0.0.1:60317 - "POST /api/rooms/join HTTP/1.1" 200 OK
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: JFL8Cm0oqCFWze6S8Lbpkg==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60334) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: A87SKDqAzYG3BT16fQQelNN5h3o=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:15:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...yer changed: 1 -> 7"}}}' [4343 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...ame":"qq","chips":0}]}}' [316 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954116.8718204}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954116.8718204}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: a8fAvR2lQm3yX8RPwMS0JQ==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 60336) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: cneM0ZFPL3i2H+2cfNY2NEQ9YMw=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:15:16 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...ame":"qq","chips":0}]}}' [316 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954116.9073322}}' [84 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954116.9073322}}' [84 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"sit_down","room...1ac46b","seat_index":7}' [106 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745954118.1162694}}' [538 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"sit_dow...p":1745954118.1162694}}' [538 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"buy_in","room_i...nt":333,"seat_index":7}' [117 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745954119.075773}}' [568 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"buy_in"...mp":1745954119.075773}}' [568 bytes]
DEBUG:    < TEXT '{"type":"room_action","action":"start_game","ro...1e3-9201-ad029a1ac46b"}' [93 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745954125.8521001}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"room_update","data":{"action":"start_g...p":1745954125.8521001}}' [1477 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1500 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"timer_u...update for this room"}}' [1500 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"h","display":"3h"}]}}' [1411 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"c","display":"2c"}]}}' [1411 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7a ba 84 3a [binary, 4 bytes]
DEBUG:    < PONG 7a ba 84 3a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2a bb 7c 9b [binary, 4 bytes]
DEBUG:    < PONG 2a bb 7c 9b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8c 4a 8b e4 [binary, 4 bytes]
DEBUG:    < PONG 8c 4a 8b e4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 91 13 52 [binary, 4 bytes]
DEBUG:    < PONG 2c 91 13 52 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954139.5131462}' [46 bytes]
DEBUG:    < TEXT '{"type":"game_action","action":"discard","card_index":1}' [56 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1608 bytes]
DEBUG:    > TEXT '{"type":"game_update","data":{"action":"discard...layer_action_discard"}}' [1608 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"h","display":"3h"}]}}' [1428 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"c","display":"2c"}]}}' [1467 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954146.9448888}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 b4 fd fb [binary, 4 bytes]
DEBUG:    < PONG 41 b4 fd fb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 55 7b 13 a1 [binary, 4 bytes]
DEBUG:    < PONG 55 7b 13 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8a d8 a7 0e [binary, 4 bytes]
DEBUG:    < PONG 8a d8 a7 0e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f2 a1 f9 a3 [binary, 4 bytes]
DEBUG:    < PONG f2 a1 f9 a3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 82 f7 25 5c [binary, 4 bytes]
DEBUG:    < PONG 82 f7 25 5c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b5 99 2d 73 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954169.5068595}' [46 bytes]
DEBUG:    < PONG b5 99 2d 73 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b4 3e 3c 9a [binary, 4 bytes]
DEBUG:    < PONG b4 3e 3c 9a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 24 71 13 d3 [binary, 4 bytes]
DEBUG:    < PONG 24 71 13 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954177.6504483}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u01a7\x04=' [text, 4 bytes]
DEBUG:    < PONG '\u01a7\x04=' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 19 7e 63 [binary, 4 bytes]
DEBUG:    < PONG d4 19 7e 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 0e 56 66 [binary, 4 bytes]
DEBUG:    < PONG b1 0e 56 66 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c6 2f 62 51 [binary, 4 bytes]
DEBUG:    < PONG c6 2f 62 51 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954199.5123186}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954207.6533108}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING be e7 48 8d [binary, 4 bytes]
DEBUG:    < PONG be e7 48 8d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa 4d b5 f6 [binary, 4 bytes]
DEBUG:    < PONG fa 4d b5 f6 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 67 8c 08 [binary, 4 bytes]
DEBUG:    < PONG c1 67 8c 08 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e4 f8 60 22 [binary, 4 bytes]
DEBUG:    < PONG e4 f8 60 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b7 05 2d bb [binary, 4 bytes]
DEBUG:    < PONG b7 05 2d bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 70 d2 13 33 [binary, 4 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954229.5107079}' [46 bytes]
DEBUG:    < PONG 70 d2 13 33 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 17 0d 08 bb [binary, 4 bytes]
DEBUG:    < PONG 17 0d 08 bb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 92 78 fd d5 [binary, 4 bytes]
DEBUG:    < PONG 92 78 fd d5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954237.6554458}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 77 ca ef 04 [binary, 4 bytes]
DEBUG:    < PONG 77 ca ef 04 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 85 a6 05 7d [binary, 4 bytes]
DEBUG:    < PONG 85 a6 05 7d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c4 6f f2 f2 [binary, 4 bytes]
DEBUG:    < PONG c4 6f f2 f2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 26 99 fd [binary, 4 bytes]
DEBUG:    < PONG 4e 26 99 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954259.5176005}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 8a 78 2a [binary, 4 bytes]
DEBUG:    < PONG 75 8a 78 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING db ce 08 91 [binary, 4 bytes]
DEBUG:    < PONG db ce 08 91 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 47 5a b4 55 [binary, 4 bytes]
DEBUG:    < PONG 47 5a b4 55 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 89 fa 09 32 [binary, 4 bytes]
DEBUG:    < PONG 89 fa 09 32 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 23 98 72 d3 [binary, 4 bytes]
DEBUG:    < PONG 23 98 72 d3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954289.5153832}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\u0765\u0790' [text, 4 bytes]
DEBUG:    < PONG '\u0765\u0790' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 8a 51 6c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ba b3 04 2a [binary, 4 bytes]
DEBUG:    < PONG 7f 8a 51 6c [binary, 4 bytes]
DEBUG:    < PONG ba b3 04 2a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954302.6546118}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 01 c4 ec 7a [binary, 4 bytes]
DEBUG:    < PONG 01 c4 ec 7a [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'q\u03e4k' [text, 4 bytes]
DEBUG:    < PONG 'q\u03e4k' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 31 24 11 e9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e6 96 3b 02 [binary, 4 bytes]
DEBUG:    < PONG 31 24 11 e9 [binary, 4 bytes]
DEBUG:    < PONG e6 96 3b 02 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954319.5075352}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%\x13\x19$' [text, 4 bytes]
DEBUG:    < PONG '%\x13\x19$' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING bf e3 dc e5 [binary, 4 bytes]
DEBUG:    < PONG bf e3 dc e5 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '5ema' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e2 3a b2 41 [binary, 4 bytes]
DEBUG:    < PONG '5ema' [text, 4 bytes]
DEBUG:    < PONG e2 3a b2 41 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 60 bb c9 ee [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 22 ca 24 9e [binary, 4 bytes]
DEBUG:    < PONG 60 bb c9 ee [binary, 4 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    < PONG 22 ca 24 9e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954349.5210867}' [46 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e8 64 33 0c [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 6b 53 ce [binary, 4 bytes]
DEBUG:    < PONG e8 64 33 0c [binary, 4 bytes]
DEBUG:    < PONG 79 6b 53 ce [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954362.657638}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7c 91 2f fd [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fc 28 4c e9 [binary, 4 bytes]
DEBUG:    < PONG 7c 91 2f fd [binary, 4 bytes]
DEBUG:    < PONG fc 28 4c e9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '5&\u07e4' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ',2\x00M' [text, 4 bytes]
DEBUG:    < PONG '5&\u07e4' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG ',2\x00M' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954379.5052252}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a c0 a4 f4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ce 26 4b 1b [binary, 4 bytes]
DEBUG:    < PONG ce 26 4b 1b [binary, 4 bytes]
DEBUG:    < PONG 4a c0 a4 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 0c d4 e3 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b8 d5 f3 dc [binary, 4 bytes]
DEBUG:    < PONG 50 0c d4 e3 [binary, 4 bytes]
DEBUG:    < PONG b8 d5 f3 dc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954400.9739885}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d0 c5 e3 f9 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3a 05 80 7f [binary, 4 bytes]
DEBUG:    < PONG d0 c5 e3 f9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 3a 05 80 7f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954409.6507506}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a1 09 aa 90 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ']D\x06A' [text, 4 bytes]
DEBUG:    < PONG a1 09 aa 90 [binary, 4 bytes]
DEBUG:    < PONG ']D\x06A' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954417.6597273}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING fe f0 7c e4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 18 77 93 45 [binary, 4 bytes]
DEBUG:    < PONG fe f0 7c e4 [binary, 4 bytes]
DEBUG:    < PONG 18 77 93 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x1a\ubf01' [text, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING df 26 2c 6f [binary, 4 bytes]
DEBUG:    < PONG df 26 2c 6f [binary, 4 bytes]
DEBUG:    < PONG '\x1a\ubf01' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954439.6465187}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954447.6520154}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a a7 aa 94 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ed 2a c7 9e [binary, 4 bytes]
DEBUG:    < PONG ed 2a c7 9e [binary, 4 bytes]
DEBUG:    < PONG 4a a7 aa 94 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING c1 68 bd 4f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '%\x19Ka' [text, 4 bytes]
DEBUG:    < PONG c1 68 bd 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG '%\x19Ka' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fb a2 63 c0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 50 4e 76 a0 [binary, 4 bytes]
DEBUG:    < PONG 50 4e 76 a0 [binary, 4 bytes]
DEBUG:    < PONG fb a2 63 c0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 14 27 f8 a1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 83 3b 98 4d [binary, 4 bytes]
DEBUG:    < PONG 14 27 f8 a1 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 83 3b 98 4d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954482.6499314}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954482.6619346}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 15 5b fa ce [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 1a 04 38 [binary, 4 bytes]
DEBUG:    < PONG 15 5b fa ce [binary, 4 bytes]
DEBUG:    < PONG ca 1a 04 38 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4a 08 e6 20 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING bc 95 de 3f [binary, 4 bytes]
DEBUG:    < PONG bc 95 de 3f [binary, 4 bytes]
DEBUG:    < PONG 4a 08 e6 20 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING b9 b6 4b 39 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 35 21 98 b7 [binary, 4 bytes]
DEBUG:    < PONG b9 b6 4b 39 [binary, 4 bytes]
DEBUG:    < PONG 35 21 98 b7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f1 6c 9f 29 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 06 78 7b d2 [binary, 4 bytes]
DEBUG:    < PONG f1 6c 9f 29 [binary, 4 bytes]
DEBUG:    < PONG 06 78 7b d2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 63 9e 32 fc [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f ad 9a 4e [binary, 4 bytes]
DEBUG:    < PONG 7f ad 9a 4e [binary, 4 bytes]
DEBUG:    < PONG 63 9e 32 fc [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 4a e5 96 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 4e 6a 22 c3 [binary, 4 bytes]
DEBUG:    < PONG 02 4a e5 96 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 4e 6a 22 c3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954542.6560965}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954542.670099}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 22 8d cf [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 0d f7 a9 [binary, 4 bytes]
DEBUG:    < PONG d4 22 8d cf [binary, 4 bytes]
DEBUG:    < PONG 48 0d f7 a9 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 ea 8d 54 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 b7 e5 1d [binary, 4 bytes]
DEBUG:    < PONG e0 ea 8d 54 [binary, 4 bytes]
DEBUG:    < PONG 71 b7 e5 1d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING ca 7b 86 53 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 3f 95 46 5f [binary, 4 bytes]
DEBUG:    < PONG 3f 95 46 5f [binary, 4 bytes]
DEBUG:    < PONG ca 7b 86 53 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d5 0b 0c ec [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a6 38 88 ab [binary, 4 bytes]
DEBUG:    < PONG d5 0b 0c ec [binary, 4 bytes]
DEBUG:    < PONG a6 38 88 ab [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f9 69 60 6f [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 5a 9d 34 [binary, 4 bytes]
DEBUG:    < PONG e0 5a 9d 34 [binary, 4 bytes]
DEBUG:    < PONG f9 69 60 6f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 59 70 61 9e [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a2 c6 70 17 [binary, 4 bytes]
DEBUG:    < PONG 59 70 61 9e [binary, 4 bytes]
DEBUG:    < PONG a2 c6 70 17 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954602.6558325}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954602.6971762}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 1c 29 e3 29 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2c 05 d8 22 [binary, 4 bytes]
DEBUG:    < PONG 1c 29 e3 29 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG 2c 05 d8 22 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 74 8a f1 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c0 8a 1b 37 [binary, 4 bytes]
DEBUG:    < PONG d4 74 8a f1 [binary, 4 bytes]
DEBUG:    < PONG c0 8a 1b 37 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 04 24 8e 58 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 11 71 ed 9f [binary, 4 bytes]
DEBUG:    < PONG 04 24 8e 58 [binary, 4 bytes]
DEBUG:    < PONG 11 71 ed 9f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING aa ce 46 f4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c7 29 a4 1e [binary, 4 bytes]
DEBUG:    < PONG aa ce 46 f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG c7 29 a4 1e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f8 03 8f 8b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b3 83 f1 5a [binary, 4 bytes]
DEBUG:    < PONG b3 83 f1 5a [binary, 4 bytes]
DEBUG:    < PONG f8 03 8f 8b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e0 52 86 d4 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 86 7e 69 58 [binary, 4 bytes]
DEBUG:    < PONG e0 52 86 d4 [binary, 4 bytes]
DEBUG:    < PONG 86 7e 69 58 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954662.6573043}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954662.668306}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 ba df 68 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 66 cb 9d 9d [binary, 4 bytes]
DEBUG:    < PONG a0 ba df 68 [binary, 4 bytes]
DEBUG:    < PONG 66 cb 9d 9d [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d8 2d de e0 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 79 90 d5 46 [binary, 4 bytes]
DEBUG:    < PONG d8 2d de e0 [binary, 4 bytes]
DEBUG:    < PONG 79 90 d5 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 20 d9 1d 0b [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING a0 d3 58 5f [binary, 4 bytes]
DEBUG:    < PONG 20 d9 1d 0b [binary, 4 bytes]
DEBUG:    < PONG a0 d3 58 5f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 55 a9 48 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '8D\\\n' [text, 4 bytes]
DEBUG:    < PONG f3 55 a9 48 [binary, 4 bytes]
DEBUG:    < PONG '8D\\\n' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e5 b6 79 cb [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING f4 66 93 44 [binary, 4 bytes]
DEBUG:    < PONG e5 b6 79 cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < PONG f4 66 93 44 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING fa e2 ba 25 [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 2e 9d 96 14 [binary, 4 bytes]
DEBUG:    < PONG fa e2 ba 25 [binary, 4 bytes]
DEBUG:    < PONG 2e 9d 96 14 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954722.6549551}' [46 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954722.6656873}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 08 9b ec bf [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8e ee 9b 46 [binary, 4 bytes]
DEBUG:    < PONG 08 9b ec bf [binary, 4 bytes]
DEBUG:    < PONG 8e ee 9b 46 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 99 f1 b3 8a [binary, 4 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 61 d4 f7 45 [binary, 4 bytes]
DEBUG:    < PONG 99 f1 b3 8a [binary, 4 bytes]
DEBUG:    < PONG 61 d4 f7 45 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % received keepalive pong
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
DEBUG:    x half-closing TCP connection
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    ! failing connection with code 1006
DEBUG:    = connection is CLOSED
INFO:     connection closed
INFO:     connection closed
DEBUG:    x half-closing TCP connection
INFO:     connection closed
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br
DEBUG:    < accept-language: zh-CN,zh;q=0.9
DEBUG:    < sec-websocket-key: 8Xctfk3NNjvNm4l9xyMMzw==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61319) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJocSIsImV4cCI6MjA2MTMxNDEwNX0.EUF7QQgpgnkWLtGTY-s2-p4cV4xt-jb6AM_5aKkMAHo" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: d8d/83hTyQv9Ka6ImuXJWNpdvF8=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:25:51 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4503 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"h","display":"3h"}]}}' [1411 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...p":1745954751.9764168}}' [84 bytes]
DEBUG:    = connection is CONNECTING
DEBUG:    < GET /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII HTTP/1.1
DEBUG:    < host: localhost:8000
DEBUG:    < connection: Upgrade
DEBUG:    < pragma: no-cache
DEBUG:    < cache-control: no-cache
DEBUG:    < user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
DEBUG:    < upgrade: websocket
DEBUG:    < origin: http://localhost:3000
DEBUG:    < sec-websocket-version: 13
DEBUG:    < accept-encoding: gzip, deflate, br, zstd
DEBUG:    < accept-language: en-US,en-GB;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6
DEBUG:    < sec-websocket-key: gVYtJEe9wSruc7mqwq4O1Q==
DEBUG:    < sec-websocket-extensions: permessage-deflate; client_max_window_bits
INFO:     ('127.0.0.1', 61329) - "WebSocket /ws/game/0b9c02bd-766f-41e3-9201-ad029a1ac46b?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJxcSIsImV4cCI6MjA2MTMxNDEwM30.KFv0j6jszxHeq7RkGbHAzL4aBWDPKdaOeJtdXjwNHII" [accepted]
DEBUG:    > HTTP/1.1 101 Switching Protocols
DEBUG:    > Upgrade: websocket
DEBUG:    > Connection: Upgrade
DEBUG:    > Sec-WebSocket-Accept: kv0UXWXnr/nMjQNpvvp2cvnaXKM=
DEBUG:    > Sec-WebSocket-Extensions: permessage-deflate
DEBUG:    > date: Tue, 29 Apr 2025 19:25:53 GMT
DEBUG:    > server: uvicorn
INFO:     connection open
DEBUG:    = connection is OPEN
DEBUG:    > TEXT '{"type":"reconnect_state","data":{"game_state":...ayer_action_discard"}}}' [4542 bytes]
DEBUG:    > TEXT '{"type":"game_state","data":{"room_id":"0b9c02b...:"c","display":"2c"}]}}' [1449 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745954753.965311}}' [83 bytes]
DEBUG:    > TEXT '{"type":"player_connected","data":{"player_id":...mp":1745954753.965311}}' [83 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING '\x08\x1e/Z' [text, 4 bytes]
DEBUG:    < PONG '\x08\x1e/Z' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 75 6b d7 4b [binary, 4 bytes]
DEBUG:    < PONG 75 6b d7 4b [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954781.991491}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954783.9805534}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 48 a2 65 fd [binary, 4 bytes]
DEBUG:    < PONG 48 a2 65 fd [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 'm|\u0362' [text, 4 bytes]
DEBUG:    < PONG 'm|\u0362' [text, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING f3 33 e3 0c [binary, 4 bytes]
DEBUG:    < PONG f3 33 e3 0c [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954812.6628022}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 8f 85 d7 6e [binary, 4 bytes]
DEBUG:    < PONG 8f 85 d7 6e [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954814.643594}' [45 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 0e fc 9c d4 [binary, 4 bytes]
DEBUG:    < PONG 0e fc 9c d4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 93 1d 2d ff [binary, 4 bytes]
DEBUG:    < PONG 93 1d 2d ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954842.657862}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954844.6480527}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING c9 98 6a cb [binary, 4 bytes]
DEBUG:    < PONG c9 98 6a cb [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING e9 ed 0c f4 [binary, 4 bytes]
DEBUG:    < PONG e9 ed 0c f4 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 39 44 9e ff [binary, 4 bytes]
DEBUG:    < PONG 39 44 9e ff [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954872.6629264}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING b1 eb 8f f3 [binary, 4 bytes]
DEBUG:    < PONG b1 eb 8f f3 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954874.6544805}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 41 2d f1 4f [binary, 4 bytes]
DEBUG:    < PONG 41 2d f1 4f [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 43 34 f6 89 [binary, 4 bytes]
DEBUG:    < PONG 43 34 f6 89 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954902.66316}' [44 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING ef 41 02 e8 [binary, 4 bytes]
DEBUG:    < PONG ef 41 02 e8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING cf 38 df 81 [binary, 4 bytes]
DEBUG:    < PONG cf 38 df 81 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 05 5f 48 d0 [binary, 4 bytes]
DEBUG:    < PONG 05 5f 48 d0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 37 5b 72 e2 [binary, 4 bytes]
DEBUG:    < PONG 37 5b 72 e2 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 7f 62 52 e7 [binary, 4 bytes]
DEBUG:    < PONG 7f 62 52 e7 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 02 c5 f1 00 [binary, 4 bytes]
DEBUG:    < PONG 02 c5 f1 00 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954962.657094}' [45 bytes]
DEBUG:    < TEXT '{"type":"ping"}' [15 bytes]
DEBUG:    > TEXT '{"type":"pong","timestamp":1745954962.6670952}' [46 bytes]
DEBUG:    % sending keepalive ping
DEBUG:    > PING 12 08 ef 47 [binary, 4 bytes]
DEBUG:    < PONG 12 08 ef 47 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING a9 68 4c 63 [binary, 4 bytes]
DEBUG:    < PONG a9 68 4c 63 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING 71 f9 4a b0 [binary, 4 bytes]
DEBUG:    < PONG 71 f9 4a b0 [binary, 4 bytes]
DEBUG:    % received keepalive pong
DEBUG:    % sending keepalive ping
DEBUG:    > PING d4 81 17 b8 [binary, 4 bytes]
DEBUG:    < PONG d4 81 17 b8 [binary, 4 bytes]
DEBUG:    % received keepalive pong
Client qq reconnected
Sent reconnect state to qq
Added qq to room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Client qq connected
处理入座请求: 玩家=qq, 座位=7
玩家 qq 已入座在座位 7，同时设置position=7
[BROADCAST][room_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Action=sit_down, Player=qq, Result=True
处理买入请求: 玩家=qq, 金额=333.0, 座位=7
玩家 qq 已买入 333.0，总买入: 333.0，总筹码: 333.0，座位: 7，position=7
[BROADCAST][room_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Action=buy_in, Player=qq, Result=True
Starting game in room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
检查玩家 hq: 位置=1, 筹码=111.0
检查玩家 qq: 位置=7, 筹码=333.0
Building player info, players: ['hq', 'qq']
Adding player hq with 111.0 chips at position 1
Adding player qq with 333.0 chips at position 7
Player info list: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Creating Game instance with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Initializing Game with players_info: [{'name': 'hq', 'chips': 111.0, 'position': 1, 'total_buy_in': 111.0}, {'name': 'qq', 'chips': 333.0, 'position': 7, 'total_buy_in': 333.0}]
Game object initialized, ready to start round
Dealing cards to players
Dealt cards to player position 1: 7h, 6d, 3h
Dealt cards to player position 7: 2s, 2c, Ks

=== POSTING BLINDS ===
Before blinds: hq has 111.0 chips
Before blinds: qq has 333.0 chips
两人游戏 - Button/SB位置: 7 (qq)
两人游戏 - BB位置: 1 (hq)
Small Blind: Player 7 (qq) posts 0.5, remaining chips: 332.5
Big Blind: Player 1 (hq) posts 1.0, remaining chips: 110.0

=== CHIPS AFTER BLINDS ===
hq has 110.0 chips, bet: 1.0, position: BIG BLIND
qq has 332.5 chips, bet: 0.5, position: BUTTON
Total bets on table: 1.5
两人游戏: 由小盲注位置(庄家位置)开始行动 (玩家索引: 7)
设置当前玩家为: qq，索引: 7
计时器初始化: 设置时间为 1745954125.8521001
回合成功开始。当前玩家: qq
Game started successfully. End time: 2025-04-30 04:15:25.852100
[BROADCAST][room_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Action=start_game, Player=hq, Result=True
[BROADCAST][game_update] Room 0b9c02bd-766f-41e3-9201-ad029a1ac46b: Sending update. Reason: First update for this room
Room state saved successfully. Rooms: 3
玩家 hq 弃掉了第 1 张牌: {'rank': '6', 'suit': 'd', 'display': '6d'}
[BROADCAST][game_update]: Action=discard, Player=hq, GameState={'room_id': '0b9c02bd-766f-41e3-9201-ad029a1ac46b', 'name': 'fsddfs', 'max_players': 8, 'small_blind': 0.5, 'big_blind': 1.0, 'status': 'playing', 'game_duration_hours': 1.0, 'owner': 'hq', 'gamePhase': 'PRE_FLOP', 'remaining_time': 3583.605126, 'game': {'state': 'playing', 'players': [{'name': 'hq', 'chips': 110.0, 'position': 1, 'seat': 1, 'has_cards': True, 'is_active': True, 'bet_amount': 1.0, 'folded': False, 'is_current_player': False, 'total_buy_in': 111.0, 'has_discarded': True, 'discarded_card': {'rank': '6', 'suit': 'd', 'display': '6d'}}, {'name': 'qq', 'chips': 332.5, 'position': 7, 'seat': 7, 'has_cards': True, 'is_active': True, 'bet_amount': 0.5, 'folded': False, 'is_current_player': True, 'total_buy_in': 333.0, 'has_discarded': False}], 'pot': 0, 'total_pot': 1.5, 'current_bet': 1.0, 'community_cards': [], 'dealer_idx': 7, 'current_player_idx': 7, 'current_player': {'name': 'qq', 'chips': 332.5, 'position': 7, 'total_buy_in': 333.0, 'has_discarded': False, 'discarded_card': None, 'hand': [{'rank': 'K', 'suit': 's', 'display': 'Ks'}, {'rank': '2', 'suit': 's', 'display': '2s'}, {'rank': '2', 'suit': 'c', 'display': '2c'}], 'bet_amount': 0.5}, 'betting_round': 0, 'game_phase': 'PRE_FLOP', 'active_players': [1, 7], 'blinds': {'small': 0.5, 'big': 1.0}, 'current_player_id': 'qq', 'turn_remaining_time': 13.605126142501831, 'turn_time_limit': 30}, 'is_game_started': True, 'game_end_time': '2025-04-30T04:15:25.852100'}
处理玩家 7 动作: discard, 金额: 1
玩家 qq 必须先弃掉一张牌
Room state saved successfully. Rooms: 3
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Error broadcasting to room member hq: no close frame received or sent
WebSocket disconnected for client: hq
Client hq disconnected
Removed hq from room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
WebSocket disconnected for client: hq
WebSocket disconnected for client: qq
Room state saved successfully. Rooms: 3
Client hq reconnected
Sent reconnect state to hq
Added hq to room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Client qq reconnected
Sent reconnect state to qq
Added qq to room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
Room state saved successfully. Rooms: 3
Checking for expired rooms...
No expired or expiring rooms found
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
Room state saved successfully. Rooms: 3
INFO:     127.0.0.1:61651 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:61651 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
DEBUG:    > TEXT '{"type":"player_disconnected","data":{"player_i...p":1745955005.6286352}}' [87 bytes]
INFO:     connection closed
WebSocket disconnected for client: qq
Client qq disconnected
Removed qq from room 0b9c02bd-766f-41e3-9201-ad029a1ac46b
INFO:     127.0.0.1:61673 - "OPTIONS /api/users/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:61673 - "GET /api/users/profile HTTP/1.1" 403 Forbidden
DEBUG:    < CLOSE 1001 (going away) [2 bytes]
DEBUG:    = connection is CLOSING
DEBUG:    > CLOSE 1001 (going away) [2 bytes]
DEBUG:    x half-closing TCP connection
DEBUG:    = connection is CLOSED
INFO:     connection closed
